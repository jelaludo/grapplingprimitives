{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/data/concepts.ts"],"sourcesContent":["export interface ConceptPoint {\r\n  id: string;\r\n  label: string;\r\n  x: number;            // normalized -1 to 1\r\n  y: number;            // same scale\r\n  category: string;     // category name\r\n  description?: string;\r\n  color?: string;       // optional color override\r\n}\r\n\r\n// Initial concepts - this will be populated from the existing BJJConcept data\r\n// For now, we'll create a few example concepts\r\nexport const CONCEPTS: ConceptPoint[] = [\r\n  {\r\n    id: \"empathy\",\r\n    label: \"Empathy\",\r\n    x: 0.72,\r\n    y: 0.41,\r\n    category: \"Grappling Primitives\",\r\n    description: \"Understanding your opponent's position and intentions\",\r\n  },\r\n  {\r\n    id: \"pressure\",\r\n    label: \"Pressure\",\r\n    x: -0.35,\r\n    y: -0.62,\r\n    category: \"Physical Techniques\",\r\n    description: \"Applying controlled pressure to control your opponent\",\r\n  },\r\n  {\r\n    id: \"timing\",\r\n    label: \"Timing\",\r\n    x: 0.58,\r\n    y: 0.73,\r\n    category: \"Mental Skills\",\r\n    description: \"Recognizing and executing techniques at the right moment\",\r\n  },\r\n  {\r\n    id: \"balance\",\r\n    label: \"Balance\",\r\n    x: -0.12,\r\n    y: 0.25,\r\n    category: \"Physical Techniques\",\r\n    description: \"Maintaining your own balance while disrupting your opponent's\",\r\n  },\r\n];\r\n\r\n// Helper function to convert BJJConcept to ConceptPoint\r\n// The data uses 0-1 range, we need to convert to -1 to 1 for our coordinate system\r\n// IMPORTANT: The old D3 code used:\r\n//   X axis = axis_mental_physical (0=Mental/left, 1=Physical/right)\r\n//   Y axis = axis_self_opponent (0=Opponent/bottom, 1=Self/top, inverted)\r\n// We need to match this mapping for consistency\r\nexport function convertBJJConceptToConceptPoint(\r\n  concept: {\r\n    id: string;\r\n    concept: string;\r\n    description?: string;\r\n    category: string;\r\n    axis_self_opponent: number; // 0-1 range: 0=Opponent, 1=Self\r\n    axis_mental_physical: number; // 0-1 range: 0=Mental, 1=Physical\r\n    color?: string;\r\n  }\r\n): ConceptPoint {\r\n  // Convert 0-1 range to -1 to 1 range\r\n  // X axis: axis_mental_physical (0=Mental/left, 1=Physical/right)\r\n  // Y axis: axis_self_opponent (0=Opponent/bottom, 1=Self/top)\r\n  // In our coordinate system: -1 to 1, where center is 0\r\n  // SVG Y increases downward, so we invert: Self (1) should be at top (-1)\r\n  const x = (concept.axis_mental_physical - 0.5) * 2; // 0->-1 (Mental/left), 0.5->0, 1->1 (Physical/right)\r\n  const y = -((concept.axis_self_opponent - 0.5) * 2); // 0->1 (Opponent/bottom), 0.5->0, 1->-1 (Self/top)\r\n  \r\n  return {\r\n    id: concept.id,\r\n    label: concept.concept,\r\n    x: x, // Now in -1 to 1 range\r\n    y: y, // Now in -1 to 1 range, inverted so Self is at top\r\n    category: concept.category,\r\n    description: concept.description,\r\n    color: concept.color,\r\n  };\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;;AAYO,IAAM,WAA2B;IACtC;QACE,IAAI;QACJ,OAAO;QACP,GAAG;QACH,GAAG;QACH,UAAU;QACV,aAAa;IACf;IACA;QACE,IAAI;QACJ,OAAO;QACP,GAAG,CAAC;QACJ,GAAG,CAAC;QACJ,UAAU;QACV,aAAa;IACf;IACA;QACE,IAAI;QACJ,OAAO;QACP,GAAG;QACH,GAAG;QACH,UAAU;QACV,aAAa;IACf;IACA;QACE,IAAI;QACJ,OAAO;QACP,GAAG,CAAC;QACJ,GAAG;QACH,UAAU;QACV,aAAa;IACf;CACD;AAQM,SAAS,gCACd,OAQC;IAED,qCAAqC;IACrC,iEAAiE;IACjE,6DAA6D;IAC7D,uDAAuD;IACvD,yEAAyE;IACzE,IAAM,IAAI,CAAC,QAAQ,oBAAoB,GAAG,GAAG,IAAI,GAAG,qDAAqD;IACzG,IAAM,IAAI,CAAC,CAAC,CAAC,QAAQ,kBAAkB,GAAG,GAAG,IAAI,CAAC,GAAG,mDAAmD;IAExG,OAAO;QACL,IAAI,QAAQ,EAAE;QACd,OAAO,QAAQ,OAAO;QACtB,GAAG;QACH,GAAG;QACH,UAAU,QAAQ,QAAQ;QAC1B,aAAa,QAAQ,WAAW;QAChC,OAAO,QAAQ,KAAK;IACtB;AACF"}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/lib/matrix/panzoom.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useCallback, useRef, useEffect } from \"react\";\r\n\r\nexport interface PanZoomState {\r\n  zoom: number;\r\n  translateX: number;\r\n  translateY: number;\r\n}\r\n\r\nconst MIN_ZOOM = 0.5;\r\nconst MAX_ZOOM = 5;\r\nconst ZOOM_STEP = 0.1;\r\nconst DEFAULT_ZOOM = 1;\r\n\r\nexport function usePanZoom(initialState?: Partial<PanZoomState>) {\r\n  const [state, setState] = useState<PanZoomState>({\r\n    zoom: initialState?.zoom ?? DEFAULT_ZOOM,\r\n    translateX: initialState?.translateX ?? 0,\r\n    translateY: initialState?.translateY ?? 0,\r\n  });\r\n\r\n  const isPanning = useRef(false);\r\n  const lastPanPoint = useRef({ x: 0, y: 0 });\r\n\r\n  const zoomBy = useCallback((delta: number, centerX?: number, centerY?: number, width?: number, height?: number) => {\r\n    setState((prev) => {\r\n      const newZoom = Math.max(MIN_ZOOM, Math.min(MAX_ZOOM, prev.zoom + delta));\r\n      const zoomRatio = newZoom / prev.zoom;\r\n\r\n      // If center point is provided, zoom towards that point\r\n      // centerX/Y are in screen pixel coordinates\r\n      // The transform is: scale(z) translate(tx/z, ty/z)\r\n      // SVG applies right-to-left: translate first, then scale\r\n      // So: translate(tx/z, ty/z) then scale(z)\r\n      // A data point at (dx, dy) becomes: ((dx + tx/z) * z, (dy + ty/z) * z) = (dx*z + tx, dy*z + ty)\r\n      // \r\n      // To keep a screen point (sx, sy) fixed:\r\n      // 1. Convert screen to viewBox coordinates (before transform): vx = (sx / width) * 4 - 2\r\n      // 2. Find what data point is currently at this viewBox position: dx = (vx - tx) / z\r\n      // 3. After zoom, we want the same data point at the same screen position\r\n      // 4. So: vx' = dx * z' + tx' = vx\r\n      // 5. Solving: tx' = vx - dx * z' = vx - (vx - tx) * z' / z = vx * (1 - z'/z) + tx * z'/z\r\n      if (centerX !== undefined && centerY !== undefined && width && height) {\r\n        // Convert screen pixel to data coordinate (in viewBox space -2 to 2)\r\n        // Current viewBox: minX, minY, size (where size = 4/zoom)\r\n        const currentViewBoxSize = 4 / prev.zoom;\r\n        const currentMinX = -2 - prev.translateX - (currentViewBoxSize - 4) / 2;\r\n        const currentMinY = -2 - prev.translateY - (currentViewBoxSize - 4) / 2;\r\n        \r\n        // Screen point in viewBox coordinates (where the dot actually is)\r\n        const dataX = currentMinX + (centerX / width) * currentViewBoxSize;\r\n        const dataY = currentMinY + (centerY / height) * currentViewBoxSize;\r\n        \r\n        // After zoom, we want this same data point to stay at the same screen position\r\n        // New viewBox size\r\n        const newViewBoxSize = 4 / newZoom;\r\n        // Calculate new translate to keep dataX at the same screen position\r\n        // dataX = newMinX + (centerX / width) * newViewBoxSize\r\n        // So: newMinX = dataX - (centerX / width) * newViewBoxSize\r\n        const newMinX = dataX - (centerX / width) * newViewBoxSize;\r\n        const newMinY = dataY - (centerY / height) * newViewBoxSize;\r\n        \r\n        // Convert back to translate coordinates\r\n        // newMinX = -2 - newTranslateX - (newViewBoxSize - 4) / 2\r\n        // So: newTranslateX = -2 - newMinX - (newViewBoxSize - 4) / 2\r\n        const newTranslateX = -2 - newMinX - (newViewBoxSize - 4) / 2;\r\n        const newTranslateY = -2 - newMinY - (newViewBoxSize - 4) / 2;\r\n        \r\n        return {\r\n          zoom: newZoom,\r\n          translateX: newTranslateX,\r\n          translateY: newTranslateY,\r\n        };\r\n      }\r\n\r\n      // Zoom without center point - zoom around current center\r\n      return {\r\n        ...prev,\r\n        zoom: newZoom,\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  const panBy = useCallback((deltaX: number, deltaY: number) => {\r\n    // deltaX and deltaY are in viewBox units\r\n    // When panning, we move the viewBox, which means we adjust translate\r\n    // Since viewBox moves in the opposite direction of the pan, we subtract\r\n    setState((prev) => ({\r\n      translateX: prev.translateX - deltaX,\r\n      translateY: prev.translateY - deltaY,\r\n      zoom: prev.zoom,\r\n    }));\r\n  }, []);\r\n\r\n  const reset = useCallback(() => {\r\n    setState({\r\n      zoom: DEFAULT_ZOOM,\r\n      translateX: 0,\r\n      translateY: 0,\r\n    });\r\n  }, []);\r\n\r\n  const setZoom = useCallback((zoom: number) => {\r\n    setState((prev) => ({\r\n      ...prev,\r\n      zoom: Math.max(MIN_ZOOM, Math.min(MAX_ZOOM, zoom)),\r\n    }));\r\n  }, []);\r\n\r\n  const zoomIn = useCallback(() => {\r\n    zoomBy(ZOOM_STEP);\r\n  }, [zoomBy]);\r\n\r\n  const zoomOut = useCallback(() => {\r\n    zoomBy(-ZOOM_STEP);\r\n  }, [zoomBy]);\r\n\r\n  // Mouse pan handlers\r\n  const handleMouseDown = useCallback((e: React.MouseEvent) => {\r\n    if (e.button === 0) { // Left mouse button\r\n      isPanning.current = true;\r\n      lastPanPoint.current = { x: e.clientX, y: e.clientY };\r\n      e.preventDefault();\r\n    }\r\n  }, []);\r\n\r\n  const handleMouseMove = useCallback((e: React.MouseEvent, convertToViewBox?: (deltaX: number, deltaY: number) => { x: number; y: number }) => {\r\n    if (isPanning.current) {\r\n      const deltaX = e.clientX - lastPanPoint.current.x;\r\n      const deltaY = e.clientY - lastPanPoint.current.y;\r\n      // If conversion function provided, use it (for viewBox units)\r\n      // Otherwise use screen pixels (legacy behavior)\r\n      if (convertToViewBox) {\r\n        const viewBoxDelta = convertToViewBox(deltaX, deltaY);\r\n        panBy(viewBoxDelta.x, viewBoxDelta.y);\r\n      } else {\r\n        panBy(deltaX, deltaY);\r\n      }\r\n      lastPanPoint.current = { x: e.clientX, y: e.clientY };\r\n      e.preventDefault();\r\n    }\r\n  }, [panBy]);\r\n\r\n  const handleMouseUp = useCallback(() => {\r\n    isPanning.current = false;\r\n  }, []);\r\n\r\n  const handleWheel = useCallback((e: React.WheelEvent) => {\r\n    e.preventDefault();\r\n    const delta = e.deltaY > 0 ? -ZOOM_STEP : ZOOM_STEP;\r\n    const rect = e.currentTarget.getBoundingClientRect();\r\n    // Get mouse position relative to the container (in screen pixels)\r\n    const centerX = e.clientX - rect.left;\r\n    const centerY = e.clientY - rect.top;\r\n    // Zoom towards the mouse position\r\n    zoomBy(delta, centerX, centerY);\r\n  }, [zoomBy]);\r\n\r\n  // Touch handlers\r\n  const touchStartRef = useRef<{ x: number; y: number; distance: number } | null>(null);\r\n\r\n  const handleTouchStart = useCallback((e: React.TouchEvent) => {\r\n    if (e.touches.length === 1) {\r\n      touchStartRef.current = {\r\n        x: e.touches[0].clientX,\r\n        y: e.touches[0].clientY,\r\n        distance: 0,\r\n      };\r\n    } else if (e.touches.length === 2) {\r\n      const touch1 = e.touches[0];\r\n      const touch2 = e.touches[1];\r\n      const distance = Math.hypot(\r\n        touch2.clientX - touch1.clientX,\r\n        touch2.clientY - touch1.clientY\r\n      );\r\n      touchStartRef.current = {\r\n        x: (touch1.clientX + touch2.clientX) / 2,\r\n        y: (touch1.clientY + touch2.clientY) / 2,\r\n        distance,\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  const handleTouchMove = useCallback((e: React.TouchEvent, convertToViewBox?: (deltaX: number, deltaY: number) => { x: number; y: number }, width?: number, height?: number) => {\r\n    if (!touchStartRef.current) return;\r\n\r\n    if (e.touches.length === 1 && touchStartRef.current.distance === 0) {\r\n      // Single finger pan\r\n      const deltaX = e.touches[0].clientX - touchStartRef.current.x;\r\n      const deltaY = e.touches[0].clientY - touchStartRef.current.y;\r\n      if (convertToViewBox) {\r\n        const viewBoxDelta = convertToViewBox(deltaX, deltaY);\r\n        panBy(viewBoxDelta.x, viewBoxDelta.y);\r\n      } else {\r\n        panBy(deltaX, deltaY);\r\n      }\r\n      touchStartRef.current.x = e.touches[0].clientX;\r\n      touchStartRef.current.y = e.touches[0].clientY;\r\n    } else if (e.touches.length === 2 && touchStartRef.current.distance > 0) {\r\n      // Two finger pinch zoom\r\n      const touch1 = e.touches[0];\r\n      const touch2 = e.touches[1];\r\n      const distance = Math.hypot(\r\n        touch2.clientX - touch1.clientX,\r\n        touch2.clientY - touch1.clientY\r\n      );\r\n      const scale = distance / touchStartRef.current.distance;\r\n      const rect = e.currentTarget.getBoundingClientRect();\r\n      const centerX = (touchStartRef.current.x - rect.left);\r\n      const centerY = (touchStartRef.current.y - rect.top);\r\n      zoomBy((scale - 1) * ZOOM_STEP * 2, centerX, centerY, width, height);\r\n      touchStartRef.current.distance = distance;\r\n    }\r\n  }, [panBy, zoomBy]);\r\n\r\n  const handleTouchEnd = useCallback(() => {\r\n    touchStartRef.current = null;\r\n  }, []);\r\n\r\n  return {\r\n    state,\r\n    zoomBy,\r\n    panBy,\r\n    reset,\r\n    setZoom,\r\n    zoomIn,\r\n    zoomOut,\r\n    handlers: {\r\n      onMouseDown: handleMouseDown,\r\n      onMouseMove: handleMouseMove,\r\n      onMouseUp: handleMouseUp,\r\n      onMouseLeave: handleMouseUp,\r\n      onWheel: handleWheel,\r\n      onTouchStart: handleTouchStart,\r\n      onTouchMove: handleTouchMove,\r\n      onTouchEnd: handleTouchEnd,\r\n    },\r\n  };\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 351, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/lib/matrix/scales.ts"],"sourcesContent":["/**\r\n * Scale helpers for converting between normalized coordinates (-1 to 1) and screen coordinates\r\n */\r\n\r\nexport interface Viewport {\r\n  width: number;\r\n  height: number;\r\n  translateX: number;\r\n  translateY: number;\r\n  zoom: number;\r\n}\r\n\r\n/**\r\n * Convert normalized coordinate (-1 to 1) to screen coordinate\r\n */\r\nexport function normalizedToScreen(\r\n  normalized: number,\r\n  viewport: Viewport,\r\n  axis: 'x' | 'y'\r\n): number {\r\n  const center = axis === 'x' ? viewport.width / 2 : viewport.height / 2;\r\n  const range = axis === 'x' ? viewport.width : viewport.height;\r\n  const scale = (range * viewport.zoom) / 2;\r\n  \r\n  return center + normalized * scale + (axis === 'x' ? viewport.translateX : viewport.translateY);\r\n}\r\n\r\n/**\r\n * Convert screen coordinate to normalized coordinate (-1 to 1)\r\n */\r\nexport function screenToNormalized(\r\n  screen: number,\r\n  viewport: Viewport,\r\n  axis: 'x' | 'y'\r\n): number {\r\n  const center = axis === 'x' ? viewport.width / 2 : viewport.height / 2;\r\n  const range = axis === 'x' ? viewport.width : viewport.height;\r\n  const scale = (range * viewport.zoom) / 2;\r\n  \r\n  return (screen - center - (axis === 'x' ? viewport.translateX : viewport.translateY)) / scale;\r\n}\r\n\r\n/**\r\n * Clamp a value between min and max\r\n */\r\nexport function clamp(value: number, min: number, max: number): number {\r\n  return Math.min(Math.max(value, min), max);\r\n}\r\n\r\n/**\r\n * Get the viewBox string for SVG\r\n * For our normalized coordinate system (-1 to 1), we use a dynamic viewBox\r\n * The viewBox controls what area we see - dots stay at fixed coordinates\r\n * Format: \"minX minY width height\"\r\n * \r\n * To zoom: reduce width/height (smaller viewBox = more zoom)\r\n * To pan: change minX/minY (move the viewBox window)\r\n * \r\n * Base viewBox: -2 to 2 (shows full coordinate space)\r\n * When zoom=1, translate=0: viewBox = \"-2 -2 4 4\"\r\n */\r\nexport function getViewBox(viewport: Viewport): string {\r\n  // Base viewBox is -2 to 2 (width 4, height 4)\r\n  // Zoom: viewBox size = 4 / zoom (zoom=2 means size=2, showing 2x zoom)\r\n  const viewBoxSize = 4 / viewport.zoom;\r\n  \r\n  // Pan: translate moves the viewBox window\r\n  // Base center is at (0, 0) in viewBox coordinates\r\n  // translateX/Y moves the center of what we see\r\n  const minX = -2 - viewport.translateX - (viewBoxSize - 4) / 2;\r\n  const minY = -2 - viewport.translateY - (viewBoxSize - 4) / 2;\r\n  \r\n  return `${minX} ${minY} ${viewBoxSize} ${viewBoxSize}`;\r\n}\r\n\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;AAaM,SAAS,mBACd,UAAkB,EAClB,QAAkB,EAClB,IAAe;IAEf,IAAM,SAAS,SAAS,MAAM,SAAS,KAAK,GAAG,IAAI,SAAS,MAAM,GAAG;IACrE,IAAM,QAAQ,SAAS,MAAM,SAAS,KAAK,GAAG,SAAS,MAAM;IAC7D,IAAM,QAAQ,AAAC,QAAQ,SAAS,IAAI,GAAI;IAExC,OAAO,SAAS,aAAa,QAAQ,CAAC,SAAS,MAAM,SAAS,UAAU,GAAG,SAAS,UAAU;AAChG;AAKO,SAAS,mBACd,MAAc,EACd,QAAkB,EAClB,IAAe;IAEf,IAAM,SAAS,SAAS,MAAM,SAAS,KAAK,GAAG,IAAI,SAAS,MAAM,GAAG;IACrE,IAAM,QAAQ,SAAS,MAAM,SAAS,KAAK,GAAG,SAAS,MAAM;IAC7D,IAAM,QAAQ,AAAC,QAAQ,SAAS,IAAI,GAAI;IAExC,OAAO,CAAC,SAAS,SAAS,CAAC,SAAS,MAAM,SAAS,UAAU,GAAG,SAAS,UAAU,CAAC,IAAI;AAC1F;AAKO,SAAS,MAAM,KAAa,EAAE,GAAW,EAAE,GAAW;IAC3D,OAAO,KAAK,GAAG,CAAC,KAAK,GAAG,CAAC,OAAO,MAAM;AACxC;AAcO,SAAS,WAAW,QAAkB;IAC3C,8CAA8C;IAC9C,uEAAuE;IACvE,IAAM,cAAc,IAAI,SAAS,IAAI;IAErC,0CAA0C;IAC1C,kDAAkD;IAClD,+CAA+C;IAC/C,IAAM,OAAO,CAAC,IAAI,SAAS,UAAU,GAAG,CAAC,cAAc,CAAC,IAAI;IAC5D,IAAM,OAAO,CAAC,IAAI,SAAS,UAAU,GAAG,CAAC,cAAc,CAAC,IAAI;IAE5D,OAAO,AAAC,GAAU,OAAR,MAAK,KAAW,OAAR,MAAK,KAAkB,OAAf,aAAY,KAAe,OAAZ;AAC3C"}},
    {"offset": {"line": 398, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-xl border border-border-subtle bg-bg-raised text-text-primary shadow-card\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nCard.displayName = \"Card\";\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardHeader.displayName = \"CardHeader\";\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\r\n      \"font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nCardTitle.displayName = \"CardTitle\";\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn(\"text-sm text-text-muted\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardDescription.displayName = \"CardDescription\";\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n));\r\nCardContent.displayName = \"CardContent\";\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardFooter.displayName = \"CardFooter\";\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;;;;;;;;AAEA,IAAM,qBAAO,2KAAgB,MAG3B,iBAA0B;QAAvB,mBAAA,WAAc;QAAd;;yBACH,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,qFACA;OAEE;;;;;;;AAGR,KAAK,WAAW,GAAG;AAEnB,IAAM,2BAAa,2KAAgB,OAGjC,iBAA0B;QAAvB,mBAAA,WAAc;QAAd;;yBACH,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;OAC3C;;;;;;;AAGR,WAAW,WAAW,GAAG;AAEzB,IAAM,0BAAY,2KAAgB,OAGhC,iBAA0B;QAAvB,mBAAA,WAAc;QAAd;;yBACH,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,6CACA;OAEE;;;;;;;AAGR,UAAU,WAAW,GAAG;AAExB,IAAM,gCAAkB,2KAAgB,OAGtC,iBAA0B;QAAvB,mBAAA,WAAc;QAAd;;yBACH,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,2BAA2B;OACrC;;;;;;;AAGR,gBAAgB,WAAW,GAAG;AAE9B,IAAM,4BAAc,2KAAgB,OAGlC,iBAA0B;QAAvB,mBAAA,WAAc;QAAd;;yBACH,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,YAAY;OAAgB;;;;;;;AAE3D,YAAY,WAAW,GAAG;AAE1B,IAAM,2BAAa,2KAAgB,QAGjC,iBAA0B;QAAvB,mBAAA,WAAc;QAAd;;yBACH,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,8BAA8B;OACxC;;;;;;;AAGR,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 536, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"border-transparent bg-accent-primary text-white\",\r\n        secondary: \"border-transparent bg-bg-raised text-text-primary\",\r\n        destructive: \"border-transparent bg-red-600 text-white\",\r\n        outline: \"text-text-primary border-border-subtle\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n);\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  );\r\n}\r\n\r\nexport { Badge, badgeVariants };\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;AACA;AACA;;;;;;;AAEA,IAAM,gBAAgB,IAAA,0KAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,WAAS;YACT,WAAW;YACX,aAAa;YACb,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM;QAAE,YAAF,OAAE,WAAW,UAAb,OAAa,SAAY,2LAAzB;QAAE;QAAW;;IAC1B,qBACE,6LAAC;QAAI,WAAW,IAAA,4HAAE,EAAC,cAAc;YAAE,SAAA;QAAQ,IAAI;OAAgB;;;;;AAEnE;KAJS"}},
    {"offset": {"line": 593, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/modules/concept-matrix/matrix-controls.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { ZoomIn, ZoomOut, RotateCcw, Grid3x3 } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface MatrixControlsProps {\r\n  onZoomIn: () => void;\r\n  onZoomOut: () => void;\r\n  onReset: () => void;\r\n  onQuadrant?: (quadrant: 1 | 2 | 3 | 4) => void;\r\n  className?: string;\r\n}\r\n\r\nexport function MatrixControls({\r\n  onZoomIn,\r\n  onZoomOut,\r\n  onReset,\r\n  onQuadrant,\r\n  className,\r\n}: MatrixControlsProps) {\r\n  return (\r\n    <div className={cn(\"flex flex-col gap-2\", className)}>\r\n      {/* Zoom controls */}\r\n      <div className=\"flex flex-col gap-1\">\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"icon\"\r\n          onClick={onZoomIn}\r\n          className=\"h-10 w-10\"\r\n          aria-label=\"Zoom in\"\r\n        >\r\n          <ZoomIn className=\"h-4 w-4\" />\r\n        </Button>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"icon\"\r\n          onClick={onZoomOut}\r\n          className=\"h-10 w-10\"\r\n          aria-label=\"Zoom out\"\r\n        >\r\n          <ZoomOut className=\"h-4 w-4\" />\r\n        </Button>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"icon\"\r\n          onClick={onReset}\r\n          className=\"h-10 w-10\"\r\n          aria-label=\"Reset view\"\r\n        >\r\n          <RotateCcw className=\"h-4 w-4\" />\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Quadrant navigation */}\r\n      {onQuadrant && (\r\n        <div className=\"grid grid-cols-2 gap-1 mt-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => onQuadrant(1)}\r\n            className=\"h-8 text-xs\"\r\n            aria-label=\"Quadrant 1\"\r\n          >\r\n            Q1\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => onQuadrant(2)}\r\n            className=\"h-8 text-xs\"\r\n            aria-label=\"Quadrant 2\"\r\n          >\r\n            Q2\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => onQuadrant(3)}\r\n            className=\"h-8 text-xs\"\r\n            aria-label=\"Quadrant 3\"\r\n          >\r\n            Q3\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => onQuadrant(4)}\r\n            className=\"h-8 text-xs\"\r\n            aria-label=\"Quadrant 4\"\r\n          >\r\n            Q4\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AAAA;AAAA;AACA;AAJA;;;;;;AAcO,SAAS,eAAe,KAMT;QALpB,WAD6B,MAC7B,UACA,YAF6B,MAE7B,WACA,UAH6B,MAG7B,SACA,aAJ6B,MAI7B,YACA,YAL6B,MAK7B;IAEA,qBACE,6LAAC;QAAI,WAAW,IAAA,4HAAE,EAAC,uBAAuB;;0BAExC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,+IAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS;wBACT,WAAU;wBACV,cAAW;kCAEX,cAAA,6LAAC,uNAAM;4BAAC,WAAU;;;;;;;;;;;kCAEpB,6LAAC,+IAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS;wBACT,WAAU;wBACV,cAAW;kCAEX,cAAA,6LAAC,0NAAO;4BAAC,WAAU;;;;;;;;;;;kCAErB,6LAAC,+IAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS;wBACT,WAAU;wBACV,cAAW;kCAEX,cAAA,6LAAC,gOAAS;4BAAC,WAAU;;;;;;;;;;;;;;;;;YAKxB,4BACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,+IAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS;mCAAM,WAAW;;wBAC1B,WAAU;wBACV,cAAW;kCACZ;;;;;;kCAGD,6LAAC,+IAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS;mCAAM,WAAW;;wBAC1B,WAAU;wBACV,cAAW;kCACZ;;;;;;kCAGD,6LAAC,+IAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS;mCAAM,WAAW;;wBAC1B,WAAU;wBACV,cAAW;kCACZ;;;;;;kCAGD,6LAAC,+IAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS;mCAAM,WAAW;;wBAC1B,WAAU;wBACV,cAAW;kCACZ;;;;;;;;;;;;;;;;;;AAOX;KAnFgB"}},
    {"offset": {"line": 760, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/lib/data/load-concepts.ts"],"sourcesContent":["import { ConceptPoint, convertBJJConceptToConceptPoint } from \"@/data/concepts\";\r\nimport type { BJJConcept } from \"@/types/concepts\";\r\n\r\nexport interface ConceptData {\r\n  concepts: ConceptPoint[];\r\n  categories: Array<{ \r\n    name: string; \r\n    color: string;\r\n    xAxis?: { left: string; right: string };\r\n    yAxis?: { bottom: string; top: string };\r\n  }>;\r\n}\r\n\r\n/**\r\n * Load concepts from the production JSON file\r\n * This works in both client and server components\r\n */\r\nexport async function loadConcepts(): Promise<ConceptData> {\r\n  try {\r\n    // In Next.js, we can import JSON directly or fetch it\r\n    // For static export, we'll use a fetch that works at build time\r\n    const response = await fetch(\"/data/BJJMasterList.json\", {\r\n      cache: \"force-cache\", // Use cached version for static builds\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`Failed to load concepts: ${response.status}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    \r\n    if (!data.skillsMasterList || !Array.isArray(data.skillsMasterList)) {\r\n      throw new Error(\"Invalid data format\");\r\n    }\r\n\r\n    // Convert BJJConcept to ConceptPoint and handle duplicates\r\n    // Use a Set to track seen IDs and ensure uniqueness\r\n    const seenIds = new Set<string>();\r\n    const concepts: ConceptPoint[] = [];\r\n    \r\n    data.skillsMasterList.forEach((concept: BJJConcept, index: number) => {\r\n      // Create a base ID\r\n      const baseId = concept.id || `concept-${index}`;\r\n      let uniqueId = baseId;\r\n      let duplicateCount = 0;\r\n      \r\n      // If we've seen this ID before, append a counter to make it unique\r\n      while (seenIds.has(uniqueId)) {\r\n        duplicateCount++;\r\n        uniqueId = `${baseId}-dup-${duplicateCount}`;\r\n      }\r\n      \r\n      seenIds.add(uniqueId);\r\n      \r\n      concepts.push(convertBJJConceptToConceptPoint({\r\n        id: uniqueId,\r\n        concept: concept.concept,\r\n        description: concept.description || concept.short_description,\r\n        category: concept.category,\r\n        axis_self_opponent: concept.axis_self_opponent,\r\n        axis_mental_physical: concept.axis_mental_physical,\r\n        color: concept.color,\r\n      }));\r\n    });\r\n    \r\n    // Log if we found duplicates\r\n    if (concepts.length !== data.skillsMasterList.length) {\r\n      console.warn(`Found ${data.skillsMasterList.length - concepts.length} duplicate concept IDs`);\r\n    }\r\n\r\n    // Extract unique categories with colors and axis labels\r\n    const categoryMap = new Map<string, { color: string; xAxis?: { left: string; right: string }; yAxis?: { bottom: string; top: string } }>();\r\n    if (data.categories && Array.isArray(data.categories)) {\r\n      data.categories.forEach((cat: any) => {\r\n        if (cat.name && cat.color) {\r\n          categoryMap.set(cat.name, {\r\n            color: cat.color,\r\n            xAxis: cat.xAxis,\r\n            yAxis: cat.yAxis,\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    // Add category colors to concepts\r\n    concepts.forEach((concept) => {\r\n      if (!concept.color && categoryMap.has(concept.category)) {\r\n        concept.color = categoryMap.get(concept.category)!.color;\r\n      }\r\n    });\r\n\r\n    return {\r\n      concepts,\r\n      categories: Array.from(categoryMap.entries()).map(([name, data]) => ({\r\n        name,\r\n        color: data.color,\r\n        xAxis: data.xAxis,\r\n        yAxis: data.yAxis,\r\n      })),\r\n    };\r\n  } catch (error) {\r\n    console.error(\"Failed to load concepts:\", error);\r\n    // Return empty data on error\r\n    return { concepts: [], categories: [] };\r\n  }\r\n}\r\n\r\n/**\r\n * Load concepts synchronously from a static import\r\n * Use this for server components or build-time data\r\n */\r\nexport function loadConceptsSync(): ConceptData {\r\n  // For static builds, we'll need to import the JSON directly\r\n  // This is a fallback - in practice, we'll use the async version\r\n  return { concepts: [], categories: [] };\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;;;;;AAiBO,SAAe;;YAIZ,UAQA,MAQA,SACA,UAiCA,aA6BC;;;;;;;;;;oBA/EU;;wBAAM,MAAM,4BAA4B;4BACvD,OAAO;wBACT;;;oBAFM,WAAW;oBAIjB,IAAI,CAAC,SAAS,EAAE,EAAE;wBAChB,MAAM,IAAI,MAAM,AAAC,4BAA2C,OAAhB,SAAS,MAAM;oBAC7D;oBAEa;;wBAAM,SAAS,IAAI;;;oBAA1B,OAAO;oBAEb,IAAI,CAAC,KAAK,gBAAgB,IAAI,CAAC,MAAM,OAAO,CAAC,KAAK,gBAAgB,GAAG;wBACnE,MAAM,IAAI,MAAM;oBAClB;oBAEA,2DAA2D;oBAC3D,oDAAoD;oBAC9C,UAAU,IAAI;oBACd;oBAEN,KAAK,gBAAgB,CAAC,OAAO,CAAC,SAAC,SAAqB;wBAClD,mBAAmB;wBACnB,IAAM,SAAS,QAAQ,EAAE,IAAI,AAAC,WAAgB,OAAN;wBACxC,IAAI,WAAW;wBACf,IAAI,iBAAiB;wBAErB,mEAAmE;wBACnE,MAAO,QAAQ,GAAG,CAAC,UAAW;4BAC5B;4BACA,WAAW,AAAC,GAAgB,OAAd,QAAO,SAAsB,OAAf;wBAC9B;wBAEA,QAAQ,GAAG,CAAC;wBAEZ,SAAS,IAAI,CAAC,mKAAgC;4BAC5C,IAAI;4BACJ,SAAS,QAAQ,OAAO;4BACxB,aAAa,QAAQ,WAAW,IAAI,QAAQ,iBAAiB;4BAC7D,UAAU,QAAQ,QAAQ;4BAC1B,oBAAoB,QAAQ,kBAAkB;4BAC9C,sBAAsB,QAAQ,oBAAoB;4BAClD,OAAO,QAAQ,KAAK;wBACtB;oBACF;oBAEA,6BAA6B;oBAC7B,IAAI,SAAS,MAAM,KAAK,KAAK,gBAAgB,CAAC,MAAM,EAAE;wBACpD,QAAQ,IAAI,CAAC,AAAC,SAAuD,OAA/C,KAAK,gBAAgB,CAAC,MAAM,GAAG,SAAS,MAAM,EAAC;oBACvE;oBAEA,wDAAwD;oBAClD,cAAc,IAAI;oBACxB,IAAI,KAAK,UAAU,IAAI,MAAM,OAAO,CAAC,KAAK,UAAU,GAAG;wBACrD,KAAK,UAAU,CAAC,OAAO,CAAC,SAAC;4BACvB,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,EAAE;gCACzB,YAAY,GAAG,CAAC,IAAI,IAAI,EAAE;oCACxB,OAAO,IAAI,KAAK;oCAChB,OAAO,IAAI,KAAK;oCAChB,OAAO,IAAI,KAAK;gCAClB;4BACF;wBACF;oBACF;oBAEA,kCAAkC;oBAClC,SAAS,OAAO,CAAC,SAAC;wBAChB,IAAI,CAAC,QAAQ,KAAK,IAAI,YAAY,GAAG,CAAC,QAAQ,QAAQ,GAAG;4BACvD,QAAQ,KAAK,GAAG,YAAY,GAAG,CAAC,QAAQ,QAAQ,EAAG,KAAK;wBAC1D;oBACF;oBAEA;;wBAAO;4BACL,UAAA;4BACA,YAAY,MAAM,IAAI,CAAC,YAAY,OAAO,IAAI,GAAG,CAAC;iOAAE,kBAAM;uCAAW;oCACnE,MAAA;oCACA,OAAO,KAAK,KAAK;oCACjB,OAAO,KAAK,KAAK;oCACjB,OAAO,KAAK,KAAK;gCACnB;;wBACF;;;oBACO;oBACP,QAAQ,KAAK,CAAC,4BAA4B;oBAC1C,6BAA6B;oBAC7B;;wBAAO;4BAAE,QAAQ;4BAAM,UAAU;wBAAK;;;;;;;;IAE1C;;AAMO,SAAS;IACd,4DAA4D;IAC5D,gEAAgE;IAChE,OAAO;QAAE,UAAU,EAAE;QAAE,YAAY,EAAE;IAAC;AACxC"}},
    {"offset": {"line": 905, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/modules/concept-matrix/concept-matrix.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useRef, useEffect, useCallback, useMemo } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { ConceptPoint, CONCEPTS } from \"@/data/concepts\";\r\nimport { usePanZoom } from \"@/lib/matrix/panzoom\";\r\nimport { getViewBox } from \"@/lib/matrix/scales\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { MatrixControls } from \"./matrix-controls\";\r\nimport { loadConcepts, type ConceptData } from \"@/lib/data/load-concepts\";\r\nimport { Filter, X } from \"lucide-react\";\r\n\r\ninterface ConceptMatrixProps {\r\n  concepts?: ConceptPoint[];\r\n  width?: number;\r\n  height?: number;\r\n}\r\n\r\n// Category color mapping - will be populated from actual data\r\nconst CATEGORY_COLORS: Record<string, string> = {\r\n  \"Grappling Primitives\": \"#848a94\",\r\n  \"Tactics\": \"#8A2BE2\",\r\n  \"Strategy\": \"#FF8C00\",\r\n  \"Training\": \"#00CED1\",\r\n  \"Coaching\": \"#6b6d70\",\r\n  \"Memes\": \"#8A2BE2\",\r\n  \"21 Immutable Principles\": \"#FFD700\",\r\n  \"32 Principles\": \"#FFD700\",\r\n  \"Default\": \"#6B7280\",\r\n};\r\n\r\nfunction getCategoryColor(category: string, categoryMap?: Map<string, string>): string {\r\n  if (categoryMap && categoryMap.has(category)) {\r\n    return categoryMap.get(category)!;\r\n  }\r\n  return CATEGORY_COLORS[category] || CATEGORY_COLORS.Default;\r\n}\r\n\r\nexport function ConceptMatrix({\r\n  concepts: initialConcepts,\r\n  width: initialWidth,\r\n  height: initialHeight,\r\n}: ConceptMatrixProps) {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const [dimensions, setDimensions] = useState({ width: 800, height: 600 });\r\n  const [selectedConcept, setSelectedConcept] = useState<ConceptPoint | null>(null);\r\n  const [hoveredConcept, setHoveredConcept] = useState<ConceptPoint | null>(null);\r\n  const [tooltipPosition, setTooltipPosition] = useState({ x: 0, y: 0 });\r\n  const [mounted, setMounted] = useState(false);\r\n  const [tooltipScreenPosition, setTooltipScreenPosition] = useState({ x: 0, y: 0 });\r\n  const [concepts, setConcepts] = useState<ConceptPoint[]>(initialConcepts || CONCEPTS);\r\n  const [loading, setLoading] = useState(!initialConcepts);\r\n  const [conceptData, setConceptData] = useState<ConceptData | null>(null);\r\n  const [selectedCategories, setSelectedCategories] = useState<Set<string>>(new Set());\r\n  const [filterExpanded, setFilterExpanded] = useState(false);\r\n  const isPanning = useRef(false);\r\n  const lastPanPoint = useRef({ x: 0, y: 0 });\r\n\r\n  const panZoom = usePanZoom();\r\n  \r\n  // Build category map for colors and axis labels\r\n  const categoryMap = useMemo(() => {\r\n    const map = new Map<string, string>();\r\n    if (conceptData?.categories) {\r\n      conceptData.categories.forEach(cat => {\r\n        map.set(cat.name, cat.color);\r\n      });\r\n    }\r\n    return map;\r\n  }, [conceptData]);\r\n  \r\n  // Get axis labels from the first category (or selected categories)\r\n  // Note: X axis = mental_physical, Y axis = self_opponent (matching old D3 code)\r\n  const axisLabels = useMemo(() => {\r\n    if (!conceptData?.categories || conceptData.categories.length === 0) {\r\n      return {\r\n        xAxis: { left: \"Mental\", right: \"Physical\" },\r\n        yAxis: { bottom: \"Opponent\", top: \"Self\" },\r\n      };\r\n    }\r\n    // Use the first category's axis labels, or from selected categories\r\n    const category = selectedCategories.size > 0\r\n      ? conceptData.categories.find(cat => selectedCategories.has(cat.name))\r\n      : conceptData.categories[0];\r\n    // Swap the labels to match our axis mapping\r\n    return {\r\n      xAxis: category?.yAxis || { left: \"Mental\", right: \"Physical\" }, // mental_physical maps to X\r\n      yAxis: category?.xAxis || { bottom: \"Opponent\", top: \"Self\" }, // self_opponent maps to Y\r\n    };\r\n  }, [conceptData, selectedCategories]);\r\n  \r\n  // Filter concepts by selected categories\r\n  const filteredConcepts = useMemo(() => {\r\n    if (selectedCategories.size === 0) {\r\n      return concepts;\r\n    }\r\n    return concepts.filter(c => selectedCategories.has(c.category));\r\n  }, [concepts, selectedCategories]);\r\n  \r\n  // Get unique categories from concepts\r\n  const availableCategories = useMemo(() => {\r\n    const cats = new Set<string>();\r\n    concepts.forEach(c => cats.add(c.category));\r\n    return Array.from(cats).sort();\r\n  }, [concepts]);\r\n\r\n  // Load real data if no concepts provided\r\n  useEffect(() => {\r\n    if (!initialConcepts) {\r\n      loadConcepts()\r\n        .then((data) => {\r\n          if (data.concepts.length > 0) {\r\n            console.log(`✅ Loaded ${data.concepts.length} concepts`);\r\n            setConcepts(data.concepts);\r\n            setConceptData(data);\r\n          } else {\r\n            console.warn(\"⚠️ No concepts loaded\");\r\n          }\r\n          setLoading(false);\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Failed to load concepts:\", error);\r\n          setLoading(false);\r\n        });\r\n    } else {\r\n      console.log(`Using ${initialConcepts.length} provided concepts`);\r\n    }\r\n  }, [initialConcepts]);\r\n\r\n  // Update dimensions on mount and resize\r\n  useEffect(() => {\r\n    setMounted(true);\r\n    const updateDimensions = () => {\r\n      if (containerRef.current) {\r\n        const rect = containerRef.current.getBoundingClientRect();\r\n        setDimensions({\r\n          width: initialWidth || rect.width || 800,\r\n          height: initialHeight || Math.max(rect.height, 400) || 600,\r\n        });\r\n      }\r\n    };\r\n\r\n    updateDimensions();\r\n    window.addEventListener(\"resize\", updateDimensions);\r\n    return () => window.removeEventListener(\"resize\", updateDimensions);\r\n  }, [initialWidth, initialHeight]);\r\n\r\n  // Convert screen coordinates to viewBox coordinates (data space)\r\n  // This gives us the point in the untransformed coordinate system\r\n  const screenToDataSpace = useCallback((screenX: number, screenY: number) => {\r\n    // Convert screen pixel to viewBox coordinate (before transform)\r\n    // viewBox is -2 to 2 (width 4), so: viewBoxX = (screenX / width) * 4 - 2\r\n    const viewBoxX = (screenX / dimensions.width) * 4 - 2;\r\n    const viewBoxY = (screenY / dimensions.height) * 4 - 2;\r\n    \r\n    // The transform is: scale(z) translate(tx/z, ty/z)\r\n    // SVG applies right-to-left: translate first, then scale\r\n    // So to reverse: divide by zoom, then subtract translate\r\n    const dataX = (viewBoxX / panZoom.state.zoom) - (panZoom.state.translateX / panZoom.state.zoom);\r\n    const dataY = (viewBoxY / panZoom.state.zoom) - (panZoom.state.translateY / panZoom.state.zoom);\r\n    return { x: dataX, y: dataY };\r\n  }, [dimensions, panZoom.state]);\r\n\r\n  // Convert screen pixel delta to viewBox units for panning\r\n  const screenDeltaToViewBox = useCallback((deltaX: number, deltaY: number) => {\r\n    // Convert screen pixel delta to current viewBox units\r\n    // Current viewBox size = 4 / zoom\r\n    const currentViewBoxSize = 4 / panZoom.state.zoom;\r\n    const viewBoxDeltaX = (deltaX / dimensions.width) * currentViewBoxSize;\r\n    const viewBoxDeltaY = (deltaY / dimensions.height) * currentViewBoxSize;\r\n    return { x: viewBoxDeltaX, y: viewBoxDeltaY };\r\n  }, [dimensions, panZoom.state.zoom]);\r\n\r\n  // Handle double-click zoom\r\n  const handleDoubleClick = (e: React.MouseEvent) => {\r\n    const rect = e.currentTarget.getBoundingClientRect();\r\n    const screenX = e.clientX - rect.left;\r\n    const screenY = e.clientY - rect.top;\r\n    panZoom.zoomBy(0.5, screenX, screenY, dimensions.width, dimensions.height);\r\n  };\r\n  \r\n  // Handle wheel zoom with proper coordinate conversion\r\n  const handleWheel = useCallback((e: React.WheelEvent) => {\r\n    e.preventDefault();\r\n    const delta = e.deltaY > 0 ? -0.1 : 0.1;\r\n    const rect = e.currentTarget.getBoundingClientRect();\r\n    const screenX = e.clientX - rect.left;\r\n    const screenY = e.clientY - rect.top;\r\n    panZoom.zoomBy(delta, screenX, screenY, dimensions.width, dimensions.height);\r\n  }, [panZoom, dimensions]);\r\n\r\n  // Handle concept click/tap\r\n  const handleConceptClick = (concept: ConceptPoint, e: React.MouseEvent | React.TouchEvent) => {\r\n    e.stopPropagation();\r\n    setSelectedConcept(concept);\r\n    \r\n    const rect = containerRef.current?.getBoundingClientRect();\r\n    if (rect) {\r\n      let clientX: number, clientY: number;\r\n      \r\n      if (e.type === \"touchstart\") {\r\n        const touch = (e as React.TouchEvent).touches[0];\r\n        clientX = touch.clientX;\r\n        clientY = touch.clientY;\r\n      } else {\r\n        const mouse = e as React.MouseEvent;\r\n        clientX = mouse.clientX;\r\n        clientY = mouse.clientY;\r\n      }\r\n      \r\n      setTooltipPosition({\r\n        x: clientX - rect.left,\r\n        y: clientY - rect.top,\r\n      });\r\n      \r\n      setTooltipScreenPosition({\r\n        x: clientX,\r\n        y: clientY,\r\n      });\r\n    }\r\n  };\r\n\r\n  // Update tooltip screen position on scroll/resize\r\n  useEffect(() => {\r\n    if (!selectedConcept || !containerRef.current) return;\r\n\r\n    const updatePosition = () => {\r\n      const rect = containerRef.current?.getBoundingClientRect();\r\n      if (rect) {\r\n        setTooltipScreenPosition({\r\n          x: tooltipPosition.x + rect.left,\r\n          y: tooltipPosition.y + rect.top,\r\n        });\r\n      }\r\n    };\r\n\r\n    updatePosition();\r\n    window.addEventListener('scroll', updatePosition, true);\r\n    window.addEventListener('resize', updatePosition);\r\n    \r\n    return () => {\r\n      window.removeEventListener('scroll', updatePosition, true);\r\n      window.removeEventListener('resize', updatePosition);\r\n    };\r\n  }, [selectedConcept, tooltipPosition]);\r\n\r\n  const viewport = {\r\n    width: dimensions.width,\r\n    height: dimensions.height,\r\n    translateX: panZoom.state.translateX,\r\n    translateY: panZoom.state.translateY,\r\n    zoom: panZoom.state.zoom,\r\n  };\r\n\r\n  const viewBox = getViewBox(viewport);\r\n\r\n  // Convert normalized coordinates (-1 to 1) to SVG viewBox coordinates\r\n  // The viewBox is -2 to 2, so we map directly: -1 maps to -2, 0 to 0, 1 to 2\r\n  // These are FIXED coordinates - dots stay at these positions regardless of zoom/pan\r\n  const toSVGX = (normalized: number) => normalized * 2;\r\n  const toSVGY = (normalized: number) => normalized * 2;\r\n\r\n  // Handle quadrant navigation\r\n  const handleQuadrant = (quadrant: 1 | 2 | 3 | 4) => {\r\n    const centerX = dimensions.width / 2;\r\n    const centerY = dimensions.height / 2;\r\n    \r\n    // Quadrant centers in normalized coordinates\r\n    const quadrantCenters = {\r\n      1: { x: 0.5, y: 0.5 },   // Top-right\r\n      2: { x: -0.5, y: 0.5 },  // Top-left\r\n      3: { x: -0.5, y: -0.5 }, // Bottom-left\r\n      4: { x: 0.5, y: -0.5 },  // Bottom-right\r\n    };\r\n    \r\n    const target = quadrantCenters[quadrant];\r\n    // Convert to screen coordinates and center\r\n    const screenX = centerX + target.x * (dimensions.width / 2);\r\n    const screenY = centerY - target.y * (dimensions.height / 2);\r\n    \r\n    // Set zoom and translate to center on quadrant\r\n    panZoom.setZoom(1.5);\r\n    panZoom.panBy(\r\n      centerX - screenX,\r\n      centerY - screenY\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"relative w-full h-full min-h-[400px] bg-bg-raised rounded-lg border border-border-subtle flex items-center justify-center\">\r\n        <p className=\"text-text-muted\">Loading concepts...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      className=\"relative w-full h-full min-h-[400px] bg-bg-raised rounded-lg border border-border-subtle overflow-hidden\"\r\n      onMouseDown={(e) => {\r\n        if (e.button === 0) {\r\n          isPanning.current = true;\r\n          lastPanPoint.current = { x: e.clientX, y: e.clientY };\r\n          e.preventDefault();\r\n        }\r\n      }}\r\n      onMouseMove={(e) => {\r\n        if (isPanning.current) {\r\n          const deltaX = e.clientX - lastPanPoint.current.x;\r\n          const deltaY = e.clientY - lastPanPoint.current.y;\r\n          const viewBoxDelta = screenDeltaToViewBox(deltaX, deltaY);\r\n          panZoom.panBy(viewBoxDelta.x, viewBoxDelta.y);\r\n          lastPanPoint.current = { x: e.clientX, y: e.clientY };\r\n          e.preventDefault();\r\n        }\r\n      }}\r\n      onMouseUp={() => {\r\n        isPanning.current = false;\r\n      }}\r\n      onMouseLeave={() => {\r\n        isPanning.current = false;\r\n      }}\r\n      onTouchStart={panZoom.handlers.onTouchStart}\r\n      onTouchMove={(e) => panZoom.handlers.onTouchMove(e, screenDeltaToViewBox, dimensions.width, dimensions.height)}\r\n      onTouchEnd={panZoom.handlers.onTouchEnd}\r\n      onDoubleClick={handleDoubleClick}\r\n      onWheel={handleWheel}\r\n    >\r\n      <svg\r\n        width={dimensions.width}\r\n        height={dimensions.height}\r\n        viewBox={viewBox}\r\n        className=\"absolute inset-0\"\r\n        style={{ touchAction: \"none\" }}\r\n        preserveAspectRatio=\"xMidYMid meet\"\r\n      >\r\n        <defs>\r\n          <pattern\r\n            id=\"grid\"\r\n            width=\"0.5\"\r\n            height=\"0.5\"\r\n            patternUnits=\"userSpaceOnUse\"\r\n          >\r\n            <path\r\n              d=\"M 0.5 0 L 0 0 0 0.5\"\r\n              fill=\"none\"\r\n              stroke=\"#1C1F26\"\r\n              strokeWidth=\"0.05\"\r\n            />\r\n          </pattern>\r\n        </defs>\r\n        \r\n        {/* Static background grid */}\r\n        <rect x=\"-2\" y=\"-2\" width=\"4\" height=\"4\" fill=\"url(#grid)\" />\r\n\r\n        {/* Center lines (axes) - static */}\r\n        <line\r\n          x1=\"-2\"\r\n          y1=\"0\"\r\n          x2=\"2\"\r\n          y2=\"0\"\r\n          stroke=\"#1C1F26\"\r\n          strokeWidth=\"0.1\"\r\n        />\r\n        <line\r\n          x1=\"0\"\r\n          y1=\"-2\"\r\n          x2=\"0\"\r\n          y2=\"2\"\r\n          stroke=\"#1C1F26\"\r\n          strokeWidth=\"0.1\"\r\n        />\r\n        \r\n        {/* Axis labels */}\r\n        <text\r\n          x=\"-1.9\"\r\n          y=\"0.15\"\r\n          fill=\"#6B7280\"\r\n          fontSize=\"0.3\"\r\n          textAnchor=\"start\"\r\n          className=\"pointer-events-none\"\r\n        >\r\n          {axisLabels.xAxis.left}\r\n        </text>\r\n        <text\r\n          x=\"1.9\"\r\n          y=\"0.15\"\r\n          fill=\"#6B7280\"\r\n          fontSize=\"0.3\"\r\n          textAnchor=\"end\"\r\n          className=\"pointer-events-none\"\r\n        >\r\n          {axisLabels.xAxis.right}\r\n        </text>\r\n        <text\r\n          x=\"0.1\"\r\n          y=\"-1.9\"\r\n          fill=\"#6B7280\"\r\n          fontSize=\"0.3\"\r\n          textAnchor=\"start\"\r\n          className=\"pointer-events-none\"\r\n        >\r\n          {axisLabels.yAxis.top}\r\n        </text>\r\n        <text\r\n          x=\"0.1\"\r\n          y=\"1.9\"\r\n          fill=\"#6B7280\"\r\n          fontSize=\"0.3\"\r\n          textAnchor=\"start\"\r\n          className=\"pointer-events-none\"\r\n        >\r\n          {axisLabels.yAxis.bottom}\r\n        </text>\r\n\r\n        {/* Dots are at FIXED coordinates - NO TRANSFORM APPLIED */}\r\n        {/* Pan/zoom is controlled by the SVG viewBox attribute, not transforms */}\r\n        {/* This ensures dots NEVER move, only the viewport changes */}\r\n\r\n        {/* Concept dots - use filtered concepts */}\r\n        {filteredConcepts.map((concept, index) => {\r\n          const isSelected = selectedConcept?.id === concept.id;\r\n          const isHovered = hoveredConcept?.id === concept.id;\r\n          const color = concept.color || getCategoryColor(concept.category);\r\n          const radius = isSelected ? 0.15 : isHovered ? 0.12 : 0.1; // Scale radius for viewBox\r\n          const svgX = toSVGX(concept.x);\r\n          const svgY = toSVGY(concept.y);\r\n\r\n          return (\r\n            <g key={concept.id}>\r\n              <circle\r\n                cx={svgX}\r\n                cy={svgY}\r\n                r={radius}\r\n                fill={color}\r\n                stroke={isSelected ? \"#fff\" : isHovered ? color : \"transparent\"}\r\n                strokeWidth={isSelected ? 0.05 : 0.03}\r\n                opacity={isSelected ? 1 : isHovered ? 0.9 : 0.7}\r\n                className=\"cursor-pointer transition-all\"\r\n                onClick={(e) => handleConceptClick(concept, e)}\r\n                onMouseEnter={() => setHoveredConcept(concept)}\r\n                onMouseLeave={() => setHoveredConcept(null)}\r\n                onTouchStart={(e) => handleConceptClick(concept, e)}\r\n              />\r\n              {/* Label on hover/select - scale inversely with zoom to keep size consistent */}\r\n              {(isSelected || isHovered) && (\r\n                <text\r\n                  x={svgX}\r\n                  y={svgY - radius - 0.2}\r\n                  textAnchor=\"middle\"\r\n                  fill=\"#E5E7EB\"\r\n                  fontSize={`${0.3 / panZoom.state.zoom}`}\r\n                  fontWeight=\"500\"\r\n                  className=\"pointer-events-none\"\r\n                >\r\n                  {concept.label}\r\n                </text>\r\n              )}\r\n            </g>\r\n          );\r\n        })}\r\n      </svg>\r\n\r\n      {/* Category Filter - Horizontal at top */}\r\n      <div className=\"absolute top-0 left-0 right-0 z-20 bg-bg-raised border-b border-border-subtle\">\r\n        <div className=\"px-4 py-2 flex items-center gap-3\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Filter className=\"w-4 h-4 text-text-muted\" />\r\n            <span className=\"text-sm font-semibold\">Categories</span>\r\n          </div>\r\n          \r\n          <Button\r\n            variant={selectedCategories.size === 0 ? \"default\" : \"outline\"}\r\n            size=\"sm\"\r\n            onClick={() => setSelectedCategories(new Set())}\r\n            className=\"h-7 px-3 text-xs\"\r\n          >\r\n            All\r\n          </Button>\r\n          \r\n          {filterExpanded && (\r\n            <>\r\n              <div className=\"flex-1 flex flex-wrap gap-2 max-h-32 overflow-y-auto\">\r\n                {availableCategories.map((category) => {\r\n                  const isSelected = selectedCategories.has(category);\r\n                  const color = getCategoryColor(category, categoryMap);\r\n                  return (\r\n                    <button\r\n                      key={category}\r\n                      onClick={() => {\r\n                        const newSet = new Set(selectedCategories);\r\n                        if (isSelected) {\r\n                          newSet.delete(category);\r\n                        } else {\r\n                          newSet.add(category);\r\n                        }\r\n                        setSelectedCategories(newSet);\r\n                      }}\r\n                      className={cn(\r\n                        \"px-2 py-1 rounded text-xs font-medium transition-all\",\r\n                        isSelected\r\n                          ? \"bg-accent text-accent-foreground border border-accent\"\r\n                          : \"bg-bg border border-border-subtle text-text-secondary hover:border-border hover:bg-bg-hover\"\r\n                      )}\r\n                      style={isSelected ? { borderColor: color } : {}}\r\n                    >\r\n                      {category}\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n              {selectedCategories.size > 0 && (\r\n                <span className=\"text-xs text-text-muted whitespace-nowrap\">\r\n                  {filteredConcepts.length} of {concepts.length}\r\n                </span>\r\n              )}\r\n            </>\r\n          )}\r\n          \r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={() => setFilterExpanded(!filterExpanded)}\r\n            className=\"h-7 px-2\"\r\n          >\r\n            {filterExpanded ? <X className=\"w-4 h-4\" /> : <Filter className=\"w-4 h-4\" />}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Controls - positioned to avoid bottom-right quadrant */}\r\n      <div className=\"absolute bottom-4 left-4 z-20\">\r\n        <MatrixControls\r\n          onZoomIn={panZoom.zoomIn}\r\n          onZoomOut={panZoom.zoomOut}\r\n          onReset={panZoom.reset}\r\n          onQuadrant={handleQuadrant}\r\n        />\r\n      </div>\r\n\r\n      {/* Tooltip/Card for selected concept - rendered via portal, centered on screen */}\r\n      {selectedConcept && mounted && typeof document !== 'undefined' && createPortal(\r\n        <div\r\n          className=\"fixed z-[9999] pointer-events-auto\"\r\n          style={{\r\n            left: '50%',\r\n            top: '50%',\r\n            transform: 'translate(-50%, -50%)',\r\n            maxWidth: '90vw',\r\n            maxHeight: '90vh',\r\n          }}\r\n        >\r\n          <Card className=\"bg-bg-raised border-border-subtle p-4 min-w-[280px] max-w-[400px] shadow-2xl\">\r\n            <div className=\"space-y-3\">\r\n              <div className=\"flex items-center justify-between gap-2\">\r\n                <h4 className=\"font-semibold text-base\">{selectedConcept.label}</h4>\r\n                <Badge variant=\"outline\" className=\"border-border-subtle text-xs\">\r\n                  {selectedConcept.category}\r\n                </Badge>\r\n              </div>\r\n              {selectedConcept.description && (\r\n                <div className=\"max-h-[60vh] overflow-y-auto\">\r\n                  <p className=\"text-sm text-text-primary whitespace-pre-wrap break-words leading-relaxed\">\r\n                    {selectedConcept.description}\r\n                  </p>\r\n                </div>\r\n              )}\r\n              <div className=\"flex justify-end pt-2 border-t border-border-subtle\">\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => setSelectedConcept(null)}\r\n                  className=\"text-xs\"\r\n                >\r\n                  Close\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </Card>\r\n        </div>,\r\n        document.body\r\n      )}\r\n      \r\n      {/* Backdrop overlay */}\r\n      {selectedConcept && mounted && typeof document !== 'undefined' && createPortal(\r\n        <div\r\n          className=\"fixed inset-0 z-[9998] bg-black/50 backdrop-blur-sm\"\r\n          onClick={() => setSelectedConcept(null)}\r\n        />,\r\n        document.body\r\n      )}\r\n\r\n      {/* Click outside to deselect */}\r\n      {selectedConcept && (\r\n        <div\r\n          className=\"absolute inset-0 z-0\"\r\n          onClick={() => setSelectedConcept(null)}\r\n          onTouchStart={() => setSelectedConcept(null)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;AAbA;;;;;;;;;;;;;AAqBA,8DAA8D;AAC9D,IAAM,kBAA0C;IAC9C,wBAAwB;IACxB,SAAW;IACX,UAAY;IACZ,UAAY;IACZ,UAAY;IACZ,OAAS;IACT,2BAA2B;IAC3B,iBAAiB;IACjB,SAAW;AACb;AAEA,SAAS,iBAAiB,QAAgB,EAAE,WAAiC;IAC3E,IAAI,eAAe,YAAY,GAAG,CAAC,WAAW;QAC5C,OAAO,YAAY,GAAG,CAAC;IACzB;IACA,OAAO,eAAe,CAAC,SAAS,IAAI,gBAAgB,OAAO;AAC7D;AAEO,SAAS,cAAc,KAIT;;QAHnB,AAAU,kBADkB,MAC5B,UACA,AAAO,eAFqB,MAE5B,OACA,AAAQ,gBAHoB,MAG5B;;IAEA,IAAM,eAAe,IAAA,uKAAM,EAAiB;IAC5C,IAAoC,qLAAA,IAAA,yKAAQ,EAAC;QAAE,OAAO;QAAK,QAAQ;IAAI,QAAhE,aAA6B,cAAjB,gBAAiB;IACpC,IAA8C,sLAAA,IAAA,yKAAQ,EAAsB,WAArE,kBAAuC,eAAtB,qBAAsB;IAC9C,IAA4C,sLAAA,IAAA,yKAAQ,EAAsB,WAAnE,iBAAqC,eAArB,oBAAqB;IAC5C,IAA8C,sLAAA,IAAA,yKAAQ,EAAC;QAAE,GAAG;QAAG,GAAG;IAAE,QAA7D,kBAAuC,eAAtB,qBAAsB;IAC9C,IAA8B,sLAAA,IAAA,yKAAQ,EAAC,YAAhC,UAAuB,eAAd,aAAc;IAC9B,IAA0D,sLAAA,IAAA,yKAAQ,EAAC;QAAE,GAAG;QAAG,GAAG;IAAE,QAAzE,wBAAmD,eAA5B,2BAA4B;IAC1D,IAAgC,sLAAA,IAAA,yKAAQ,EAAiB,mBAAmB,sIAAQ,OAA7E,WAAyB,eAAf,cAAe;IAChC,IAA8B,sLAAA,IAAA,yKAAQ,EAAC,CAAC,sBAAjC,UAAuB,eAAd,aAAc;IAC9B,IAAsC,sLAAA,IAAA,yKAAQ,EAAqB,WAA5D,cAA+B,eAAlB,iBAAkB;IACtC,IAAoD,sLAAA,IAAA,yKAAQ,EAAc,IAAI,YAAvE,qBAA6C,eAAzB,wBAAyB;IACpD,IAA4C,uLAAA,IAAA,yKAAQ,EAAC,YAA9C,iBAAqC,gBAArB,oBAAqB;IAC5C,IAAM,YAAY,IAAA,uKAAM,EAAC;IACzB,IAAM,eAAe,IAAA,uKAAM,EAAC;QAAE,GAAG;QAAG,GAAG;IAAE;IAEzC,IAAM,UAAU,IAAA,gJAAU;IAE1B,gDAAgD;IAChD,IAAM,cAAc,IAAA,wKAAO;8CAAC;YAC1B,IAAM,MAAM,IAAI;YAChB,IAAI,wBAAA,kCAAA,YAAa,UAAU,EAAE;gBAC3B,YAAY,UAAU,CAAC,OAAO;0DAAC,SAAA;wBAC7B,IAAI,GAAG,CAAC,IAAI,IAAI,EAAE,IAAI,KAAK;oBAC7B;;YACF;YACA,OAAO;QACT;6CAAG;QAAC;KAAY;IAEhB,mEAAmE;IACnE,gFAAgF;IAChF,IAAM,aAAa,IAAA,wKAAO;6CAAC;YACzB,IAAI,EAAC,wBAAA,kCAAA,YAAa,UAAU,KAAI,YAAY,UAAU,CAAC,MAAM,KAAK,GAAG;gBACnE,OAAO;oBACL,OAAO;wBAAE,MAAM;wBAAU,OAAO;oBAAW;oBAC3C,OAAO;wBAAE,QAAQ;wBAAY,KAAK;oBAAO;gBAC3C;YACF;YACA,oEAAoE;YACpE,IAAM,WAAW,mBAAmB,IAAI,GAAG,IACvC,YAAY,UAAU,CAAC,IAAI;qDAAC,SAAA;2BAAO,mBAAmB,GAAG,CAAC,IAAI,IAAI;;sDAClE,YAAY,UAAU,CAAC,EAAE;YAC7B,4CAA4C;YAC5C,OAAO;gBACL,OAAO,CAAA,qBAAA,+BAAA,SAAU,KAAK,KAAI;oBAAE,MAAM;oBAAU,OAAO;gBAAW;gBAC9D,OAAO,CAAA,qBAAA,+BAAA,SAAU,KAAK,KAAI;oBAAE,QAAQ;oBAAY,KAAK;gBAAO;YAC9D;QACF;4CAAG;QAAC;QAAa;KAAmB;IAEpC,yCAAyC;IACzC,IAAM,mBAAmB,IAAA,wKAAO;mDAAC;YAC/B,IAAI,mBAAmB,IAAI,KAAK,GAAG;gBACjC,OAAO;YACT;YACA,OAAO,SAAS,MAAM;2DAAC,SAAA;2BAAK,mBAAmB,GAAG,CAAC,EAAE,QAAQ;;;QAC/D;kDAAG;QAAC;QAAU;KAAmB;IAEjC,sCAAsC;IACtC,IAAM,sBAAsB,IAAA,wKAAO;sDAAC;YAClC,IAAM,OAAO,IAAI;YACjB,SAAS,OAAO;8DAAC,SAAA;2BAAK,KAAK,GAAG,CAAC,EAAE,QAAQ;;;YACzC,OAAO,MAAM,IAAI,CAAC,MAAM,IAAI;QAC9B;qDAAG;QAAC;KAAS;IAEb,yCAAyC;IACzC,IAAA,0KAAS;mCAAC;YACR,IAAI,CAAC,iBAAiB;gBACpB,IAAA,yJAAY,IACT,IAAI;+CAAC,SAAC;wBACL,IAAI,KAAK,QAAQ,CAAC,MAAM,GAAG,GAAG;4BAC5B,QAAQ,GAAG,CAAC,AAAC,YAAgC,OAArB,KAAK,QAAQ,CAAC,MAAM,EAAC;4BAC7C,YAAY,KAAK,QAAQ;4BACzB,eAAe;wBACjB,OAAO;4BACL,QAAQ,IAAI,CAAC;wBACf;wBACA,WAAW;oBACb;6CACC,CAAA,QAAK;+CAAC,SAAC;wBACN,QAAQ,KAAK,CAAC,4BAA4B;wBAC1C,WAAW;oBACb;;YACJ,OAAO;gBACL,QAAQ,GAAG,CAAC,AAAC,SAA+B,OAAvB,gBAAgB,MAAM,EAAC;YAC9C;QACF;kCAAG;QAAC;KAAgB;IAEpB,wCAAwC;IACxC,IAAA,0KAAS;mCAAC;YACR,WAAW;YACX,IAAM;4DAAmB;oBACvB,IAAI,aAAa,OAAO,EAAE;wBACxB,IAAM,OAAO,aAAa,OAAO,CAAC,qBAAqB;wBACvD,cAAc;4BACZ,OAAO,gBAAgB,KAAK,KAAK,IAAI;4BACrC,QAAQ,iBAAiB,KAAK,GAAG,CAAC,KAAK,MAAM,EAAE,QAAQ;wBACzD;oBACF;gBACF;;YAEA;YACA,OAAO,gBAAgB,CAAC,UAAU;YAClC;2CAAO;2BAAM,OAAO,mBAAmB,CAAC,UAAU;;;QACpD;kCAAG;QAAC;QAAc;KAAc;IAEhC,iEAAiE;IACjE,iEAAiE;IACjE,IAAM,oBAAoB,IAAA,4KAAW;wDAAC,SAAC,SAAiB;YACtD,gEAAgE;YAChE,yEAAyE;YACzE,IAAM,WAAW,AAAC,UAAU,WAAW,KAAK,GAAI,IAAI;YACpD,IAAM,WAAW,AAAC,UAAU,WAAW,MAAM,GAAI,IAAI;YAErD,mDAAmD;YACnD,yDAAyD;YACzD,yDAAyD;YACzD,IAAM,QAAQ,AAAC,WAAW,QAAQ,KAAK,CAAC,IAAI,GAAK,QAAQ,KAAK,CAAC,UAAU,GAAG,QAAQ,KAAK,CAAC,IAAI;YAC9F,IAAM,QAAQ,AAAC,WAAW,QAAQ,KAAK,CAAC,IAAI,GAAK,QAAQ,KAAK,CAAC,UAAU,GAAG,QAAQ,KAAK,CAAC,IAAI;YAC9F,OAAO;gBAAE,GAAG;gBAAO,GAAG;YAAM;QAC9B;uDAAG;QAAC;QAAY,QAAQ,KAAK;KAAC;IAE9B,0DAA0D;IAC1D,IAAM,uBAAuB,IAAA,4KAAW;2DAAC,SAAC,QAAgB;YACxD,sDAAsD;YACtD,kCAAkC;YAClC,IAAM,qBAAqB,IAAI,QAAQ,KAAK,CAAC,IAAI;YACjD,IAAM,gBAAgB,AAAC,SAAS,WAAW,KAAK,GAAI;YACpD,IAAM,gBAAgB,AAAC,SAAS,WAAW,MAAM,GAAI;YACrD,OAAO;gBAAE,GAAG;gBAAe,GAAG;YAAc;QAC9C;0DAAG;QAAC;QAAY,QAAQ,KAAK,CAAC,IAAI;KAAC;IAEnC,2BAA2B;IAC3B,IAAM,oBAAoB,SAAC;QACzB,IAAM,OAAO,EAAE,aAAa,CAAC,qBAAqB;QAClD,IAAM,UAAU,EAAE,OAAO,GAAG,KAAK,IAAI;QACrC,IAAM,UAAU,EAAE,OAAO,GAAG,KAAK,GAAG;QACpC,QAAQ,MAAM,CAAC,KAAK,SAAS,SAAS,WAAW,KAAK,EAAE,WAAW,MAAM;IAC3E;IAEA,sDAAsD;IACtD,IAAM,cAAc,IAAA,4KAAW;kDAAC,SAAC;YAC/B,EAAE,cAAc;YAChB,IAAM,QAAQ,EAAE,MAAM,GAAG,IAAI,CAAC,MAAM;YACpC,IAAM,OAAO,EAAE,aAAa,CAAC,qBAAqB;YAClD,IAAM,UAAU,EAAE,OAAO,GAAG,KAAK,IAAI;YACrC,IAAM,UAAU,EAAE,OAAO,GAAG,KAAK,GAAG;YACpC,QAAQ,MAAM,CAAC,OAAO,SAAS,SAAS,WAAW,KAAK,EAAE,WAAW,MAAM;QAC7E;iDAAG;QAAC;QAAS;KAAW;IAExB,2BAA2B;IAC3B,IAAM,qBAAqB,SAAC,SAAuB;YAIpC;QAHb,EAAE,eAAe;QACjB,mBAAmB;QAEnB,IAAM,QAAO,wBAAA,aAAa,OAAO,cAApB,4CAAA,sBAAsB,qBAAqB;QACxD,IAAI,MAAM;YACR,IAAI,SAAiB;YAErB,IAAI,EAAE,IAAI,KAAK,cAAc;gBAC3B,IAAM,QAAQ,AAAC,EAAuB,OAAO,CAAC,EAAE;gBAChD,UAAU,MAAM,OAAO;gBACvB,UAAU,MAAM,OAAO;YACzB,OAAO;gBACL,IAAM,QAAQ;gBACd,UAAU,MAAM,OAAO;gBACvB,UAAU,MAAM,OAAO;YACzB;YAEA,mBAAmB;gBACjB,GAAG,UAAU,KAAK,IAAI;gBACtB,GAAG,UAAU,KAAK,GAAG;YACvB;YAEA,yBAAyB;gBACvB,GAAG;gBACH,GAAG;YACL;QACF;IACF;IAEA,kDAAkD;IAClD,IAAA,0KAAS;mCAAC;YACR,IAAI,CAAC,mBAAmB,CAAC,aAAa,OAAO,EAAE;YAE/C,IAAM;0DAAiB;wBACR;oBAAb,IAAM,QAAO,wBAAA,aAAa,OAAO,cAApB,4CAAA,sBAAsB,qBAAqB;oBACxD,IAAI,MAAM;wBACR,yBAAyB;4BACvB,GAAG,gBAAgB,CAAC,GAAG,KAAK,IAAI;4BAChC,GAAG,gBAAgB,CAAC,GAAG,KAAK,GAAG;wBACjC;oBACF;gBACF;;YAEA;YACA,OAAO,gBAAgB,CAAC,UAAU,gBAAgB;YAClD,OAAO,gBAAgB,CAAC,UAAU;YAElC;2CAAO;oBACL,OAAO,mBAAmB,CAAC,UAAU,gBAAgB;oBACrD,OAAO,mBAAmB,CAAC,UAAU;gBACvC;;QACF;kCAAG;QAAC;QAAiB;KAAgB;IAErC,IAAM,WAAW;QACf,OAAO,WAAW,KAAK;QACvB,QAAQ,WAAW,MAAM;QACzB,YAAY,QAAQ,KAAK,CAAC,UAAU;QACpC,YAAY,QAAQ,KAAK,CAAC,UAAU;QACpC,MAAM,QAAQ,KAAK,CAAC,IAAI;IAC1B;IAEA,IAAM,UAAU,IAAA,+IAAU,EAAC;IAE3B,sEAAsE;IACtE,4EAA4E;IAC5E,oFAAoF;IACpF,IAAM,SAAS,SAAC;eAAuB,aAAa;;IACpD,IAAM,SAAS,SAAC;eAAuB,aAAa;;IAEpD,6BAA6B;IAC7B,IAAM,iBAAiB,SAAC;QACtB,IAAM,UAAU,WAAW,KAAK,GAAG;QACnC,IAAM,UAAU,WAAW,MAAM,GAAG;QAEpC,6CAA6C;QAC7C,IAAM,kBAAkB;YACtB,GAAG;gBAAE,GAAG;gBAAK,GAAG;YAAI;YACpB,GAAG;gBAAE,GAAG,CAAC;gBAAK,GAAG;YAAI;YACrB,GAAG;gBAAE,GAAG,CAAC;gBAAK,GAAG,CAAC;YAAI;YACtB,GAAG;gBAAE,GAAG;gBAAK,GAAG,CAAC;YAAI;QACvB;QAEA,IAAM,SAAS,eAAe,CAAC,SAAS;QACxC,2CAA2C;QAC3C,IAAM,UAAU,UAAU,OAAO,CAAC,GAAG,CAAC,WAAW,KAAK,GAAG,CAAC;QAC1D,IAAM,UAAU,UAAU,OAAO,CAAC,GAAG,CAAC,WAAW,MAAM,GAAG,CAAC;QAE3D,+CAA+C;QAC/C,QAAQ,OAAO,CAAC;QAChB,QAAQ,KAAK,CACX,UAAU,SACV,UAAU;IAEd;IAEA,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAE,WAAU;0BAAkB;;;;;;;;;;;IAGrC;IAEA,qBACE,6LAAC;QACC,KAAK;QACL,WAAU;QACV,aAAa,SAAC;YACZ,IAAI,EAAE,MAAM,KAAK,GAAG;gBAClB,UAAU,OAAO,GAAG;gBACpB,aAAa,OAAO,GAAG;oBAAE,GAAG,EAAE,OAAO;oBAAE,GAAG,EAAE,OAAO;gBAAC;gBACpD,EAAE,cAAc;YAClB;QACF;QACA,aAAa,SAAC;YACZ,IAAI,UAAU,OAAO,EAAE;gBACrB,IAAM,SAAS,EAAE,OAAO,GAAG,aAAa,OAAO,CAAC,CAAC;gBACjD,IAAM,SAAS,EAAE,OAAO,GAAG,aAAa,OAAO,CAAC,CAAC;gBACjD,IAAM,eAAe,qBAAqB,QAAQ;gBAClD,QAAQ,KAAK,CAAC,aAAa,CAAC,EAAE,aAAa,CAAC;gBAC5C,aAAa,OAAO,GAAG;oBAAE,GAAG,EAAE,OAAO;oBAAE,GAAG,EAAE,OAAO;gBAAC;gBACpD,EAAE,cAAc;YAClB;QACF;QACA,WAAW;YACT,UAAU,OAAO,GAAG;QACtB;QACA,cAAc;YACZ,UAAU,OAAO,GAAG;QACtB;QACA,cAAc,QAAQ,QAAQ,CAAC,YAAY;QAC3C,aAAa,SAAC;mBAAM,QAAQ,QAAQ,CAAC,WAAW,CAAC,GAAG,sBAAsB,WAAW,KAAK,EAAE,WAAW,MAAM;;QAC7G,YAAY,QAAQ,QAAQ,CAAC,UAAU;QACvC,eAAe;QACf,SAAS;;0BAET,6LAAC;gBACC,OAAO,WAAW,KAAK;gBACvB,QAAQ,WAAW,MAAM;gBACzB,SAAS;gBACT,WAAU;gBACV,OAAO;oBAAE,aAAa;gBAAO;gBAC7B,qBAAoB;;kCAEpB,6LAAC;kCACC,cAAA,6LAAC;4BACC,IAAG;4BACH,OAAM;4BACN,QAAO;4BACP,cAAa;sCAEb,cAAA,6LAAC;gCACC,GAAE;gCACF,MAAK;gCACL,QAAO;gCACP,aAAY;;;;;;;;;;;;;;;;kCAMlB,6LAAC;wBAAK,GAAE;wBAAK,GAAE;wBAAK,OAAM;wBAAI,QAAO;wBAAI,MAAK;;;;;;kCAG9C,6LAAC;wBACC,IAAG;wBACH,IAAG;wBACH,IAAG;wBACH,IAAG;wBACH,QAAO;wBACP,aAAY;;;;;;kCAEd,6LAAC;wBACC,IAAG;wBACH,IAAG;wBACH,IAAG;wBACH,IAAG;wBACH,QAAO;wBACP,aAAY;;;;;;kCAId,6LAAC;wBACC,GAAE;wBACF,GAAE;wBACF,MAAK;wBACL,UAAS;wBACT,YAAW;wBACX,WAAU;kCAET,WAAW,KAAK,CAAC,IAAI;;;;;;kCAExB,6LAAC;wBACC,GAAE;wBACF,GAAE;wBACF,MAAK;wBACL,UAAS;wBACT,YAAW;wBACX,WAAU;kCAET,WAAW,KAAK,CAAC,KAAK;;;;;;kCAEzB,6LAAC;wBACC,GAAE;wBACF,GAAE;wBACF,MAAK;wBACL,UAAS;wBACT,YAAW;wBACX,WAAU;kCAET,WAAW,KAAK,CAAC,GAAG;;;;;;kCAEvB,6LAAC;wBACC,GAAE;wBACF,GAAE;wBACF,MAAK;wBACL,UAAS;wBACT,YAAW;wBACX,WAAU;kCAET,WAAW,KAAK,CAAC,MAAM;;;;;;oBAQzB,iBAAiB,GAAG,CAAC,SAAC,SAAS;wBAC9B,IAAM,aAAa,CAAA,4BAAA,sCAAA,gBAAiB,EAAE,MAAK,QAAQ,EAAE;wBACrD,IAAM,YAAY,CAAA,2BAAA,qCAAA,eAAgB,EAAE,MAAK,QAAQ,EAAE;wBACnD,IAAM,QAAQ,QAAQ,KAAK,IAAI,iBAAiB,QAAQ,QAAQ;wBAChE,IAAM,SAAS,aAAa,OAAO,YAAY,OAAO,KAAK,2BAA2B;wBACtF,IAAM,OAAO,OAAO,QAAQ,CAAC;wBAC7B,IAAM,OAAO,OAAO,QAAQ,CAAC;wBAE7B,qBACE,6LAAC;;8CACC,6LAAC;oCACC,IAAI;oCACJ,IAAI;oCACJ,GAAG;oCACH,MAAM;oCACN,QAAQ,aAAa,SAAS,YAAY,QAAQ;oCAClD,aAAa,aAAa,OAAO;oCACjC,SAAS,aAAa,IAAI,YAAY,MAAM;oCAC5C,WAAU;oCACV,SAAS,SAAC;+CAAM,mBAAmB,SAAS;;oCAC5C,cAAc;+CAAM,kBAAkB;;oCACtC,cAAc;+CAAM,kBAAkB;;oCACtC,cAAc,SAAC;+CAAM,mBAAmB,SAAS;;;;;;;gCAGlD,CAAC,cAAc,SAAS,mBACvB,6LAAC;oCACC,GAAG;oCACH,GAAG,OAAO,SAAS;oCACnB,YAAW;oCACX,MAAK;oCACL,UAAU,AAAC,GAA2B,OAAzB,MAAM,QAAQ,KAAK,CAAC,IAAI;oCACrC,YAAW;oCACX,WAAU;8CAET,QAAQ,KAAK;;;;;;;2BA1BZ,QAAQ,EAAE;;;;;oBA+BtB;;;;;;;0BAIF,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,mNAAM;oCAAC,WAAU;;;;;;8CAClB,6LAAC;oCAAK,WAAU;8CAAwB;;;;;;;;;;;;sCAG1C,6LAAC,+IAAM;4BACL,SAAS,mBAAmB,IAAI,KAAK,IAAI,YAAY;4BACrD,MAAK;4BACL,SAAS;uCAAM,sBAAsB,IAAI;;4BACzC,WAAU;sCACX;;;;;;wBAIA,gCACC;;8CACE,6LAAC;oCAAI,WAAU;8CACZ,oBAAoB,GAAG,CAAC,SAAC;wCACxB,IAAM,aAAa,mBAAmB,GAAG,CAAC;wCAC1C,IAAM,QAAQ,iBAAiB,UAAU;wCACzC,qBACE,6LAAC;4CAEC,SAAS;gDACP,IAAM,SAAS,IAAI,IAAI;gDACvB,IAAI,YAAY;oDACd,MAAO,CAAA,SAAM,CAAC;gDAChB,OAAO;oDACL,OAAO,GAAG,CAAC;gDACb;gDACA,sBAAsB;4CACxB;4CACA,WAAW,IAAA,4HAAE,EACX,wDACA,aACI,0DACA;4CAEN,OAAO,aAAa;gDAAE,aAAa;4CAAM,IAAI,CAAC;sDAE7C;2CAlBI;;;;;oCAqBX;;;;;;gCAED,mBAAmB,IAAI,GAAG,mBACzB,6LAAC;oCAAK,WAAU;;wCACb,iBAAiB,MAAM;wCAAC;wCAAK,SAAS,MAAM;;;;;;;;;sCAMrD,6LAAC,+IAAM;4BACL,SAAQ;4BACR,MAAK;4BACL,SAAS;uCAAM,kBAAkB,CAAC;;4BAClC,WAAU;sCAET,+BAAiB,6LAAC,oMAAC;gCAAC,WAAU;;;;;qDAAe,6LAAC,mNAAM;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;0BAMtE,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,6LAAc;oBACb,UAAU,QAAQ,MAAM;oBACxB,WAAW,QAAQ,OAAO;oBAC1B,SAAS,QAAQ,KAAK;oBACtB,YAAY;;;;;;;;;;;YAKf,mBAAmB,WAAW,OAAO,aAAa,6BAAe,IAAA,oLAAY,gBAC5E,6LAAC;gBACC,WAAU;gBACV,OAAO;oBACL,MAAM;oBACN,KAAK;oBACL,WAAW;oBACX,UAAU;oBACV,WAAW;gBACb;0BAEA,cAAA,6LAAC,2IAAI;oBAAC,WAAU;8BACd,cAAA,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;kDAA2B,gBAAgB,KAAK;;;;;;kDAC9D,6LAAC,6IAAK;wCAAC,SAAQ;wCAAU,WAAU;kDAChC,gBAAgB,QAAQ;;;;;;;;;;;;4BAG5B,gBAAgB,WAAW,kBAC1B,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAE,WAAU;8CACV,gBAAgB,WAAW;;;;;;;;;;;0CAIlC,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,+IAAM;oCACL,SAAQ;oCACR,MAAK;oCACL,SAAS;+CAAM,mBAAmB;;oCAClC,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;sBAOT,SAAS,IAAI;YAId,mBAAmB,WAAW,OAAO,aAAa,6BAAe,IAAA,oLAAY,gBAC5E,6LAAC;gBACC,WAAU;gBACV,SAAS;2BAAM,mBAAmB;;;;;;sBAEpC,SAAS,IAAI;YAId,iCACC,6LAAC;gBACC,WAAU;gBACV,SAAS;2BAAM,mBAAmB;;gBAClC,cAAc;2BAAM,mBAAmB;;;;;;;;;;;;;AAKjD;GArjBgB;;QAoBE,gJAAU;;;KApBZ"}},
    {"offset": {"line": 1815, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/modules/games/centroid-game.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { X, Target, Check, ArrowForward, Clock } from 'lucide-react';\r\n\r\ntype Point = { x: number; y: number };\r\n\r\nconst GRID_SIZE = 17; // cells per axis\r\nconst CELL_SIZE = 20; // px per cell → 340px board\r\nconst BOARD_PX = GRID_SIZE * CELL_SIZE; // 340\r\nconst MAX_ROUNDS = 10;\r\nconst TIMER_PENALTY_THRESHOLD = 3; // seconds\r\n\r\nfunction chebyshev(a: Point, b: Point): number {\r\n  return Math.max(Math.abs(a.x - b.x), Math.abs(a.y - b.y));\r\n}\r\n\r\nfunction nearestInt(p: Point): Point {\r\n  return { x: Math.round(p.x), y: Math.round(p.y) };\r\n}\r\n\r\nfunction centroid(dots: Point[]): Point {\r\n  if (dots.length === 0) return { x: 0, y: 0 };\r\n  const sx = dots.reduce((s, d) => s + d.x, 0);\r\n  const sy = dots.reduce((s, d) => s + d.y, 0);\r\n  return { x: sx / dots.length, y: sy / dots.length };\r\n}\r\n\r\nfunction useInterval(callback: () => void, delayMs: number | null) {\r\n  const savedRef = useRef(callback);\r\n  useEffect(() => { savedRef.current = callback; }, [callback]);\r\n  useEffect(() => {\r\n    if (delayMs == null) return;\r\n    const id = setInterval(() => savedRef.current(), delayMs);\r\n    return () => clearInterval(id);\r\n  }, [delayMs]);\r\n}\r\n\r\ninterface CentroidGameProps {\r\n  onClose?: () => void;\r\n}\r\n\r\nexport const CentroidGame: React.FC<CentroidGameProps> = ({ onClose }) => {\r\n  const [round, setRound] = useState(0); // 0..MAX_ROUNDS\r\n  const [dots, setDots] = useState<Point[]>([]);\r\n  const [actual, setActual] = useState<Point | null>(null);\r\n  const [guess, setGuess] = useState<Point | null>(null);\r\n  const [showResult, setShowResult] = useState(false);\r\n  const [totalScore, setTotalScore] = useState(0);\r\n  const [currentRoundScore, setCurrentRoundScore] = useState<number | null>(null);\r\n  const [timer, setTimer] = useState(0);\r\n  const [penalty, setPenalty] = useState(0);\r\n  const [phase, setPhase] = useState<'idle'|'count'|'go'|'playing'|'downtime'|'recap'>('idle');\r\n  const [pointsFlash, setPointsFlash] = useState<string | null>(null);\r\n  const [roundHistory, setRoundHistory] = useState<{ round: number; score: number; timer: number; perfect: boolean }[]>([]);\r\n  const [recapMessage, setRecapMessage] = useState<string | null>(null);\r\n  const validatedRef = useRef(false);\r\n  const timeoutsRef = useRef<number[]>([]);\r\n\r\n  const difficulty = useMemo(() => {\r\n    if (round <= 3) return { name: 'EASY', min: 3, max: 8 };\r\n    if (round <= 7) return { name: 'MEDIUM', min: 5, max: 10 };\r\n    return { name: 'HARD', min: 7, max: 12 };\r\n  }, [round]);\r\n\r\n  const startRound = useCallback((nextRound: number) => {\r\n    // generate dots\r\n    const n = Math.floor(Math.random() * (difficulty.max - difficulty.min + 1)) + difficulty.min;\r\n    const used = new Set<string>();\r\n    const nd: Point[] = [];\r\n    while (nd.length < n) {\r\n      const x = Math.floor(Math.random() * GRID_SIZE);\r\n      const y = Math.floor(Math.random() * GRID_SIZE);\r\n      const key = `${x},${y}`;\r\n      if (!used.has(key)) { used.add(key); nd.push({ x, y }); }\r\n    }\r\n    const c = centroid(nd);\r\n    setDots(nd);\r\n    setActual(c);\r\n    setGuess(null);\r\n    setShowResult(false);\r\n    setCurrentRoundScore(null);\r\n    setTimer(0);\r\n    setPenalty(0);\r\n    setRound(nextRound);\r\n    setPhase('playing');\r\n    validatedRef.current = false;\r\n  }, [difficulty]);\r\n\r\n  const clearAllTimeouts = () => {\r\n    timeoutsRef.current.forEach(id => clearTimeout(id));\r\n    timeoutsRef.current = [];\r\n  };\r\n\r\n  const schedule = (fn: () => void, ms: number) => {\r\n    const id = window.setTimeout(fn, ms);\r\n    timeoutsRef.current.push(id);\r\n    return id;\r\n  };\r\n\r\n  const hardReset = () => {\r\n    clearAllTimeouts();\r\n    setRound(0);\r\n    setDots([]);\r\n    setActual(null);\r\n    setGuess(null);\r\n    setShowResult(false);\r\n    setTotalScore(0);\r\n    setCurrentRoundScore(null);\r\n    setTimer(0);\r\n    setPenalty(0);\r\n    setRoundHistory([]);\r\n    setRecapMessage(null);\r\n    validatedRef.current = false;\r\n  };\r\n\r\n  const begin = () => {\r\n    hardReset();\r\n    setPhase('count');\r\n    schedule(() => setPhase('go'), 500);\r\n    schedule(() => startRound(1), 1000);\r\n  };\r\n\r\n  // timer + penalty\r\n  useInterval(() => {\r\n    if (phase === 'playing' && !showResult) {\r\n      setTimer(t => {\r\n        const nt = t + 1;\r\n        if (nt > TIMER_PENALTY_THRESHOLD) setPenalty(p => p + 1);\r\n        return nt;\r\n      });\r\n    }\r\n  }, phase === 'playing' && !showResult ? 1000 : null);\r\n\r\n  const onCellClick = (x: number, y: number) => {\r\n    if (phase !== 'playing' || showResult) return;\r\n    const ng = { x, y };\r\n    if (guess && ng.x === guess.x && ng.y === guess.y) {\r\n      validate();\r\n    } else {\r\n      setGuess(ng);\r\n    }\r\n  };\r\n\r\n  const validate = () => {\r\n    if (!guess || !actual) return;\r\n    if (validatedRef.current) return; // guard double-submit\r\n    validatedRef.current = true;\r\n    const optimal = nearestInt(actual);\r\n    const dist = chebyshev(guess, optimal);\r\n    const score = dist + penalty;\r\n    setCurrentRoundScore(score);\r\n    setTotalScore(s => s + score);\r\n    const perfect = dist === 0;\r\n    setRoundHistory(h => [...h, { round, score, timer, perfect }]);\r\n    setShowResult(true);\r\n    setPhase('downtime');\r\n    // flash points for ~1s then advance\r\n    setPointsFlash(score === 0 ? '✨0✨' : String(score));\r\n    schedule(() => {\r\n      setPointsFlash(null);\r\n      const next = round + 1;\r\n      if (next <= MAX_ROUNDS) {\r\n        schedule(() => startRound(next), 200); // tiny pause\r\n      } else {\r\n        const final = (roundHistory.reduce((s, r) => s + r.score, 0) + score);\r\n        const msg = getRecapMessage(final);\r\n        setTotalScore(final);\r\n        setRecapMessage(msg);\r\n        setPhase('recap');\r\n      }\r\n    }, 1000);\r\n  };\r\n\r\n  // rendering helpers\r\n  const renderGridCells = () => {\r\n    const cells: React.ReactElement[] = [];\r\n    for (let y = 0; y < GRID_SIZE; y++) {\r\n      for (let x = 0; x < GRID_SIZE; x++) {\r\n        const isDot = dots.some(d => d.x === x && d.y === y);\r\n        const isGuess = guess && guess.x === x && guess.y === y;\r\n        const isOptimal = showResult && actual && Math.round(actual.x) === x && Math.round(actual.y) === y;\r\n        let bg = 'transparent';\r\n        if (isGuess) bg = showResult ? 'bg-red-500' : 'bg-orange-500';\r\n        else if (isOptimal) bg = 'bg-green-500';\r\n        else if (isDot) bg = 'bg-blue-500';\r\n        cells.push(\r\n          <div\r\n            key={`${x}-${y}`}\r\n            onClick={() => onCellClick(x, y)}\r\n            className={`w-5 h-5 border border-white/10 ${bg} ${phase === 'playing' && !showResult ? 'cursor-pointer hover:opacity-80' : ''}`}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    return cells;\r\n  };\r\n\r\n  const vectorsOverlay = () => {\r\n    if (!showResult || !actual) return null;\r\n    const optimal = nearestInt(actual);\r\n    return (\r\n      <svg width={BOARD_PX} height={BOARD_PX} className=\"absolute top-0 left-0 pointer-events-none\">\r\n        {dots.map((d, i) => (\r\n          <line\r\n            key={i}\r\n            x1={d.x * CELL_SIZE + CELL_SIZE / 2}\r\n            y1={d.y * CELL_SIZE + CELL_SIZE / 2}\r\n            x2={optimal.x * CELL_SIZE + CELL_SIZE / 2}\r\n            y2={optimal.y * CELL_SIZE + CELL_SIZE / 2}\r\n            stroke=\"#66bb6a\"\r\n            strokeWidth={2}\r\n            opacity={0.6}\r\n          />\r\n        ))}\r\n      </svg>\r\n    );\r\n  };\r\n\r\n  // Messages\r\n  const messagesAbove25 = useMemo(() => [\r\n    \"Nice try, but you've got more in you! Push it!\",\r\n    \"Not bad, champ—now show us your best!\",\r\n    \"Solid effort, but you're just warming up! Go harder!\",\r\n    \"That's a start, now crank it up a notch!\",\r\n    \"Pretty good, but you're capable of greatness! Dig in!\",\r\n    \"Decent move, but you've got bigger plays to make!\",\r\n    \"Not too shabby, but let's see your A-game!\",\r\n    \"You're getting there—now unleash the beast!\",\r\n    \"Good hustle, but you're not at your peak yet!\",\r\n    \"That's the spirit, now take it to the next level!\"\r\n  ], []);\r\n  const messages10to25 = useMemo(() => [\r\n    'Amazing work! You\\'ve mastered the centroid challenge!',\r\n    'Outstanding performance! Your spatial reasoning is top-notch!',\r\n    'Brilliant! You\\'ve conquered the centroid matrix!',\r\n    'Fantastic! You\\'ve aced the centroid game!',\r\n    'Spectacular! Your geometric intuition is incredible!'\r\n  ], []);\r\n  const messages8to9 = useMemo(() => [\r\n    'Single digit! Impressive!',\r\n    'So close to perfection—keep pushing!',\r\n    'Excellent intuition.'\r\n  ], []);\r\n  const messages7andBelow = useMemo(() => [\r\n    'Unreal! You beat the creator!','Legendary performance!','Phenomenal accuracy!'\r\n  ], []);\r\n\r\n  const getRecapMessage = (finalScore: number) => {\r\n    if (finalScore > 25) return messagesAbove25[Math.floor(Math.random() * messagesAbove25.length)];\r\n    if (finalScore >= 10) return messages10to25[Math.floor(Math.random() * messages10to25.length)];\r\n    if (finalScore >= 8) return messages8to9[Math.floor(Math.random() * messages8to9.length)];\r\n    return messages7andBelow[Math.floor(Math.random() * messages7andBelow.length)];\r\n  };\r\n\r\n  const averageScore = useMemo(() => (\r\n    roundHistory.length ? (roundHistory.reduce((s, r) => s + r.score, 0) / roundHistory.length).toFixed(1) : '0.0'\r\n  ), [roundHistory]);\r\n  const averageTime = useMemo(() => (\r\n    roundHistory.length ? (roundHistory.reduce((s, r) => s + r.timer, 0) / roundHistory.length).toFixed(1) : '0.0'\r\n  ), [roundHistory]);\r\n  const perfectCount = useMemo(() => roundHistory.filter(r => r.perfect).length, [roundHistory]);\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      clearAllTimeouts();\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"w-full flex flex-col items-center justify-center text-white py-4 px-4 font-mono\">\r\n      <div className=\"relative w-full max-w-[380px]\">\r\n        {/* Close button */}\r\n        {onClose && (\r\n          <button\r\n            onClick={onClose}\r\n            className=\"absolute top-0 left-0 z-50 p-2 bg-black/35 hover:bg-black/50 rounded text-white\"\r\n            aria-label=\"close\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        )}\r\n\r\n        {/* Header */}\r\n        <div className=\"text-center mt-4 mb-2\">\r\n          <h2 className=\"text-xl font-bold tracking-wider\">Centroid (x̄, ȳ) – GRID FAST</h2>\r\n          <p className=\"text-sm opacity-70 tracking-wider\">10 rounds – Lowest score wins</p>\r\n        </div>\r\n\r\n        {/* Status row */}\r\n        {phase !== 'idle' && phase !== 'recap' && (\r\n          <div className=\"flex justify-between items-center px-1 mb-2 text-sm tracking-wider\">\r\n            <span>R{Math.min(round, MAX_ROUNDS)}/{MAX_ROUNDS}</span>\r\n            <div className=\"flex items-center gap-1\">\r\n              <Clock className=\"w-4 h-4\" />\r\n              <span className={timer <= TIMER_PENALTY_THRESHOLD ? 'text-green-500' : 'text-red-500'}>\r\n                {`0:${String(timer).padStart(2, '0')}`}\r\n              </span>\r\n              {penalty > 0 && <span className=\"text-red-500\">+{penalty}</span>}\r\n            </div>\r\n            <span>{difficulty.name}</span>\r\n          </div>\r\n        )}\r\n\r\n        {/* Board or Landing */}\r\n        {phase === 'idle' ? (\r\n          <div className=\"mx-auto p-4 rounded-lg bg-black/35 border border-white/10\">\r\n            <h3 className=\"text-lg mb-2\">How it works</h3>\r\n            <p className=\"text-sm mb-2 opacity-85\">\r\n              Estimate the centroid (center of mass) of the blue squares. Click a cell to place your guess, then press VALIDATE (or double-click). Lower total is better. Perfect Guess = 0\r\n            </p>\r\n            {/* Sample solved puzzle */}\r\n            {(() => {\r\n              const SAMPLE_GRID = 11; const SAMPLE_CELL = 14; const SAMPLE_PX = SAMPLE_GRID * SAMPLE_CELL;\r\n              const sampleDots: Point[] = [\r\n                { x: 2, y: 2 }, { x: 3, y: 7 }, { x: 5, y: 4 }, { x: 7, y: 2 }, { x: 8, y: 8 }, { x: 2, y: 9 }\r\n              ];\r\n              const sActual = centroid(sampleDots);\r\n              const sOptimal = nearestInt(sActual);\r\n              const sGuess = { x: Math.min(SAMPLE_GRID - 1, sOptimal.x + 1), y: sOptimal.y };\r\n              const renderSampleCells = () => {\r\n                const cells: React.ReactElement[] = [];\r\n                for (let y = 0; y < SAMPLE_GRID; y++) {\r\n                  for (let x = 0; x < SAMPLE_GRID; x++) {\r\n                    const isDot = sampleDots.some(d => d.x === x && d.y === y);\r\n                    const isGuess = sGuess && sGuess.x === x && sGuess.y === y;\r\n                    const isOptimal = Math.round(sActual.x) === x && Math.round(sActual.y) === y;\r\n                    let bg = 'transparent';\r\n                    if (isGuess) bg = 'bg-red-500';\r\n                    else if (isOptimal) bg = 'bg-green-500';\r\n                    else if (isDot) bg = 'bg-blue-500';\r\n                    cells.push(\r\n                      <div key={`${x}-${y}`} className={`w-3.5 h-3.5 border border-white/10 ${bg}`} />\r\n                    );\r\n                  }\r\n                }\r\n                return cells;\r\n              };\r\n              return (\r\n                <div className=\"flex gap-4 items-center\">\r\n                  <div className=\"relative w-[154px] h-[154px] grid grid-cols-11 grid-rows-11 bg-bg rounded overflow-hidden\">\r\n                    {renderSampleCells()}\r\n                    <svg width={SAMPLE_PX} height={SAMPLE_PX} className=\"absolute inset-0 pointer-events-none\">\r\n                      {sampleDots.map((d, i) => (\r\n                        <line\r\n                          key={i}\r\n                          x1={d.x * SAMPLE_CELL + SAMPLE_CELL / 2}\r\n                          y1={d.y * SAMPLE_CELL + SAMPLE_CELL / 2}\r\n                          x2={sOptimal.x * SAMPLE_CELL + SAMPLE_CELL / 2}\r\n                          y2={sOptimal.y * SAMPLE_CELL + SAMPLE_CELL / 2}\r\n                          stroke=\"#66bb6a\"\r\n                          strokeWidth={2}\r\n                          opacity={0.6}\r\n                        />\r\n                      ))}\r\n                    </svg>\r\n                  </div>\r\n                  <div className=\"text-xs\">\r\n                    <div>Blue = dots</div>\r\n                    <div className=\"text-green-400\">Green = true centroid</div>\r\n                    <div className=\"text-red-400\">Red = your guess</div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })()}\r\n          </div>\r\n        ) : (\r\n          <div className=\"w-[340px] h-[340px] mx-auto relative rounded-lg overflow-hidden border border-white/10\">\r\n            {/* countdown overlays */}\r\n            {phase === 'count' && (\r\n              <div className=\"absolute inset-0 bg-black/50 flex items-center justify-center z-10\">\r\n                <h3 className=\"text-3xl\">Round 1</h3>\r\n              </div>\r\n            )}\r\n            {phase === 'go' && (\r\n              <div className=\"absolute inset-0 bg-black/50 flex items-center justify-center z-10\">\r\n                <h3 className=\"text-3xl\">GO!</h3>\r\n              </div>\r\n            )}\r\n\r\n            {/* grid */}\r\n            <div className=\"absolute inset-0 bg-bg\" style={{ display: 'grid', gridTemplateColumns: `repeat(${GRID_SIZE}, ${CELL_SIZE}px)`, gridTemplateRows: `repeat(${GRID_SIZE}, ${CELL_SIZE}px)` }}>\r\n              {renderGridCells()}\r\n            </div>\r\n            {vectorsOverlay()}\r\n            {phase === 'downtime' && <div className=\"absolute inset-0 bg-black/40\" />}\r\n            {pointsFlash && (\r\n              <div className=\"absolute top-2 left-1/2 -translate-x-1/2 z-20\">\r\n                <div className=\"text-3xl text-red-500 drop-shadow-lg\">{pointsFlash}</div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Primary action */}\r\n        <div className=\"mt-2\">\r\n          <Button\r\n            className=\"w-full\"\r\n            size=\"lg\"\r\n            variant={phase === 'idle' ? 'default' : guess && !showResult ? 'default' : 'outline'}\r\n            disabled={phase !== 'idle' && (phase !== 'playing' || showResult || !guess)}\r\n            onClick={() => {\r\n              if (phase === 'idle') begin();\r\n              else if (phase === 'playing' && guess && !showResult) validate();\r\n            }}\r\n          >\r\n            <div className=\"flex items-center gap-2\">\r\n              {phase === 'idle' ? <Target className=\"w-5 h-5\" /> : guess && !showResult ? <Check className=\"w-5 h-5\" /> : <Target className=\"w-5 h-5\" />}\r\n              <div className=\"text-left\">\r\n                <div className=\"tracking-wider\">\r\n                  {phase === 'idle' ? 'START Game' : phase === 'playing' && guess && !showResult ? 'VALIDATE' : 'PLACE'}\r\n                </div>\r\n                <div className=\"text-xs opacity-80 leading-none tracking-wider\">\r\n                  x̄ = (1/n) Σ xᵢ &nbsp;&nbsp; ȳ = (1/n) Σ yᵢ\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Recap */}\r\n        {phase === 'recap' && (\r\n          <div className=\"fixed inset-0 z-50\">\r\n            <div className=\"absolute inset-0 bg-black/55\" />\r\n            <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[min(92vw,420px)] max-h-[80vh] overflow-y-auto text-center bg-bg text-text-primary p-4 rounded-lg shadow-xl font-mono tracking-wider\">\r\n              <div className=\"flex gap-2 mb-2 justify-center\">\r\n                <Button variant=\"default\" onClick={() => { hardReset(); setPhase('idle'); }}>Play Again</Button>\r\n                <Button variant=\"outline\" onClick={() => { setPhase('idle'); onClose?.(); }}>Close</Button>\r\n              </div>\r\n              <p className=\"text-sm mb-2\">{recapMessage}</p>\r\n              <h3 className=\"text-lg mb-2\">Final Score: {totalScore} points</h3>\r\n              <div className=\"text-left mx-auto max-w-[360px] text-xs py-1\">\r\n                {roundHistory.map((r, idx) => (\r\n                  <div key={`${r.round}-${idx}`} className=\"flex justify-between py-1\">\r\n                    <span>Round {r.round}:</span>\r\n                    <span>{r.score} pts {r.perfect ? '✨' : ''}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              <div className=\"flex justify-between mt-2 text-xs text-text-muted\">\r\n                <span>Perfect rounds: <strong>{perfectCount}</strong></span>\r\n                <span>Average score: <strong>{averageScore}</strong></span>\r\n              </div>\r\n              <div className=\"mt-2 text-xs text-text-muted\">Avg time per round: <strong>{averageTime}s</strong></div>\r\n              {/* Histogram 0..9+ */}\r\n              <div className=\"mt-2 h-24 flex items-end gap-1 mx-auto max-w-[360px]\">\r\n                {Array.from({ length: 10 }, (_, i) => {\r\n                  const count = roundHistory.filter(r => (i < 9 ? r.score === i : r.score >= 9)).length;\r\n                  return (\r\n                    <div key={i} className=\"flex-1 flex flex-col-reverse items-center gap-1\">\r\n                      <div className=\"w-2 bg-accent rounded-sm\" style={{ height: count * 10 }} />\r\n                      <span className=\"text-xs mt-1\">{i === 9 ? '9+' : i}</span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2900, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/hooks/useFullscreen.ts"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react';\r\n\r\nexport function useFullscreen(targetRef?: React.RefObject<HTMLElement | null>) {\r\n  const [isFullscreen, setIsFullscreen] = useState<boolean>(false);\r\n\r\n  useEffect(() => {\r\n    const onChange = () => {\r\n      setIsFullscreen(Boolean(document.fullscreenElement));\r\n    };\r\n    document.addEventListener('fullscreenchange', onChange);\r\n    return () => document.removeEventListener('fullscreenchange', onChange);\r\n  }, []);\r\n\r\n  const enter = useCallback(async () => {\r\n    try {\r\n      const el = targetRef?.current ?? document.documentElement;\r\n      if (!document.fullscreenElement && el?.requestFullscreen) {\r\n        await el.requestFullscreen();\r\n      }\r\n    } catch {/* ignore */}\r\n  }, [targetRef]);\r\n\r\n  const exit = useCallback(async () => {\r\n    try {\r\n      if (document.fullscreenElement) {\r\n        await document.exitFullscreen();\r\n      }\r\n    } catch {/* ignore */}\r\n  }, []);\r\n\r\n  const toggle = useCallback(async () => {\r\n    if (document.fullscreenElement) return exit();\r\n    return enter();\r\n  }, [enter, exit]);\r\n\r\n  return { isFullscreen, enterFullscreen: enter, exitFullscreen: exit, toggleFullscreen: toggle };\r\n}\r\n\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;;;;;;AAEO,SAAS,cAAc,SAA+C;;IAC3E,IAAwC,qLAAA,IAAA,yKAAQ,EAAU,YAAnD,eAAiC,cAAnB,kBAAmB;IAExC,IAAA,0KAAS;mCAAC;YACR,IAAM;oDAAW;oBACf,gBAAgB,QAAQ,SAAS,iBAAiB;gBACpD;;YACA,SAAS,gBAAgB,CAAC,oBAAoB;YAC9C;2CAAO;2BAAM,SAAS,mBAAmB,CAAC,oBAAoB;;;QAChE;kCAAG,EAAE;IAEL,IAAM,QAAQ,IAAA,4KAAW;4CAAC;;;wBAEX,oBAAL;;;;;;;;;;;oCAAA,KAAK,CAAA,qBAAA,sBAAA,gCAAA,UAAW,OAAO,cAAlB,gCAAA,qBAAsB,SAAS,eAAe;yCACrD,CAAA,CAAC,SAAS,iBAAiB,KAAI,eAAA,yBAAA,GAAI,iBAAiB,CAAD,GAAnD;;;;oCACF;;wCAAM,GAAG,iBAAiB;;;oCAA1B;;;;;;;;;;;;;;;;;;;;gBAGN;;;2CAAG;QAAC;KAAU;IAEd,IAAM,OAAO,IAAA,4KAAW;2CAAC;;;;;;;;;;;;;;yCAEjB,SAAS,iBAAiB,EAA1B;;;;oCACF;;wCAAM,SAAS,cAAc;;;oCAA7B;;;;;;;;;;;;;;;;;;;;gBAGN;;;0CAAG,EAAE;IAEL,IAAM,SAAS,IAAA,4KAAW;6CAAC;;;;;4BACzB,IAAI,SAAS,iBAAiB,EAAE;;gCAAO;;4BACvC;;gCAAO;;;;gBACT;;;4CAAG;QAAC;QAAO;KAAK;IAEhB,OAAO;QAAE,cAAA;QAAc,iBAAiB;QAAO,gBAAgB;QAAM,kBAAkB;IAAO;AAChG;GAlCgB"}},
    {"offset": {"line": 3070, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/modules/games/memory-game.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { X, Maximize2, Minimize2, RotateCcw } from 'lucide-react';\r\nimport { useFullscreen } from '@/hooks/useFullscreen';\r\n\r\n// Constants\r\nconst TOTAL_IMAGES = 160;\r\nconst PAIRS = 8; // fixed – 16 cards, 4x4 grid\r\nconst CARD_RATIO = 597 / 440; // height / width\r\n\r\n// Helpers\r\nfunction padId(n: number): string { return n.toString().padStart(3, '0'); }\r\nfunction imageUrl(id: string, ext: 'avif' | 'webp') { return `/images/memory/${ext}/${id}.${ext}`; }\r\nconst BACK_URL = '/images/memory/Memory_JJJ_Back_440x.webp';\r\n\r\nfunction shuffle<T>(arr: T[]): T[] {\r\n  const a = [...arr];\r\n  for (let i = a.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1));\r\n    [a[i], a[j]] = [a[j], a[i]];\r\n  }\r\n  return a;\r\n}\r\n\r\n// Types\r\ntype Card = { imageId: string; pairId: number; uid: string };\r\n\r\ninterface MemoryGameProps {\r\n  onClose?: () => void;\r\n}\r\n\r\nexport const MemoryGame: React.FC<MemoryGameProps> = ({ onClose }) => {\r\n  // Layout sizing\r\n  const [cardWidth, setCardWidth] = useState<number>(100);\r\n\r\n  // Game state\r\n  const [deck, setDeck] = useState<Card[]>([]);\r\n  const [flippedUids, setFlippedUids] = useState<string[]>([]);\r\n  const [matchedPairs, setMatchedPairs] = useState<Set<number>>(new Set());\r\n  const [moves, setMoves] = useState<number>(0);\r\n  const busyRef = useRef(false);\r\n  // Timer state (seconds only)\r\n  const [elapsedSec, setElapsedSec] = useState<number>(0);\r\n  const [timerRunning, setTimerRunning] = useState<boolean>(false);\r\n  const timerRef = useRef<number | null>(null);\r\n  // Reveal/shuffle phase\r\n  const [phase, setPhase] = useState<'play'|'reveal'|'hold'|'shuffle'>('play');\r\n  const [revealFront, setRevealFront] = useState<Set<string>>(new Set());\r\n  const [showShuffle, setShowShuffle] = useState<boolean>(false);\r\n  const timeoutsRef = useRef<number[]>([]);\r\n  const [showIntro, setShowIntro] = useState<boolean>(true);\r\n  // Fly overlay for shuffle animation\r\n  const cardRefs = useRef<Record<string, HTMLDivElement | null>>({});\r\n  const [flyVisible, setFlyVisible] = useState<boolean>(false);\r\n  const [flyCards, setFlyCards] = useState<Array<{ uid: string; left: number; top: number }>>([]);\r\n\r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n  const { isFullscreen, toggleFullscreen } = useFullscreen(containerRef);\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (timerRef.current) {\r\n        clearInterval(timerRef.current);\r\n      }\r\n      timeoutsRef.current.forEach(id => clearTimeout(id));\r\n    };\r\n  }, []);\r\n\r\n  // Compute 4x4 cell size to avoid scrollbars\r\n  const computeSize = () => {\r\n    const vw = window.innerWidth;\r\n    const vh = window.innerHeight;\r\n    const cols = 4; const rows = 4; const gap = 10; const sidePad = 16; const topReserve = 72; // header row\r\n    let w = Math.floor((vw - sidePad*2 - gap*(cols-1)) / cols);\r\n    let h = Math.floor(w * CARD_RATIO);\r\n    while (rows * h + gap * (rows - 1) > (vh - topReserve) && w > 60) {\r\n      w -= 1; h = Math.floor(w * CARD_RATIO);\r\n    }\r\n    setCardWidth(w);\r\n  };\r\n\r\n  useEffect(() => {\r\n    computeSize();\r\n    window.addEventListener('resize', computeSize);\r\n    return () => window.removeEventListener('resize', computeSize);\r\n  }, []);\r\n\r\n  // Build a new deck of 8 random pairs\r\n  const clearAllTimeouts = () => {\r\n    timeoutsRef.current.forEach(id => window.clearTimeout(id));\r\n    timeoutsRef.current = [];\r\n  };\r\n\r\n  const newGame = () => {\r\n    clearAllTimeouts();\r\n    const pairs = shuffle(Array.from({ length: TOTAL_IMAGES / 2 }, (_, i) => i + 1)).slice(0, PAIRS);\r\n    const cards: Card[] = [];\r\n    for (const p of pairs) {\r\n      const a = padId(2 * p - 1), b = padId(2 * p);\r\n      cards.push({ imageId: a, pairId: p, uid: `${a}-A` });\r\n      cards.push({ imageId: b, pairId: p, uid: `${b}-B` });\r\n    }\r\n    // For reveal: two-by-two side-by-side order\r\n    const revealDeck: Card[] = [];\r\n    for (let i = 0; i < cards.length; i += 2) { revealDeck.push(cards[i], cards[i+1]); }\r\n    const finalDeck = shuffle(revealDeck);\r\n    setDeck(revealDeck);\r\n    setFlippedUids([]);\r\n    setMatchedPairs(new Set());\r\n    setMoves(0);\r\n    busyRef.current = false;\r\n    // Reset timer\r\n    setElapsedSec(0);\r\n    setTimerRunning(false);\r\n    if (timerRef.current) { window.clearInterval(timerRef.current); timerRef.current = null; }\r\n\r\n    // Run reveal animation (0.75s per pair)\r\n    busyRef.current = true;\r\n    setPhase('reveal');\r\n    setRevealFront(new Set());\r\n    const PER_PAIR_MS = 750;\r\n    for (let k = 0; k < PAIRS; k++) {\r\n      const id = window.setTimeout(() => {\r\n        setRevealFront(prev => {\r\n          const next = new Set(prev);\r\n          const c1 = revealDeck[k*2];\r\n          const c2 = revealDeck[k*2+1];\r\n          if (c1) next.add(c1.uid); if (c2) next.add(c2.uid);\r\n          return next;\r\n        });\r\n      }, PER_PAIR_MS * k);\r\n      timeoutsRef.current.push(id);\r\n    }\r\n    const holdId = window.setTimeout(() => setPhase('hold'), PER_PAIR_MS * PAIRS);\r\n    timeoutsRef.current.push(holdId);\r\n    const shuffleStartId = window.setTimeout(() => {\r\n      setRevealFront(new Set());\r\n      setPhase('shuffle');\r\n      // Step A: measure current positions\r\n      const initialPositions = revealDeck.map(c => {\r\n        const el = cardRefs.current[c.uid];\r\n        const r = el ? el.getBoundingClientRect() : { left: window.innerWidth/2, top: window.innerHeight/2 } as any;\r\n        return { uid: c.uid, left: r.left, top: r.top };\r\n      });\r\n      setFlyCards(initialPositions);\r\n      setFlyVisible(true);\r\n      // Step B: move all to center\r\n      const centerLeft = Math.round(window.innerWidth / 2 - cardWidth / 2);\r\n      const centerTop = Math.round(window.innerHeight * 0.35 - Math.floor(cardWidth*CARD_RATIO) / 2);\r\n      const toCenterId = window.setTimeout(() => {\r\n        setFlyCards(prev => prev.map(fc => ({ ...fc, left: centerLeft, top: centerTop })));\r\n      }, 20);\r\n      timeoutsRef.current.push(toCenterId);\r\n      // Step C: apply shuffled deck and measure target positions\r\n      const applyShuffleId = window.setTimeout(() => {\r\n        setDeck(finalDeck);\r\n        // wait next frame for DOM\r\n        const measureTargetsId = window.setTimeout(() => {\r\n          const targets = finalDeck.map(c => {\r\n            const el = cardRefs.current[c.uid];\r\n            const r = el ? el.getBoundingClientRect() : { left: centerLeft, top: centerTop } as any;\r\n            return { uid: c.uid, left: r.left, top: r.top };\r\n          });\r\n          // Step D: fly from center to targets\r\n          setFlyCards(prev => prev.map((fc, i) => ({ ...fc, left: targets[i].left, top: targets[i].top })));\r\n          // Step E: end overlay\r\n          const endId = window.setTimeout(() => {\r\n            setFlyVisible(false);\r\n            setPhase('play');\r\n            busyRef.current = false;\r\n          }, 650);\r\n          timeoutsRef.current.push(endId);\r\n        }, 40);\r\n        timeoutsRef.current.push(measureTargetsId);\r\n      }, 600);\r\n      timeoutsRef.current.push(applyShuffleId);\r\n    }, PER_PAIR_MS * PAIRS + 750);\r\n    timeoutsRef.current.push(shuffleStartId);\r\n  };\r\n\r\n  useEffect(() => { newGame(); }, []);\r\n\r\n  const onCardClick = (c: Card) => {\r\n    if (busyRef.current) return;\r\n    if (matchedPairs.has(c.pairId)) return;\r\n    if (flippedUids.includes(c.uid)) return;\r\n\r\n    // Start timer on first interaction\r\n    if (!timerRunning) {\r\n      setTimerRunning(true);\r\n      if (!timerRef.current) {\r\n        timerRef.current = window.setInterval(() => setElapsedSec(s => s + 1), 1000);\r\n      }\r\n    }\r\n\r\n    const next = [...flippedUids, c.uid];\r\n    setFlippedUids(next);\r\n\r\n    if (next.length === 2) {\r\n      busyRef.current = true;\r\n      setMoves(m => m + 1);\r\n      const [u1, u2] = next;\r\n      const c1 = deck.find(d => d.uid === u1)!;\r\n      const c2 = deck.find(d => d.uid === u2)!;\r\n      const isMatch = c1.pairId === c2.pairId;\r\n      setTimeout(() => {\r\n        if (isMatch) { const s = new Set(matchedPairs); s.add(c1.pairId); setMatchedPairs(s); }\r\n        setFlippedUids([]);\r\n        busyRef.current = false;\r\n        // Stop timer when all pairs matched\r\n        setTimeout(() => {\r\n          if (matchedPairs.size + (isMatch ? 1 : 0) === PAIRS) {\r\n            setTimerRunning(false);\r\n            if (timerRef.current) { window.clearInterval(timerRef.current); timerRef.current = null; }\r\n          }\r\n        }, 0);\r\n      }, isMatch ? 350 : 650);\r\n    }\r\n  };\r\n\r\n  const cardHeight = Math.floor(cardWidth * CARD_RATIO);\r\n\r\n  return (\r\n    <div ref={containerRef} className=\"w-full min-h-[600px] p-1 flex flex-col bg-bg text-white rounded-lg\">\r\n      <div className=\"flex items-center justify-between mb-1 min-h-[40px]\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            onClick={toggleFullscreen}\r\n            className=\"p-2 bg-black/35 hover:bg-black/50 rounded text-white\"\r\n            aria-label={isFullscreen ? 'Exit Fullscreen' : 'Go Fullscreen'}\r\n          >\r\n            {isFullscreen ? <Minimize2 className=\"w-4 h-4\" /> : <Maximize2 className=\"w-4 h-4\" />}\r\n          </button>\r\n          {onClose && (\r\n            <button\r\n              onClick={onClose}\r\n              className=\"p-2 bg-black/35 hover:bg-black/50 rounded text-white\"\r\n              aria-label=\"close\"\r\n            >\r\n              <X className=\"w-4 h-4\" />\r\n            </button>\r\n          )}\r\n          <span className=\"text-xs text-text-muted font-mono tracking-wider\">Jiu-Jitsu Jungle Memory Game</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-4\">\r\n          <span className=\"text-xs font-mono tracking-wider\">\r\n            Time: {String(Math.floor(elapsedSec/60)).padStart(2,'0')}:{String(elapsedSec%60).padStart(2,'0')}\r\n          </span>\r\n          <span className=\"text-xs font-mono tracking-wider\">Moves: {moves}</span>\r\n          <Button size=\"sm\" variant=\"outline\" onClick={newGame} className=\"font-mono tracking-wider\">\r\n            <RotateCcw className=\"w-4 h-4 mr-1\" />\r\n            New Game\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex-1 grid grid-cols-4 gap-2.5 justify-items-center content-start relative\">\r\n        {deck.map(card => {\r\n          let isFlipped = flippedUids.includes(card.uid) || matchedPairs.has(card.pairId);\r\n          if (phase !== 'play') isFlipped = revealFront.has(card.uid);\r\n          return (\r\n            <div\r\n              key={card.uid}\r\n              ref={(el: HTMLDivElement | null) => { cardRefs.current[card.uid] = el; }}\r\n              data-uid={card.uid}\r\n              onClick={() => onCardClick(card)}\r\n              className=\"rounded-xl overflow-hidden shadow-lg relative cursor-pointer bg-bg\"\r\n              style={{ width: cardWidth, height: cardHeight }}\r\n            >\r\n              <div\r\n                className=\"absolute inset-0 transition-transform duration-280 ease-in-out\"\r\n                style={{ transform: isFlipped ? 'rotateY(0deg)' : 'rotateY(180deg)', backfaceVisibility: 'hidden' }}\r\n              >\r\n                <picture>\r\n                  <source srcSet={imageUrl(card.imageId, 'avif')} type=\"image/avif\" />\r\n                  <source srcSet={imageUrl(card.imageId, 'webp')} type=\"image/webp\" />\r\n                  <img\r\n                    src={imageUrl(card.imageId, 'webp')}\r\n                    alt={card.imageId}\r\n                    width={440}\r\n                    height={597}\r\n                    loading=\"lazy\"\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                </picture>\r\n              </div>\r\n              <div\r\n                className=\"absolute inset-0 transition-transform duration-280 ease-in-out\"\r\n                style={{ transform: isFlipped ? 'rotateY(180deg)' : 'rotateY(0deg)', backfaceVisibility: 'hidden' }}\r\n              >\r\n                <img\r\n                  src={BACK_URL}\r\n                  alt=\"back\"\r\n                  width={440}\r\n                  height={597}\r\n                  loading=\"lazy\"\r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n        {(phase === 'shuffle' && flyVisible) && (\r\n          <div className=\"fixed inset-0 bg-black/85 z-30 pointer-events-none\" />\r\n        )}\r\n        {flyVisible && (\r\n          <div className=\"fixed inset-0 z-40 pointer-events-none\">\r\n            {flyCards.map(fc => (\r\n              <div\r\n                key={`fly-${fc.uid}`}\r\n                className=\"absolute rounded-xl overflow-hidden shadow-lg transition-all duration-600 ease-in-out\"\r\n                style={{ left: fc.left, top: fc.top, width: cardWidth, height: cardHeight }}\r\n              >\r\n                <img\r\n                  src={BACK_URL}\r\n                  alt=\"back\"\r\n                  width={440}\r\n                  height={597}\r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {showIntro && (\r\n        <div\r\n          onClick={() => setShowIntro(false)}\r\n          className=\"fixed inset-0 z-50 bg-black/65 flex items-center justify-center\"\r\n        >\r\n          <div className=\"w-[70vw] sm:w-[360px] max-w-[420px] aspect-[440/597] rounded-xl overflow-hidden shadow-2xl\">\r\n            <img\r\n              src={BACK_URL}\r\n              alt=\"back\"\r\n              width={440}\r\n              height={597}\r\n              className=\"w-full h-full object-cover\"\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3727, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/modules/games/games-hub.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { CentroidGame } from './centroid-game';\r\nimport { MemoryGame } from './memory-game';\r\nimport { ArrowLeft } from 'lucide-react';\r\n\r\ninterface GamesHubProps {\r\n  onExit?: () => void;\r\n  initial?: 'none' | 'centroid' | 'memory';\r\n}\r\n\r\nexport const GamesHub: React.FC<GamesHubProps> = ({ onExit, initial = 'none' }) => {\r\n  const [selected, setSelected] = useState<'none'|'centroid'|'memory'>(initial);\r\n\r\n  React.useEffect(() => {\r\n    setSelected(initial);\r\n  }, [initial]);\r\n\r\n  if (selected === 'centroid') {\r\n    return (\r\n      <div className=\"w-full\">\r\n        <CentroidGame onClose={() => setSelected('none')} />\r\n      </div>\r\n    );\r\n  }\r\n  if (selected === 'memory') {\r\n    return (\r\n      <div className=\"w-full\">\r\n        <MemoryGame onClose={() => setSelected('none')} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const renderCentroidPreview = () => {\r\n    const GRID = 11;\r\n    const sampleDots = [\r\n      { x: 2, y: 2 }, { x: 3, y: 7 }, { x: 5, y: 4 }, { x: 7, y: 2 }, { x: 8, y: 8 }, { x: 2, y: 9 }\r\n    ];\r\n    const centroid = (pts: Array<{x:number;y:number}>) => {\r\n      const sx = pts.reduce((s,p)=>s+p.x,0);\r\n      const sy = pts.reduce((s,p)=>s+p.y,0);\r\n      return { x: sx/pts.length, y: sy/pts.length };\r\n    };\r\n    const nearest = (p:{x:number;y:number}) => ({ x: Math.round(p.x), y: Math.round(p.y) });\r\n    const actual = centroid(sampleDots);\r\n    const optimal = nearest(actual);\r\n    const guess = { x: Math.min(GRID-1, optimal.x+1), y: optimal.y };\r\n    const cells: React.ReactElement[] = [];\r\n    for (let y=0;y<GRID;y++) {\r\n      for (let x=0;x<GRID;x++) {\r\n        const isDot = sampleDots.some(d=>d.x===x && d.y===y);\r\n        const isGuess = guess.x===x && guess.y===y;\r\n        const isOptimal = Math.round(actual.x)===x && Math.round(actual.y)===y;\r\n        let bg = 'transparent';\r\n        if (isGuess) bg = 'bg-red-500';\r\n        else if (isOptimal) bg = 'bg-green-500';\r\n        else if (isDot) bg = 'bg-blue-500';\r\n        cells.push(\r\n          <div key={`${x}-${y}`} className={`border border-white/10 ${bg}`} />\r\n        );\r\n      }\r\n    }\r\n    return (\r\n      <div className=\"w-full\">\r\n        <div\r\n          className=\"relative w-full aspect-square grid bg-bg rounded overflow-hidden\"\r\n          style={{ gridTemplateColumns: `repeat(${GRID}, 1fr)`, gridTemplateRows: `repeat(${GRID}, 1fr)` }}\r\n        >\r\n          {cells}\r\n          <svg\r\n            viewBox={`0 0 ${GRID} ${GRID}`}\r\n            preserveAspectRatio=\"none\"\r\n            className=\"absolute inset-0 pointer-events-none w-full h-full\"\r\n          >\r\n            {sampleDots.map((d,i)=> (\r\n              <line\r\n                key={i}\r\n                x1={d.x+0.5}\r\n                y1={d.y+0.5}\r\n                x2={optimal.x+0.5}\r\n                y2={optimal.y+0.5}\r\n                stroke=\"#66bb6a\"\r\n                strokeWidth={0.15}\r\n                opacity={0.6}\r\n              />\r\n            ))}\r\n          </svg>\r\n        </div>\r\n        <div className=\"mt-2 text-xs\">\r\n          <div>Blue = dots</div>\r\n          <div className=\"text-green-400\">Green = true centroid</div>\r\n          <div className=\"text-red-400\">Red = your guess</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderMemoryPreview = () => {\r\n    const COLS = 4, ROWS = 4, GAP = 6;\r\n    const BACK_URL = '/images/memory/Memory_JJJ_Back_440x.webp';\r\n    const frontSrc = (id: string, ext: 'avif'|'webp') => `/images/memory/${ext}/${id}.${ext}`;\r\n    const faceMap: Record<number, string> = { 5: '001', 6: '002' };\r\n    const grid: React.ReactElement[] = [];\r\n    for (let i=0;i<COLS*ROWS;i++) {\r\n      const faceId = faceMap[i];\r\n      grid.push(\r\n        <div key={i} className=\"rounded-lg overflow-hidden shadow-md bg-bg aspect-[440/597]\">\r\n          {faceId ? (\r\n            <picture>\r\n              <source srcSet={frontSrc(faceId, 'avif')} type=\"image/avif\" />\r\n              <source srcSet={frontSrc(faceId, 'webp')} type=\"image/webp\" />\r\n              <img\r\n                src={frontSrc(faceId, 'webp')}\r\n                alt={`front-${faceId}`}\r\n                width={440}\r\n                height={597}\r\n                className=\"w-full h-full object-cover\"\r\n              />\r\n            </picture>\r\n          ) : (\r\n            <img\r\n              src={BACK_URL}\r\n              alt=\"back\"\r\n              width={440}\r\n              height={597}\r\n              className=\"w-full h-full object-cover\"\r\n            />\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"w-full\">\r\n        <div\r\n          className=\"grid gap-1.5 w-full\"\r\n          style={{ gridTemplateColumns: `repeat(${COLS}, 1fr)` }}\r\n        >\r\n          {grid}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full space-y-6\">\r\n      <div className=\"space-y-2\">\r\n        <div className=\"flex justify-between items-center\">\r\n          <h2 className=\"text-2xl sm:text-3xl font-semibold\">Games Hub</h2>\r\n          {onExit && (\r\n            <Button variant=\"outline\" size=\"sm\" onClick={onExit}>\r\n              <ArrowLeft className=\"w-4 h-4 mr-1\" />\r\n              Back\r\n            </Button>\r\n          )}\r\n        </div>\r\n        <p className=\"text-sm text-text-muted\">\r\n          Interactive training games to improve spatial reasoning, memory, and pattern recognition.\r\n        </p>\r\n      </div>\r\n      <div className=\"grid gap-4 md:gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3\">\r\n        <Card className=\"rounded-xl overflow-hidden border-border-subtle hover:border-accent-primary/50 transition-colors\">\r\n          <button\r\n            onClick={() => setSelected('centroid')}\r\n            className=\"flex flex-col h-full w-full text-left\"\r\n          >\r\n            <CardHeader className=\"pb-3\">\r\n              <CardTitle className=\"text-lg font-semibold\">Centroid</CardTitle>\r\n              <CardDescription className=\"text-xs\">\r\n                Estimate the center of mass of scattered points. Improves spatial reasoning and pattern recognition.\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"flex-1 flex items-center justify-center p-4 pt-0\">\r\n              {renderCentroidPreview()}\r\n            </CardContent>\r\n          </button>\r\n        </Card>\r\n        <Card className=\"rounded-xl overflow-hidden border-border-subtle hover:border-accent-primary/50 transition-colors\">\r\n          <button\r\n            onClick={() => setSelected('memory')}\r\n            className=\"flex flex-col h-full w-full text-left\"\r\n          >\r\n            <CardHeader className=\"pb-3\">\r\n              <CardTitle className=\"text-lg font-semibold\">JJJ Memory</CardTitle>\r\n              <CardDescription className=\"text-xs\">\r\n                Match pairs of technique cards. Enhances visual memory and technique recognition.\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"flex-1 flex items-center justify-center p-4 pt-0\">\r\n              {renderMemoryPreview()}\r\n            </CardContent>\r\n          </button>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4226, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/modules/timer/timer-tool.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Minus, Plus, RotateCcw, Play, Pause } from \"lucide-react\";\r\n\r\ntype HMS = { m: number; s: number };\r\n\r\nfunction clamp(v: number, min: number, max: number) {\r\n  return Math.max(min, Math.min(max, v));\r\n}\r\n\r\nfunction toSeconds(t: HMS) {\r\n  return t.m * 60 + t.s;\r\n}\r\n\r\nfunction fmt(seconds: number) {\r\n  const m = Math.floor(seconds / 60)\r\n    .toString()\r\n    .padStart(2, \"0\");\r\n  const s = Math.floor(seconds % 60)\r\n    .toString()\r\n    .padStart(2, \"0\");\r\n  return `${m}:${s}`;\r\n}\r\n\r\nfunction beep(freq = 880, dur = 120) {\r\n  try {\r\n    const Ctx =\r\n      (window as any).AudioContext || (window as any).webkitAudioContext;\r\n    const ctx = new Ctx();\r\n    const o = ctx.createOscillator();\r\n    const g = ctx.createGain();\r\n    o.frequency.value = freq;\r\n    o.type = \"square\";\r\n    o.connect(g);\r\n    g.connect(ctx.destination);\r\n    o.start();\r\n    setTimeout(() => {\r\n      o.stop();\r\n      ctx.close();\r\n    }, dur);\r\n  } catch {\r\n    // ignore audio errors (e.g. unsupported environment)\r\n  }\r\n}\r\n\r\nexport const TimerTool: React.FC = () => {\r\n  const [roundLen, setRoundLen] = useState<HMS>({ m: 5, s: 0 });\r\n  const [restLen, setRestLen] = useState<HMS>({ m: 0, s: 20 });\r\n  const [totalRounds, setTotalRounds] = useState<number>(5);\r\n  const [phase, setPhase] = useState<\r\n    \"countdown\" | \"round\" | \"rest\" | \"paused\" | \"finished\"\r\n  >(\"paused\");\r\n  const [currentRound, setCurrentRound] = useState(1);\r\n  const [remaining, setRemaining] = useState(0);\r\n  const intervalRef = useRef<number | null>(null);\r\n\r\n  // Load persisted settings on mount\r\n  useEffect(() => {\r\n    try {\r\n      const roundRaw = window.localStorage.getItem(\"coach_timer_round\");\r\n      const restRaw = window.localStorage.getItem(\"coach_timer_rest\");\r\n      const roundsRaw = window.localStorage.getItem(\"coach_timer_rounds\");\r\n      if (roundRaw) setRoundLen(JSON.parse(roundRaw));\r\n      if (restRaw) setRestLen(JSON.parse(restRaw));\r\n      if (roundsRaw) setTotalRounds(Number(roundsRaw) || 5);\r\n    } catch {\r\n      // ignore\r\n    }\r\n  }, []);\r\n\r\n  // Persist settings\r\n  useEffect(() => {\r\n    try {\r\n      window.localStorage.setItem(\"coach_timer_round\", JSON.stringify(roundLen));\r\n    } catch {\r\n      //\r\n    }\r\n  }, [roundLen]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      window.localStorage.setItem(\"coach_timer_rest\", JSON.stringify(restLen));\r\n    } catch {\r\n      //\r\n    }\r\n  }, [restLen]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      window.localStorage.setItem(\"coach_timer_rounds\", String(totalRounds));\r\n    } catch {\r\n      //\r\n    }\r\n  }, [totalRounds]);\r\n\r\n  const roundSeconds = useMemo(() => toSeconds(roundLen), [roundLen]);\r\n  const restSeconds = useMemo(() => toSeconds(restLen), [restLen]);\r\n\r\n  const clearTick = () => {\r\n    if (intervalRef.current) {\r\n      window.clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => clearTick();\r\n  }, []);\r\n\r\n  const runRound = () => {\r\n    clearTick();\r\n    setPhase(\"round\");\r\n    setRemaining(roundSeconds);\r\n    beep(1200, 400); // start beep\r\n    intervalRef.current = window.setInterval(() => {\r\n      setRemaining((prev) => {\r\n        const next = prev - 1;\r\n        if (next <= 0) {\r\n          clearTick();\r\n          beep(500, 800); // end of round\r\n          if (currentRound >= totalRounds) {\r\n            setPhase(\"finished\");\r\n            return 0;\r\n          }\r\n          runRest();\r\n          return 0;\r\n        }\r\n        return next;\r\n      });\r\n    }, 1000);\r\n  };\r\n\r\n  const startCountdown = (onDone: () => void) => {\r\n    clearTick();\r\n    setPhase(\"countdown\");\r\n    let count = 3;\r\n    setRemaining(count);\r\n    beep(900, 120); // \"3\"\r\n    intervalRef.current = window.setInterval(() => {\r\n      count -= 1;\r\n      setRemaining(count);\r\n      if (count > 0) {\r\n        const dur = count === 2 ? 240 : 360;\r\n        beep(900, dur);\r\n      } else {\r\n        beep(1200, 500);\r\n        clearTick();\r\n        onDone();\r\n      }\r\n    }, 1000);\r\n  };\r\n\r\n  const runRest = () => {\r\n    clearTick();\r\n    setPhase(\"rest\");\r\n    setRemaining(restSeconds);\r\n    intervalRef.current = window.setInterval(() => {\r\n      setRemaining((prev) => {\r\n        const next = prev - 1;\r\n        if (next <= 0) {\r\n          clearTick();\r\n          setCurrentRound((r) => r + 1);\r\n          startCountdown(runRound);\r\n          return 0;\r\n        }\r\n        return next;\r\n      });\r\n    }, 1000);\r\n  };\r\n\r\n  const start = () => {\r\n    setCurrentRound(1);\r\n    startCountdown(runRound);\r\n  };\r\n\r\n  const pause = () => {\r\n    setPhase(\"paused\");\r\n    clearTick();\r\n  };\r\n\r\n  const reset = () => {\r\n    clearTick();\r\n    setPhase(\"paused\");\r\n    setCurrentRound(1);\r\n    setRemaining(0);\r\n  };\r\n\r\n  const bigText = useMemo(() => fmt(Math.max(remaining, 0)), [remaining]);\r\n\r\n  const title =\r\n    phase === \"round\"\r\n      ? `Round ${currentRound}/${totalRounds}`\r\n      : phase === \"rest\"\r\n      ? \"Rest\"\r\n      : phase === \"countdown\"\r\n      ? \"Get Ready\"\r\n      : phase === \"finished\"\r\n      ? \"Finished\"\r\n      : \"Paused\";\r\n\r\n  const color =\r\n    phase === \"round\"\r\n      ? \"text-green-400\"\r\n      : phase === \"rest\" || phase === \"countdown\"\r\n      ? \"text-amber-400\"\r\n      : \"text-white\";\r\n\r\n  const adjust = (\r\n    setter: React.Dispatch<React.SetStateAction<HMS>>,\r\n    key: \"m\" | \"s\",\r\n    delta: number\r\n  ) =>\r\n    setter((v) => ({\r\n      ...v,\r\n      [key]: clamp(v[key] + delta, 0, key === \"m\" ? 99 : 59),\r\n    }));\r\n\r\n  return (\r\n    <div className=\"w-full space-y-6\">\r\n      <div className=\"space-y-2 text-center\">\r\n        <div className=\"text-sm text-text-muted font-medium\">{title}</div>\r\n        {phase === \"paused\" && (\r\n          <p className=\"text-xs text-text-subtle max-w-md mx-auto\">\r\n            Configure round duration, rest period, and number of rounds below. Settings are saved automatically.\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"flex justify-center my-2\">\r\n        <div\r\n          className={`font-mono tabular-nums tracking-[0.25em] text-[18vw] sm:text-[12vw] leading-none font-bold ${color}`}\r\n        >\r\n          {bigText}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex flex-wrap justify-center gap-3 text-sm\">\r\n        <div className=\"flex items-center gap-2 rounded-lg bg-bg-raised border border-border-subtle px-3 py-2\">\r\n          <span className=\"text-text-muted text-xs font-medium\">Duration</span>\r\n          <button\r\n            type=\"button\"\r\n            className=\"p-1.5 rounded-md hover:bg-bg transition-colors\"\r\n            onClick={() => adjust(setRoundLen, \"m\", -1)}\r\n            aria-label=\"Decrease duration\"\r\n          >\r\n            <Minus className=\"w-4 h-4\" />\r\n          </button>\r\n          <span className=\"font-mono tabular-nums font-semibold text-text-primary min-w-[3.5rem] text-center\">\r\n            {roundLen.m.toString().padStart(2, \"0\")}:\r\n            {roundLen.s.toString().padStart(2, \"0\")}\r\n          </span>\r\n          <button\r\n            type=\"button\"\r\n            className=\"p-1.5 rounded-md hover:bg-bg transition-colors\"\r\n            onClick={() => adjust(setRoundLen, \"m\", +1)}\r\n            aria-label=\"Increase duration\"\r\n          >\r\n            <Plus className=\"w-4 h-4\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-2 rounded-lg bg-bg-raised border border-border-subtle px-3 py-2\">\r\n          <span className=\"text-text-muted text-xs font-medium\">Rest</span>\r\n          <button\r\n            type=\"button\"\r\n            className=\"p-1.5 rounded-md hover:bg-bg transition-colors\"\r\n            onClick={() => adjust(setRestLen, \"s\", -5)}\r\n            aria-label=\"Decrease rest\"\r\n          >\r\n            <Minus className=\"w-4 h-4\" />\r\n          </button>\r\n          <span className=\"font-mono tabular-nums font-semibold text-text-primary min-w-[3.5rem] text-center\">\r\n            {restLen.m.toString().padStart(2, \"0\")}:\r\n            {restLen.s.toString().padStart(2, \"0\")}\r\n          </span>\r\n          <button\r\n            type=\"button\"\r\n            className=\"p-1.5 rounded-md hover:bg-bg transition-colors\"\r\n            onClick={() => adjust(setRestLen, \"s\", +5)}\r\n            aria-label=\"Increase rest\"\r\n          >\r\n            <Plus className=\"w-4 h-4\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-2 rounded-lg bg-bg-raised border border-border-subtle px-3 py-2\">\r\n          <span className=\"text-text-muted text-xs font-medium\">Rounds</span>\r\n          <button\r\n            type=\"button\"\r\n            className=\"p-1.5 rounded-md hover:bg-bg transition-colors\"\r\n            onClick={() =>\r\n              setTotalRounds((r) => Math.max(1, Math.min(99, r - 1)))\r\n            }\r\n            aria-label=\"Decrease rounds\"\r\n          >\r\n            <Minus className=\"w-4 h-4\" />\r\n          </button>\r\n          <span className=\"font-mono tabular-nums font-semibold text-text-primary min-w-[2rem] text-center\">\r\n            {totalRounds}\r\n          </span>\r\n          <button\r\n            type=\"button\"\r\n            className=\"p-1.5 rounded-md hover:bg-bg transition-colors\"\r\n            onClick={() =>\r\n              setTotalRounds((r) => Math.max(1, Math.min(99, r + 1)))\r\n            }\r\n            aria-label=\"Increase rounds\"\r\n          >\r\n            <Plus className=\"w-4 h-4\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex justify-center gap-3 pt-2\">\r\n        {phase === \"paused\" || phase === \"countdown\" || phase === \"finished\" ? (\r\n          <Button\r\n            size=\"lg\"\r\n            onClick={start}\r\n            className=\"min-w-[120px]\"\r\n          >\r\n            <Play className=\"w-4 h-4 mr-2\" />\r\n            Start\r\n          </Button>\r\n        ) : (\r\n          <Button\r\n            size=\"lg\"\r\n            variant=\"outline\"\r\n            onClick={pause}\r\n            className=\"min-w-[120px]\"\r\n          >\r\n            <Pause className=\"w-4 h-4 mr-2\" />\r\n            Pause\r\n          </Button>\r\n        )}\r\n        <Button\r\n          size=\"lg\"\r\n          variant=\"ghost\"\r\n          onClick={reset}\r\n        >\r\n          <RotateCcw className=\"w-4 h-4 mr-2\" />\r\n          Reset\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TimerTool;\r\n\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4807, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/modules/coach-tools/coach-tools-hub.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { TimerTool } from '@/components/modules/timer/timer-tool';\r\nimport { Clock, ClipboardList } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface CoachToolsHubProps {\r\n  onExit?: () => void;\r\n  initial?: 'none' | 'timer';\r\n}\r\n\r\nexport const CoachToolsHub: React.FC<CoachToolsHubProps> = ({ onExit, initial = 'none' }) => {\r\n  const [selected, setSelected] = useState<'none' | 'timer'>(initial);\r\n\r\n  React.useEffect(() => {\r\n    setSelected(initial);\r\n  }, [initial]);\r\n\r\n  if (selected === 'timer') {\r\n    return (\r\n      <div className=\"w-full space-y-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <Button variant=\"ghost\" onClick={() => setSelected('none')} className=\"text-sm\">\r\n            ← Back to Tools\r\n          </Button>\r\n        </div>\r\n        <TimerTool />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full space-y-6\">\r\n      <div className=\"space-y-2\">\r\n        <h2 className=\"text-2xl sm:text-3xl font-semibold\">Coach Tools</h2>\r\n        <p className=\"text-sm text-text-muted\">\r\n          Essential tools for planning classes, managing training sessions, and tracking progress.\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"grid gap-4 md:gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3\">\r\n        <Card \r\n          className=\"rounded-xl overflow-hidden border-border-subtle hover:border-accent-primary/50 transition-colors cursor-pointer\"\r\n          onClick={() => setSelected('timer')}\r\n        >\r\n          <CardHeader>\r\n            <div className=\"flex items-center gap-3 mb-2\">\r\n              <div className=\"p-2 rounded-lg bg-accent-primary/10\">\r\n                <Clock className=\"w-5 h-5 text-accent-primary\" />\r\n              </div>\r\n              <CardTitle className=\"text-lg font-semibold\">Round Timer</CardTitle>\r\n            </div>\r\n            <CardDescription className=\"text-xs\">\r\n              Simple round timer with rest periods and auditory beeps. Perfect for structuring grappling sessions.\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"space-y-2 text-xs text-text-muted\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className=\"w-1.5 h-1.5 rounded-full bg-accent-primary\"></span>\r\n                <span>Customizable round duration</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className=\"w-1.5 h-1.5 rounded-full bg-accent-primary\"></span>\r\n                <span>Rest period management</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className=\"w-1.5 h-1.5 rounded-full bg-accent-primary\"></span>\r\n                <span>Audio beeps for transitions</span>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Placeholder for future tools */}\r\n        <Card className=\"rounded-xl overflow-hidden border-border-subtle opacity-60\">\r\n          <CardHeader>\r\n            <div className=\"flex items-center gap-3 mb-2\">\r\n              <div className=\"p-2 rounded-lg bg-bg-raised\">\r\n                <ClipboardList className=\"w-5 h-5 text-text-muted\" />\r\n              </div>\r\n              <CardTitle className=\"text-lg font-semibold text-text-muted\">Class Planner</CardTitle>\r\n            </div>\r\n            <CardDescription className=\"text-xs\">\r\n              Plan and structure your training sessions with technique sequences and progress tracking.\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <span className=\"text-xs text-text-subtle\">Coming Soon</span>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AACA;AACA;AAAA;;;;;;AANA;;;;;;AAcO,IAAM,gBAA8C;QAAG,eAAA,+BAAQ,SAAA,sCAAU;;IAC9E,IAAgC,qLAAA,IAAA,yKAAQ,EAAmB,cAApD,WAAyB,cAAf,cAAe;IAEhC,wKAAK,CAAC,SAAS;mCAAC;YACd,YAAY;QACd;kCAAG;QAAC;KAAQ;IAEZ,IAAI,aAAa,SAAS;QACxB,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC,+IAAM;wBAAC,SAAQ;wBAAQ,SAAS;mCAAM,YAAY;;wBAAS,WAAU;kCAAU;;;;;;;;;;;8BAIlF,6LAAC,uKAAS;;;;;;;;;;;IAGhB;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAqC;;;;;;kCACnD,6LAAC;wBAAE,WAAU;kCAA0B;;;;;;;;;;;;0BAKzC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,2IAAI;wBACH,WAAU;wBACV,SAAS;mCAAM,YAAY;;;0CAE3B,6LAAC,iJAAU;;kDACT,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC,gNAAK;oDAAC,WAAU;;;;;;;;;;;0DAEnB,6LAAC,gJAAS;gDAAC,WAAU;0DAAwB;;;;;;;;;;;;kDAE/C,6LAAC,sJAAe;wCAAC,WAAU;kDAAU;;;;;;;;;;;;0CAIvC,6LAAC,kJAAW;0CACV,cAAA,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAK,WAAU;;;;;;8DAChB,6LAAC;8DAAK;;;;;;;;;;;;sDAER,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAK,WAAU;;;;;;8DAChB,6LAAC;8DAAK;;;;;;;;;;;;sDAER,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAK,WAAU;;;;;;8DAChB,6LAAC;8DAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAOd,6LAAC,2IAAI;wBAAC,WAAU;;0CACd,6LAAC,iJAAU;;kDACT,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC,4OAAa;oDAAC,WAAU;;;;;;;;;;;0DAE3B,6LAAC,gJAAS;gDAAC,WAAU;0DAAwC;;;;;;;;;;;;kDAE/D,6LAAC,sJAAe;wCAAC,WAAU;kDAAU;;;;;;;;;;;;0CAIvC,6LAAC,kJAAW;0CACV,cAAA,6LAAC;oCAAK,WAAU;8CAA2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMvD;GAnFa;KAAA"}},
    {"offset": {"line": 5145, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface InputProps\r\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-10 w-full rounded-md border border-border-subtle bg-bg-raised px-3 py-2 text-sm text-text-primary\",\r\n          \"ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium\",\r\n          \"placeholder:text-text-muted\",\r\n          \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent-primary focus-visible:ring-offset-2\",\r\n          \"disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\nInput.displayName = \"Input\";\r\n\r\nexport { Input };\r\n\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;;;;;;AAKA,IAAM,sBAAQ,2KAAgB,MAC5B,iBAAgC;QAA7B,mBAAA,WAAW,cAAA,MAAS;QAApB;QAAW;;IACZ,qBACE,6LAAC;QACC,MAAM;QACN,WAAW,IAAA,4HAAE,EACX,4GACA,0FACA,+BACA,iHACA,mDACA;QAEF,KAAK;OACD;;;;;AAGV;;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 5190, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/ui/dialog.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\";\r\nimport { X } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Dialog = DialogPrimitive.Root;\r\nconst DialogTrigger = DialogPrimitive.Trigger;\r\nconst DialogClose = DialogPrimitive.Close;\r\n\r\nconst DialogPortal = DialogPrimitive.Portal;\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DialogPortal>\r\n    <DialogOverlay />\r\n    <DialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border-subtle bg-bg-raised p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-xl\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\r\n        <X className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </DialogPrimitive.Close>\r\n    </DialogPrimitive.Content>\r\n  </DialogPortal>\r\n));\r\nDialogContent.displayName = DialogPrimitive.Content.displayName;\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n);\r\nDialogHeader.displayName = \"DialogHeader\";\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n);\r\nDialogFooter.displayName = \"DialogFooter\";\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight text-text-primary\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-text-muted\", className)}\r\n    {...props}\r\n  />\r\n));\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName;\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogTrigger,\r\n  DialogClose,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n};\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;;;;;;AAOA,IAAM,SAAS,6KAAoB;AACnC,IAAM,gBAAgB,gLAAuB;AAC7C,IAAM,cAAc,8KAAqB;AAEzC,IAAM,eAAe,+KAAsB;AAE3C,IAAM,8BAAgB,2KAAgB,CAGpC,iBAA0B;QAAvB,mBAAA,WAAc;QAAd;;yBACH,6LAAC,gLAAuB;QACtB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,0JACA;OAEE;;;;;;KAVF;AAaN,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,IAAM,8BAAgB,2KAAgB,OAGpC,iBAAoC;QAAjC,mBAAA,WAAW,kBAAA,UAAa;QAAxB;QAAW;;yBACd,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,gLAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,4HAAE,EACX,ghBACA;eAEE;;oBAEH;kCACD,6LAAC,8KAAqB;wBAAC,WAAU;;0CAC/B,6LAAC,oMAAC;gCAAC,WAAU;;;;;;0CACb,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,IAAM,eAAe;QACnB,mBAAA,WACG;QADH;;yBAGA,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,sDACA;OAEE;;;;;;MATF;AAYN,aAAa,WAAW,GAAG;AAE3B,IAAM,eAAe;QACnB,mBAAA,WACG;QADH;;yBAGA,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,iEACA;OAEE;;;;;;MATF;AAYN,aAAa,WAAW,GAAG;AAE3B,IAAM,4BAAc,2KAAgB,OAGlC,iBAA0B;QAAvB,mBAAA,WAAc;QAAd;;yBACH,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,uEACA;OAEE;;;;;;;AAGR,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,IAAM,kCAAoB,2KAAgB,OAGxC,iBAA0B;QAAvB,mBAAA,WAAc;QAAd;;yBACH,6LAAC,oLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,2BAA2B;OACrC;;;;;;;AAGR,kBAAkB,WAAW,GAAG,oLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 5384, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/modules/cards/category-filter-modal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Button } from '@/components/ui/button';\r\nimport { X } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface CategoryFilterModalProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  categories: string[];\r\n  selectedCategories: string[];\r\n  onToggleCategory: (category: string) => void;\r\n  onClear: () => void;\r\n}\r\n\r\nexport const CategoryFilterModal: React.FC<CategoryFilterModalProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  categories,\r\n  selectedCategories,\r\n  onToggleCategory,\r\n  onClear,\r\n}) => {\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-2xl max-h-[80vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle>Filter by Category</DialogTitle>\r\n        </DialogHeader>\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <p className=\"text-sm text-text-muted\">\r\n              {selectedCategories.length > 0\r\n                ? `${selectedCategories.length} categor${selectedCategories.length === 1 ? 'y' : 'ies'} selected`\r\n                : 'Select categories to filter concepts'}\r\n            </p>\r\n            {selectedCategories.length > 0 && (\r\n              <Button variant=\"ghost\" size=\"sm\" onClick={onClear}>\r\n                Clear All\r\n              </Button>\r\n            )}\r\n          </div>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {categories.map(category => {\r\n              const isSelected = selectedCategories.includes(category);\r\n              return (\r\n                <Badge\r\n                  key={category}\r\n                  variant={isSelected ? \"default\" : \"outline\"}\r\n                  className={cn(\r\n                    \"cursor-pointer transition-all\",\r\n                    isSelected && \"ring-2 ring-accent-primary\"\r\n                  )}\r\n                  onClick={() => onToggleCategory(category)}\r\n                >\r\n                  {category}\r\n                  {isSelected && <X className=\"w-3 h-3 ml-1\" />}\r\n                </Badge>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\n"],"names":[],"mappings":";;;;;;AAGA;AAMA;AACA;AACA;AACA;AAZA;;;;;;;;;AAuBO,IAAM,sBAA0D;QACrE,aAAA,MACA,qBAAA,cACA,mBAAA,YACA,2BAAA,oBACA,yBAAA,kBACA,gBAAA;IAEA,qBACE,6LAAC,+IAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,6LAAC,sJAAa;YAAC,WAAU;;8BACvB,6LAAC,qJAAY;8BACX,cAAA,6LAAC,oJAAW;kCAAC;;;;;;;;;;;8BAEf,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAE,WAAU;8CACV,mBAAmB,MAAM,GAAG,IACzB,AAAC,GAAsC,OAApC,mBAAmB,MAAM,EAAC,YAAwD,OAA9C,mBAAmB,MAAM,KAAK,IAAI,MAAM,OAAM,eACrF;;;;;;gCAEL,mBAAmB,MAAM,GAAG,mBAC3B,6LAAC,+IAAM;oCAAC,SAAQ;oCAAQ,MAAK;oCAAK,SAAS;8CAAS;;;;;;;;;;;;sCAKxD,6LAAC;4BAAI,WAAU;sCACZ,WAAW,GAAG,CAAC,SAAA;gCACd,IAAM,aAAa,mBAAmB,QAAQ,CAAC;gCAC/C,qBACE,6LAAC,6IAAK;oCAEJ,SAAS,aAAa,YAAY;oCAClC,WAAW,IAAA,4HAAE,EACX,iCACA,cAAc;oCAEhB,SAAS;+CAAM,iBAAiB;;;wCAE/B;wCACA,4BAAc,6LAAC,oMAAC;4CAAC,WAAU;;;;;;;mCATvB;;;;;4BAYX;;;;;;;;;;;;;;;;;;;;;;;AAMZ;KAlDa"}},
    {"offset": {"line": 5514, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/modules/cards/anki-study-mode.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useMemo, useEffect } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { ArrowLeft, ArrowRight, RotateCcw, CheckCircle, XCircle, HelpCircle } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport type { BJJConcept } from '@/types/concepts';\r\n\r\ninterface AnkiStudyModeProps {\r\n  concepts: BJJConcept[];\r\n  onExit: () => void;\r\n  onRate: (id: string, rating: number) => void;\r\n}\r\n\r\ntype StudyPhase = 'question' | 'answer' | 'rating';\r\n\r\n// Self-assessment ratings: Again, Hard, Good, Easy\r\nconst RATINGS = [\r\n  { value: 1, label: 'Again', icon: XCircle, color: 'text-red-400' },\r\n  { value: 2, label: 'Hard', icon: HelpCircle, color: 'text-orange-400' },\r\n  { value: 3, label: 'Good', icon: CheckCircle, color: 'text-green-400' },\r\n  { value: 4, label: 'Easy', icon: CheckCircle, color: 'text-blue-400' },\r\n];\r\n\r\nexport const AnkiStudyMode: React.FC<AnkiStudyModeProps> = ({\r\n  concepts,\r\n  onExit,\r\n  onRate,\r\n}) => {\r\n  const [shuffledConcepts, setShuffledConcepts] = useState<BJJConcept[]>([]);\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [phase, setPhase] = useState<StudyPhase>('question');\r\n  const [flipped, setFlipped] = useState(false);\r\n\r\n  // Shuffle concepts on mount\r\n  useEffect(() => {\r\n    const shuffled = [...concepts].sort(() => Math.random() - 0.5);\r\n    setShuffledConcepts(shuffled);\r\n  }, [concepts]);\r\n\r\n  // Reset card state when moving to a new card\r\n  useEffect(() => {\r\n    setFlipped(false);\r\n    setPhase('question');\r\n  }, [currentIndex]);\r\n\r\n  const current = shuffledConcepts[currentIndex];\r\n  const progress = shuffledConcepts.length > 0 \r\n    ? ((currentIndex + (phase === 'answer' ? 1 : 0)) / shuffledConcepts.length) * 100 \r\n    : 0;\r\n  const isLast = currentIndex >= shuffledConcepts.length - 1 && phase === 'answer';\r\n\r\n  const handleFlip = () => {\r\n    if (phase === 'question') {\r\n      setFlipped(true);\r\n      setPhase('answer');\r\n    }\r\n  };\r\n\r\n  const handleRating = (rating: number) => {\r\n    if (current) {\r\n      onRate(current.id, rating);\r\n    }\r\n    \r\n    if (isLast) {\r\n      // Finished all cards\r\n      onExit();\r\n    } else {\r\n      // Move to next card - useEffect will reset the state\r\n      setCurrentIndex(prev => prev + 1);\r\n    }\r\n  };\r\n\r\n  if (shuffledConcepts.length === 0) {\r\n    return (\r\n      <div className=\"p-6 text-center text-text-muted\">\r\n        No concepts to study.\r\n        <Button onClick={onExit} className=\"mt-4\">Back</Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!current) {\r\n    return (\r\n      <div className=\"p-6 text-center\">\r\n        <p className=\"text-lg font-semibold mb-4\">Study session complete!</p>\r\n        <Button onClick={onExit}>Return to Cards</Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full space-y-6\">\r\n      {/* Progress Bar */}\r\n      <div className=\"space-y-2\">\r\n        <div className=\"flex justify-between text-sm text-text-muted\">\r\n          <span>Card {currentIndex + 1} of {shuffledConcepts.length}</span>\r\n          <span>{Math.round(progress)}%</span>\r\n        </div>\r\n        <div className=\"w-full h-2 bg-bg-raised rounded-full overflow-hidden\">\r\n          <div\r\n            className=\"h-full bg-accent-primary transition-all duration-300\"\r\n            style={{ width: `${progress}%` }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Card */}\r\n      <div className=\"relative min-h-[400px]\">\r\n        <div\r\n          className=\"relative w-full h-full\"\r\n          style={{\r\n            perspective: '1000px',\r\n          }}\r\n        >\r\n          <div\r\n            className={cn(\r\n              \"relative w-full h-full transition-transform duration-500\",\r\n              \"transform-style-preserve-3d\"\r\n            )}\r\n            style={{\r\n              transformStyle: 'preserve-3d',\r\n              transform: flipped ? 'rotateY(180deg)' : 'rotateY(0deg)',\r\n            }}\r\n          >\r\n            {/* Front (Question) */}\r\n            <Card\r\n              className={cn(\r\n                \"absolute inset-0 cursor-pointer\",\r\n                phase === 'question' && \"hover:border-accent-primary\"\r\n              )}\r\n              onClick={phase === 'question' ? handleFlip : undefined}\r\n              style={{\r\n                backfaceVisibility: 'hidden',\r\n                WebkitBackfaceVisibility: 'hidden',\r\n              }}\r\n            >\r\n              <CardContent className=\"p-8 h-full flex items-center justify-center min-h-[400px]\">\r\n                <div className=\"w-full flex flex-col items-center justify-center text-center space-y-4\">\r\n                  <div className=\"mb-2\">\r\n                    <div\r\n                      className=\"w-3 h-3 rounded-full inline-block mr-2\"\r\n                      style={{ backgroundColor: current.color }}\r\n                    />\r\n                    <span className=\"text-sm text-text-muted\">{current.category}</span>\r\n                  </div>\r\n                  <h2 className=\"text-3xl sm:text-4xl font-bold px-4 break-words\">{current.concept}</h2>\r\n                  <p className=\"text-text-muted text-sm\">Click to reveal answer</p>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Back (Answer) */}\r\n            <Card\r\n              className=\"absolute inset-0\"\r\n              style={{\r\n                backfaceVisibility: 'hidden',\r\n                WebkitBackfaceVisibility: 'hidden',\r\n                transform: 'rotateY(180deg)',\r\n              }}\r\n            >\r\n              <CardContent className=\"p-8 h-full flex items-center justify-center min-h-[400px] overflow-y-auto\">\r\n                <div className=\"w-full flex flex-col items-center justify-center text-center space-y-4 max-w-3xl\">\r\n                  <div className=\"mb-2\">\r\n                    <div\r\n                      className=\"w-3 h-3 rounded-full inline-block mr-2\"\r\n                      style={{ backgroundColor: current.color }}\r\n                    />\r\n                    <span className=\"text-sm text-text-muted\">{current.category}</span>\r\n                  </div>\r\n                  <h2 className=\"text-2xl sm:text-3xl font-bold px-4 break-words\">{current.concept}</h2>\r\n                  <div className=\"w-full px-4\">\r\n                    <p className=\"text-base sm:text-lg text-text-primary whitespace-pre-wrap break-words overflow-wrap-anywhere\">\r\n                      {current.description || current.short_description || 'No description available.'}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Controls */}\r\n      {phase === 'answer' && (\r\n        <div className=\"space-y-4\">\r\n          <div className=\"text-center text-sm text-text-muted mb-4\">\r\n            How well did you know this?\r\n          </div>\r\n          <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3\">\r\n            {RATINGS.map(({ value, label, icon: Icon, color }) => (\r\n              <Button\r\n                key={value}\r\n                variant=\"outline\"\r\n                className={cn(\r\n                  \"flex flex-col items-center gap-2 h-auto py-4\",\r\n                  \"hover:border-accent-primary hover:bg-accent-primary/10\"\r\n                )}\r\n                onClick={() => handleRating(value)}\r\n              >\r\n                <Icon className={cn(\"w-6 h-6\", color)} />\r\n                <span className=\"text-xs font-medium\">{label}</span>\r\n              </Button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Navigation */}\r\n      <div className=\"flex justify-between items-center pt-4 border-t border-border-subtle\">\r\n        <Button variant=\"ghost\" onClick={onExit}>\r\n          <ArrowLeft className=\"w-4 h-4 mr-2\" />\r\n          Exit Study\r\n        </Button>\r\n        {phase === 'answer' && (\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={() => {\r\n              setFlipped(false);\r\n              setPhase('question');\r\n            }}\r\n          >\r\n            <RotateCcw className=\"w-4 h-4 mr-2\" />\r\n            Back to Question\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6030, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/modules/cards/cards-view.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Search, Filter, Play } from 'lucide-react';\r\nimport { loadConcepts } from '@/lib/data/load-concepts';\r\nimport { CategoryFilterModal } from './category-filter-modal';\r\nimport { AnkiStudyMode } from './anki-study-mode';\r\nimport type { BJJConcept } from '@/types/concepts';\r\n\r\nexport const CardsView: React.FC = () => {\r\n  const [concepts, setConcepts] = useState<BJJConcept[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [query, setQuery] = useState('');\r\n  const [selectedCategories, setSelectedCategories] = useState<string[]>([]);\r\n  const [showCategoryModal, setShowCategoryModal] = useState(false);\r\n  const [studyMode, setStudyMode] = useState(false);\r\n  const [ratings, setRatings] = useState<Record<string, number>>(() => {\r\n    if (typeof window === 'undefined') return {};\r\n    try {\r\n      const saved = window.localStorage.getItem('cardRatings');\r\n      return saved ? JSON.parse(saved) : {};\r\n    } catch {\r\n      return {};\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadConcepts()\r\n      .then((data) => {\r\n        // Convert ConceptPoint back to BJJConcept format for cards\r\n        const bjjConcepts: BJJConcept[] = data.concepts.map((cp) => {\r\n          // Reverse the coordinate conversion to get back to 0-1 range\r\n          const axis_mental_physical = (cp.x + 1) / 2;\r\n          const axis_self_opponent = (-cp.y + 1) / 2;\r\n          \r\n          return {\r\n            id: cp.id,\r\n            concept: cp.label,\r\n            description: cp.description || '',\r\n            short_description: cp.description || '',\r\n            category: cp.category,\r\n            color: cp.color || '#6B7280',\r\n            axis_self_opponent,\r\n            axis_mental_physical,\r\n            brightness: 0.5,\r\n            size: 1,\r\n          };\r\n        });\r\n        setConcepts(bjjConcepts);\r\n        setLoading(false);\r\n      })\r\n      .catch((error) => {\r\n        console.error('Failed to load concepts:', error);\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  const filtered = useMemo(() => {\r\n    const q = query.trim().toLowerCase();\r\n    const list = concepts.filter(c => {\r\n      if (selectedCategories.length > 0 && !selectedCategories.includes(c.category)) return false;\r\n      if (!q) return true;\r\n      return (\r\n        c.concept.toLowerCase().includes(q) ||\r\n        c.short_description.toLowerCase().includes(q) ||\r\n        c.description.toLowerCase().includes(q)\r\n      );\r\n    });\r\n    // Return filtered list - will be shuffled in AnkiStudyMode\r\n    return list;\r\n  }, [concepts, query, selectedCategories]);\r\n\r\n  const availableCategories = useMemo(() => {\r\n    const cats = new Set<string>();\r\n    concepts.forEach(c => cats.add(c.category));\r\n    return Array.from(cats).sort();\r\n  }, [concepts]);\r\n\r\n  const toggleCategory = (name: string) => {\r\n    setSelectedCategories(prev =>\r\n      prev.includes(name) ? prev.filter(c => c !== name) : [...prev, name]\r\n    );\r\n  };\r\n\r\n  const handleRate = (id: string, rating: number) => {\r\n    const newRatings = { ...ratings, [id]: rating };\r\n    setRatings(newRatings);\r\n    if (typeof window !== 'undefined') {\r\n      window.localStorage.setItem('cardRatings', JSON.stringify(newRatings));\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"w-full p-8 text-center text-text-muted\">\r\n        Loading concepts...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (studyMode && filtered.length > 0) {\r\n    return (\r\n      <AnkiStudyMode\r\n        concepts={filtered}\r\n        onExit={() => setStudyMode(false)}\r\n        onRate={handleRate}\r\n      />\r\n    );\r\n  }\r\n\r\n  const hasFilters = query.trim().length > 0 || selectedCategories.length > 0;\r\n\r\n  return (\r\n    <div className=\"w-full space-y-6\">\r\n      {/* Search and Filters */}\r\n      <div className=\"space-y-4\">\r\n        <div className=\"flex gap-2\">\r\n          <div className=\"relative flex-1\">\r\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-text-muted\" />\r\n            <Input\r\n              type=\"text\"\r\n              placeholder=\"Search concepts...\"\r\n              value={query}\r\n              onChange={(e) => setQuery(e.target.value)}\r\n              className=\"pl-10\"\r\n            />\r\n          </div>\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={() => setShowCategoryModal(true)}\r\n            className=\"relative\"\r\n          >\r\n            <Filter className=\"w-4 h-4 mr-2\" />\r\n            Categories\r\n            {selectedCategories.length > 0 && (\r\n              <span className=\"ml-2 px-1.5 py-0.5 text-xs bg-accent-primary text-white rounded-full\">\r\n                {selectedCategories.length}\r\n              </span>\r\n            )}\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Selected categories display */}\r\n        {selectedCategories.length > 0 && (\r\n          <div className=\"flex flex-wrap gap-2 items-center\">\r\n            <span className=\"text-xs text-text-muted font-medium\">Active filters:</span>\r\n            {selectedCategories.map(category => (\r\n              <Badge\r\n                key={category}\r\n                variant=\"default\"\r\n                className=\"cursor-pointer\"\r\n                onClick={() => toggleCategory(category)}\r\n              >\r\n                {category}\r\n              </Badge>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Results */}\r\n      {hasFilters ? (\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"text-sm text-text-muted\">\r\n              {filtered.length} concept{filtered.length !== 1 ? 's' : ''} found\r\n            </div>\r\n            {filtered.length > 0 && (\r\n              <Button\r\n                onClick={() => setStudyMode(true)}\r\n                size=\"lg\"\r\n                className=\"gap-2\"\r\n              >\r\n                <Play className=\"w-4 h-4\" />\r\n                Study {filtered.length} Cards\r\n              </Button>\r\n            )}\r\n          </div>\r\n          {filtered.length === 0 && (\r\n            <div className=\"text-center text-text-muted py-12\">\r\n              No concepts found. Try adjusting your search or filters.\r\n            </div>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center text-text-muted py-12 space-y-4\">\r\n          <p>Search for concepts or select categories to get started.</p>\r\n          <p className=\"text-sm\">Then click \"Study Cards\" to begin an ANKI-style study session.</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Category Filter Modal */}\r\n      <CategoryFilterModal\r\n        open={showCategoryModal}\r\n        onOpenChange={setShowCategoryModal}\r\n        categories={availableCategories}\r\n        selectedCategories={selectedCategories}\r\n        onToggleCategory={toggleCategory}\r\n        onClear={() => setSelectedCategories([])}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6422, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/modules/breathing/breathing-cycles.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Play, Pause, RotateCcw } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\n\r\ntype ModeKey = 'vagus' | 'box' | 'calf';\r\ntype Phase = 'inhale' | 'exhale' | 'hold1' | 'hold2' | 'up' | 'down';\r\n\r\ninterface ModeConfig {\r\n  name: string;\r\n  info: string;\r\n  phases: Array<{ name: Phase; duration: number; text: string }>;\r\n}\r\n\r\nconst modes: Record<ModeKey, ModeConfig> = {\r\n  vagus: {\r\n    name: 'Vagus Nerve',\r\n    info: 'Activating the vagus nerve helps reduce stress and promotes relaxation. Breathe deeply with your diaphragm.',\r\n    phases: [\r\n      { name: 'inhale', duration: 4, text: 'Breathe In' },\r\n      { name: 'exhale', duration: 8, text: 'Breathe Out' }\r\n    ]\r\n  },\r\n  box: {\r\n    name: 'Box Breathing',\r\n    info: 'Box breathing is used by Navy SEALs and helps improve focus and reduce anxiety.',\r\n    phases: [\r\n      { name: 'inhale', duration: 4, text: 'Breathe In' },\r\n      { name: 'hold1', duration: 4, text: 'Hold' },\r\n      { name: 'exhale', duration: 4, text: 'Breathe Out' },\r\n      { name: 'hold2', duration: 4, text: 'Hold' }\r\n    ]\r\n  },\r\n  calf: {\r\n    name: 'Calf Raises',\r\n    info: 'Calf raises improve circulation and strengthen your lower legs. Rise slowly, hold, then lower with control.',\r\n    phases: [\r\n      { name: 'up', duration: 3, text: 'Rise Up' },\r\n      { name: 'down', duration: 3, text: 'Lower Down' }\r\n    ]\r\n  }\r\n};\r\n\r\nexport const BreathingCycles: React.FC = () => {\r\n  const [currentMode, setCurrentMode] = useState<ModeKey>('vagus');\r\n  const [isActive, setIsActive] = useState(false);\r\n  const [phase, setPhase] = useState<Phase>('inhale');\r\n  const [timeLeft, setTimeLeft] = useState(4);\r\n  const [cycles, setCycles] = useState(0);\r\n  const [showInfo, setShowInfo] = useState(false);\r\n  const intervalRef = useRef<number | null>(null);\r\n  const infoTimeoutRef = useRef<number | null>(null);\r\n\r\n  const currentModeConfig = modes[currentMode];\r\n  const currentPhaseIndex = currentModeConfig.phases.findIndex(p => p.name === phase);\r\n  const currentPhaseConfig = currentModeConfig.phases[currentPhaseIndex];\r\n\r\n  useEffect(() => {\r\n    if (isActive && timeLeft > 0) {\r\n      intervalRef.current = window.setTimeout(() => {\r\n        setTimeLeft(timeLeft - 1);\r\n      }, 1000);\r\n    } else if (isActive && timeLeft === 0) {\r\n      const nextPhaseIndex = (currentPhaseIndex + 1) % currentModeConfig.phases.length;\r\n      const nextPhase = currentModeConfig.phases[nextPhaseIndex];\r\n      \r\n      setPhase(nextPhase.name);\r\n      setTimeLeft(nextPhase.duration);\r\n      \r\n      if (nextPhaseIndex === 0) {\r\n        setCycles(prev => prev + 1);\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      if (intervalRef.current) {\r\n        window.clearTimeout(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n  }, [isActive, timeLeft, currentPhaseIndex, currentModeConfig.phases]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (infoTimeoutRef.current) {\r\n        window.clearTimeout(infoTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const handleStart = () => {\r\n    setIsActive(!isActive);\r\n    if (!isActive) {\r\n      setPhase(currentModeConfig.phases[0].name);\r\n      setTimeLeft(currentModeConfig.phases[0].duration);\r\n    }\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setIsActive(false);\r\n    setPhase(currentModeConfig.phases[0].name);\r\n    setTimeLeft(currentModeConfig.phases[0].duration);\r\n    setCycles(0);\r\n  };\r\n\r\n  const handleModeChange = (mode: ModeKey) => {\r\n    setCurrentMode(mode);\r\n    setIsActive(false);\r\n    setPhase(modes[mode].phases[0].name);\r\n    setTimeLeft(modes[mode].phases[0].duration);\r\n    setCycles(0);\r\n    setShowInfo(true);\r\n    \r\n    if (infoTimeoutRef.current) {\r\n      window.clearTimeout(infoTimeoutRef.current);\r\n    }\r\n    infoTimeoutRef.current = window.setTimeout(() => setShowInfo(false), 4000);\r\n  };\r\n\r\n  const getCircleScale = () => {\r\n    const progress = (currentPhaseConfig.duration - timeLeft) / currentPhaseConfig.duration;\r\n    if (phase === 'inhale' || phase === 'up') {\r\n      return 0.6 + (0.4 * progress);\r\n    } else if (phase === 'exhale' || phase === 'down') {\r\n      return 1 - (0.4 * progress);\r\n    }\r\n    return 1; // for hold phases\r\n  };\r\n\r\n  const getCircleColor = () => {\r\n    if (currentMode === 'calf') return '#10b981'; // green for exercise\r\n    switch(phase) {\r\n      case 'inhale': return '#3b82f6';\r\n      case 'exhale': return '#8b5cf6';\r\n      case 'hold1':\r\n      case 'hold2': return '#f59e0b';\r\n      case 'up': return '#10b981';\r\n      case 'down': return '#ef4444';\r\n      default: return '#3b82f6';\r\n    }\r\n  };\r\n\r\n  const circleScale = getCircleScale();\r\n  const circleColor = getCircleColor();\r\n\r\n  return (\r\n    <div className=\"w-full space-y-6 py-4 min-h-[600px] flex flex-col items-center justify-center\">\r\n      {/* Mode Selection */}\r\n      <div className=\"flex flex-wrap justify-center gap-2\">\r\n        {(Object.entries(modes) as [ModeKey, ModeConfig][]).map(([key, mode]) => (\r\n          <button\r\n            key={key}\r\n            onClick={() => handleModeChange(key)}\r\n            className={cn(\r\n              \"px-4 py-2 rounded-full text-sm font-medium transition-all\",\r\n              \"backdrop-blur-sm\",\r\n              currentMode === key\r\n                ? \"bg-white text-purple-600 shadow-lg\"\r\n                : \"bg-white/20 text-white hover:bg-white/30\"\r\n            )}\r\n          >\r\n            {mode.name}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Info Message */}\r\n      {showInfo && (\r\n        <div className=\"bg-white/10 backdrop-blur-sm rounded-xl p-4 max-w-md mx-auto text-center text-white text-sm leading-relaxed\">\r\n          {currentModeConfig.info}\r\n          {currentMode === 'calf' && (\r\n            <div className=\"mt-2 text-white/80\">\r\n              Goal: 10 reps\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Cycles Counter */}\r\n      <div className=\"text-center text-white/80 text-lg font-mono\">\r\n        {currentMode === 'calf' ? 'Reps' : 'Cycles'}: <span className=\"font-bold text-white\">{cycles}</span>\r\n        {currentMode === 'calf' && cycles < 10 && (\r\n          <span className=\"text-sm text-white/60 ml-2\">/ 10</span>\r\n        )}\r\n      </div>\r\n\r\n      {/* Breathing Circle */}\r\n      <div className=\"relative flex items-center justify-center my-8\">\r\n        <div className=\"relative w-[280px] h-[280px] sm:w-[320px] sm:h-[320px] flex items-center justify-center\">\r\n          {/* Outer ring */}\r\n          <div className={cn(\r\n            \"absolute inset-0 rounded-full border-2 border-white/20\",\r\n            isActive && \"animate-pulse\"\r\n          )} />\r\n          \r\n          {/* Progress indicators */}\r\n          <div className=\"absolute inset-4 rounded-full border border-white/10\" />\r\n          \r\n          {/* Main breathing circle */}\r\n          <div\r\n            className={cn(\r\n              \"rounded-full flex items-center justify-center text-white font-mono transition-all duration-1000 ease-in-out\",\r\n              isActive && \"animate-pulse\"\r\n            )}\r\n            style={{\r\n              width: `${circleScale * 200}px`,\r\n              height: `${circleScale * 200}px`,\r\n              backgroundColor: circleColor,\r\n              boxShadow: `0 0 60px ${circleColor}60, inset 0 0 20px rgba(255, 255, 255, 0.1)`,\r\n            }}\r\n          >\r\n            <div className=\"text-center\">\r\n              <div className=\"text-lg font-medium mb-1\">\r\n                {currentPhaseConfig?.text || 'Ready'}\r\n              </div>\r\n              <div className=\"text-5xl font-bold\">\r\n                {timeLeft}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Controls */}\r\n      <div className=\"flex justify-center gap-4\">\r\n        <Button\r\n          size=\"lg\"\r\n          onClick={handleStart}\r\n          className=\"bg-white text-purple-600 hover:bg-white/90 shadow-lg min-w-[120px]\"\r\n        >\r\n          {isActive ? (\r\n            <>\r\n              <Pause className=\"w-4 h-4 mr-2\" />\r\n              Pause\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Play className=\"w-4 h-4 mr-2\" />\r\n              Start\r\n            </>\r\n          )}\r\n        </Button>\r\n        \r\n        <Button\r\n          size=\"lg\"\r\n          variant=\"outline\"\r\n          onClick={handleReset}\r\n          className=\"bg-white/20 text-white border-white/30 hover:bg-white/30 backdrop-blur-sm\"\r\n        >\r\n          <RotateCcw className=\"w-4 h-4 mr-2\" />\r\n          Reset\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Progress indicator for calf raises */}\r\n      {currentMode === 'calf' && cycles < 10 && (\r\n        <div className=\"mt-6 max-w-xs mx-auto\">\r\n          <div className=\"bg-white/20 rounded-lg h-2 overflow-hidden\">\r\n            <div\r\n              className=\"bg-gradient-to-r from-green-500 to-blue-500 h-2 rounded-lg transition-all duration-300\"\r\n              style={{ width: `${(cycles / 10) * 100}%` }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Completion message for calf raises */}\r\n      {currentMode === 'calf' && cycles >= 10 && (\r\n        <div className=\"mt-6 text-center text-green-400 font-medium text-lg\">\r\n          Great job! You've completed 10 reps! 🎉\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n"],"names":[],"mappings":"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"}}]
}