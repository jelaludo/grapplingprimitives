{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/data/concepts.ts"],"sourcesContent":["export interface ConceptPoint {\r\n  id: string;\r\n  label: string;\r\n  x: number;            // normalized -1 to 1\r\n  y: number;            // same scale\r\n  category: string;     // category name\r\n  description?: string;\r\n  color?: string;       // optional color override\r\n}\r\n\r\n// Initial concepts - this will be populated from the existing BJJConcept data\r\n// For now, we'll create a few example concepts\r\nexport const CONCEPTS: ConceptPoint[] = [\r\n  {\r\n    id: \"empathy\",\r\n    label: \"Empathy\",\r\n    x: 0.72,\r\n    y: 0.41,\r\n    category: \"Grappling Primitives\",\r\n    description: \"Understanding your opponent's position and intentions\",\r\n  },\r\n  {\r\n    id: \"pressure\",\r\n    label: \"Pressure\",\r\n    x: -0.35,\r\n    y: -0.62,\r\n    category: \"Physical Techniques\",\r\n    description: \"Applying controlled pressure to control your opponent\",\r\n  },\r\n  {\r\n    id: \"timing\",\r\n    label: \"Timing\",\r\n    x: 0.58,\r\n    y: 0.73,\r\n    category: \"Mental Skills\",\r\n    description: \"Recognizing and executing techniques at the right moment\",\r\n  },\r\n  {\r\n    id: \"balance\",\r\n    label: \"Balance\",\r\n    x: -0.12,\r\n    y: 0.25,\r\n    category: \"Physical Techniques\",\r\n    description: \"Maintaining your own balance while disrupting your opponent's\",\r\n  },\r\n];\r\n\r\n// Helper function to convert BJJConcept to ConceptPoint\r\n// The data uses 0-1 range, we need to convert to -1 to 1 for our coordinate system\r\n// IMPORTANT: The old D3 code used:\r\n//   X axis = axis_mental_physical (0=Mental/left, 1=Physical/right)\r\n//   Y axis = axis_self_opponent (0=Opponent/bottom, 1=Self/top, inverted)\r\n// We need to match this mapping for consistency\r\nexport function convertBJJConceptToConceptPoint(\r\n  concept: {\r\n    id: string;\r\n    concept: string;\r\n    description?: string;\r\n    category: string;\r\n    axis_self_opponent: number; // 0-1 range: 0=Opponent, 1=Self\r\n    axis_mental_physical: number; // 0-1 range: 0=Mental, 1=Physical\r\n    color?: string;\r\n  }\r\n): ConceptPoint {\r\n  // Convert 0-1 range to -1 to 1 range\r\n  // X axis: axis_mental_physical (0=Mental/left, 1=Physical/right)\r\n  // Y axis: axis_self_opponent (0=Opponent/bottom, 1=Self/top)\r\n  // In our coordinate system: -1 to 1, where center is 0\r\n  // SVG Y increases downward, so we invert: Self (1) should be at top (-1)\r\n  const x = (concept.axis_mental_physical - 0.5) * 2; // 0->-1 (Mental/left), 0.5->0, 1->1 (Physical/right)\r\n  const y = -((concept.axis_self_opponent - 0.5) * 2); // 0->1 (Opponent/bottom), 0.5->0, 1->-1 (Self/top)\r\n  \r\n  return {\r\n    id: concept.id,\r\n    label: concept.concept,\r\n    x: x, // Now in -1 to 1 range\r\n    y: y, // Now in -1 to 1 range, inverted so Self is at top\r\n    category: concept.category,\r\n    description: concept.description,\r\n    color: concept.color,\r\n  };\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;AAYO,MAAM,WAA2B;IACtC;QACE,IAAI;QACJ,OAAO;QACP,GAAG;QACH,GAAG;QACH,UAAU;QACV,aAAa;IACf;IACA;QACE,IAAI;QACJ,OAAO;QACP,GAAG,CAAC;QACJ,GAAG,CAAC;QACJ,UAAU;QACV,aAAa;IACf;IACA;QACE,IAAI;QACJ,OAAO;QACP,GAAG;QACH,GAAG;QACH,UAAU;QACV,aAAa;IACf;IACA;QACE,IAAI;QACJ,OAAO;QACP,GAAG,CAAC;QACJ,GAAG;QACH,UAAU;QACV,aAAa;IACf;CACD;AAQM,SAAS,gCACd,OAQC;IAED,qCAAqC;IACrC,iEAAiE;IACjE,6DAA6D;IAC7D,uDAAuD;IACvD,yEAAyE;IACzE,MAAM,IAAI,CAAC,QAAQ,oBAAoB,GAAG,GAAG,IAAI,GAAG,qDAAqD;IACzG,MAAM,IAAI,CAAC,CAAC,CAAC,QAAQ,kBAAkB,GAAG,GAAG,IAAI,CAAC,GAAG,mDAAmD;IAExG,OAAO;QACL,IAAI,QAAQ,EAAE;QACd,OAAO,QAAQ,OAAO;QACtB,GAAG;QACH,GAAG;QACH,UAAU,QAAQ,QAAQ;QAC1B,aAAa,QAAQ,WAAW;QAChC,OAAO,QAAQ,KAAK;IACtB;AACF"}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/lib/matrix/panzoom.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useCallback, useRef, useEffect } from \"react\";\r\n\r\nexport interface PanZoomState {\r\n  zoom: number;\r\n  translateX: number;\r\n  translateY: number;\r\n}\r\n\r\nconst MIN_ZOOM = 0.5;\r\nconst MAX_ZOOM = 5;\r\nconst ZOOM_STEP = 0.1;\r\nconst DEFAULT_ZOOM = 1;\r\n\r\nexport function usePanZoom(initialState?: Partial<PanZoomState>) {\r\n  const [state, setState] = useState<PanZoomState>({\r\n    zoom: initialState?.zoom ?? DEFAULT_ZOOM,\r\n    translateX: initialState?.translateX ?? 0,\r\n    translateY: initialState?.translateY ?? 0,\r\n  });\r\n\r\n  const isPanning = useRef(false);\r\n  const lastPanPoint = useRef({ x: 0, y: 0 });\r\n\r\n  const zoomBy = useCallback((delta: number, centerX?: number, centerY?: number, width?: number, height?: number) => {\r\n    setState((prev) => {\r\n      const newZoom = Math.max(MIN_ZOOM, Math.min(MAX_ZOOM, prev.zoom + delta));\r\n      const zoomRatio = newZoom / prev.zoom;\r\n\r\n      // If center point is provided, zoom towards that point\r\n      // centerX/Y are in screen pixel coordinates\r\n      // The transform is: scale(z) translate(tx/z, ty/z)\r\n      // SVG applies right-to-left: translate first, then scale\r\n      // So: translate(tx/z, ty/z) then scale(z)\r\n      // A data point at (dx, dy) becomes: ((dx + tx/z) * z, (dy + ty/z) * z) = (dx*z + tx, dy*z + ty)\r\n      // \r\n      // To keep a screen point (sx, sy) fixed:\r\n      // 1. Convert screen to viewBox coordinates (before transform): vx = (sx / width) * 4 - 2\r\n      // 2. Find what data point is currently at this viewBox position: dx = (vx - tx) / z\r\n      // 3. After zoom, we want the same data point at the same screen position\r\n      // 4. So: vx' = dx * z' + tx' = vx\r\n      // 5. Solving: tx' = vx - dx * z' = vx - (vx - tx) * z' / z = vx * (1 - z'/z) + tx * z'/z\r\n      if (centerX !== undefined && centerY !== undefined && width && height) {\r\n        // Convert screen pixel to data coordinate (in viewBox space -2 to 2)\r\n        // Current viewBox: minX, minY, size (where size = 4/zoom)\r\n        const currentViewBoxSize = 4 / prev.zoom;\r\n        const currentMinX = -2 - prev.translateX - (currentViewBoxSize - 4) / 2;\r\n        const currentMinY = -2 - prev.translateY - (currentViewBoxSize - 4) / 2;\r\n        \r\n        // Screen point in viewBox coordinates (where the dot actually is)\r\n        const dataX = currentMinX + (centerX / width) * currentViewBoxSize;\r\n        const dataY = currentMinY + (centerY / height) * currentViewBoxSize;\r\n        \r\n        // After zoom, we want this same data point to stay at the same screen position\r\n        // New viewBox size\r\n        const newViewBoxSize = 4 / newZoom;\r\n        // Calculate new translate to keep dataX at the same screen position\r\n        // dataX = newMinX + (centerX / width) * newViewBoxSize\r\n        // So: newMinX = dataX - (centerX / width) * newViewBoxSize\r\n        const newMinX = dataX - (centerX / width) * newViewBoxSize;\r\n        const newMinY = dataY - (centerY / height) * newViewBoxSize;\r\n        \r\n        // Convert back to translate coordinates\r\n        // newMinX = -2 - newTranslateX - (newViewBoxSize - 4) / 2\r\n        // So: newTranslateX = -2 - newMinX - (newViewBoxSize - 4) / 2\r\n        const newTranslateX = -2 - newMinX - (newViewBoxSize - 4) / 2;\r\n        const newTranslateY = -2 - newMinY - (newViewBoxSize - 4) / 2;\r\n        \r\n        return {\r\n          zoom: newZoom,\r\n          translateX: newTranslateX,\r\n          translateY: newTranslateY,\r\n        };\r\n      }\r\n\r\n      // Zoom without center point - zoom around current center\r\n      return {\r\n        ...prev,\r\n        zoom: newZoom,\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  const panBy = useCallback((deltaX: number, deltaY: number) => {\r\n    // deltaX and deltaY are in viewBox units\r\n    // When panning, we move the viewBox, which means we adjust translate\r\n    // Since viewBox moves in the opposite direction of the pan, we subtract\r\n    setState((prev) => ({\r\n      translateX: prev.translateX - deltaX,\r\n      translateY: prev.translateY - deltaY,\r\n      zoom: prev.zoom,\r\n    }));\r\n  }, []);\r\n\r\n  const reset = useCallback(() => {\r\n    setState({\r\n      zoom: DEFAULT_ZOOM,\r\n      translateX: 0,\r\n      translateY: 0,\r\n    });\r\n  }, []);\r\n\r\n  const setZoom = useCallback((zoom: number) => {\r\n    setState((prev) => ({\r\n      ...prev,\r\n      zoom: Math.max(MIN_ZOOM, Math.min(MAX_ZOOM, zoom)),\r\n    }));\r\n  }, []);\r\n\r\n  const zoomIn = useCallback(() => {\r\n    zoomBy(ZOOM_STEP);\r\n  }, [zoomBy]);\r\n\r\n  const zoomOut = useCallback(() => {\r\n    zoomBy(-ZOOM_STEP);\r\n  }, [zoomBy]);\r\n\r\n  // Mouse pan handlers\r\n  const handleMouseDown = useCallback((e: React.MouseEvent) => {\r\n    if (e.button === 0) { // Left mouse button\r\n      isPanning.current = true;\r\n      lastPanPoint.current = { x: e.clientX, y: e.clientY };\r\n      e.preventDefault();\r\n    }\r\n  }, []);\r\n\r\n  const handleMouseMove = useCallback((e: React.MouseEvent, convertToViewBox?: (deltaX: number, deltaY: number) => { x: number; y: number }) => {\r\n    if (isPanning.current) {\r\n      const deltaX = e.clientX - lastPanPoint.current.x;\r\n      const deltaY = e.clientY - lastPanPoint.current.y;\r\n      // If conversion function provided, use it (for viewBox units)\r\n      // Otherwise use screen pixels (legacy behavior)\r\n      if (convertToViewBox) {\r\n        const viewBoxDelta = convertToViewBox(deltaX, deltaY);\r\n        panBy(viewBoxDelta.x, viewBoxDelta.y);\r\n      } else {\r\n        panBy(deltaX, deltaY);\r\n      }\r\n      lastPanPoint.current = { x: e.clientX, y: e.clientY };\r\n      e.preventDefault();\r\n    }\r\n  }, [panBy]);\r\n\r\n  const handleMouseUp = useCallback(() => {\r\n    isPanning.current = false;\r\n  }, []);\r\n\r\n  const handleWheel = useCallback((e: React.WheelEvent) => {\r\n    e.preventDefault();\r\n    const delta = e.deltaY > 0 ? -ZOOM_STEP : ZOOM_STEP;\r\n    const rect = e.currentTarget.getBoundingClientRect();\r\n    // Get mouse position relative to the container (in screen pixels)\r\n    const centerX = e.clientX - rect.left;\r\n    const centerY = e.clientY - rect.top;\r\n    // Zoom towards the mouse position\r\n    zoomBy(delta, centerX, centerY);\r\n  }, [zoomBy]);\r\n\r\n  // Touch handlers\r\n  const touchStartRef = useRef<{ x: number; y: number; distance: number } | null>(null);\r\n\r\n  const handleTouchStart = useCallback((e: React.TouchEvent) => {\r\n    if (e.touches.length === 1) {\r\n      touchStartRef.current = {\r\n        x: e.touches[0].clientX,\r\n        y: e.touches[0].clientY,\r\n        distance: 0,\r\n      };\r\n    } else if (e.touches.length === 2) {\r\n      const touch1 = e.touches[0];\r\n      const touch2 = e.touches[1];\r\n      const distance = Math.hypot(\r\n        touch2.clientX - touch1.clientX,\r\n        touch2.clientY - touch1.clientY\r\n      );\r\n      touchStartRef.current = {\r\n        x: (touch1.clientX + touch2.clientX) / 2,\r\n        y: (touch1.clientY + touch2.clientY) / 2,\r\n        distance,\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  const handleTouchMove = useCallback((e: React.TouchEvent, convertToViewBox?: (deltaX: number, deltaY: number) => { x: number; y: number }, width?: number, height?: number) => {\r\n    if (!touchStartRef.current) return;\r\n\r\n    if (e.touches.length === 1 && touchStartRef.current.distance === 0) {\r\n      // Single finger pan\r\n      const deltaX = e.touches[0].clientX - touchStartRef.current.x;\r\n      const deltaY = e.touches[0].clientY - touchStartRef.current.y;\r\n      if (convertToViewBox) {\r\n        const viewBoxDelta = convertToViewBox(deltaX, deltaY);\r\n        panBy(viewBoxDelta.x, viewBoxDelta.y);\r\n      } else {\r\n        panBy(deltaX, deltaY);\r\n      }\r\n      touchStartRef.current.x = e.touches[0].clientX;\r\n      touchStartRef.current.y = e.touches[0].clientY;\r\n    } else if (e.touches.length === 2 && touchStartRef.current.distance > 0) {\r\n      // Two finger pinch zoom\r\n      const touch1 = e.touches[0];\r\n      const touch2 = e.touches[1];\r\n      const distance = Math.hypot(\r\n        touch2.clientX - touch1.clientX,\r\n        touch2.clientY - touch1.clientY\r\n      );\r\n      const scale = distance / touchStartRef.current.distance;\r\n      const rect = e.currentTarget.getBoundingClientRect();\r\n      const centerX = (touchStartRef.current.x - rect.left);\r\n      const centerY = (touchStartRef.current.y - rect.top);\r\n      zoomBy((scale - 1) * ZOOM_STEP * 2, centerX, centerY, width, height);\r\n      touchStartRef.current.distance = distance;\r\n    }\r\n  }, [panBy, zoomBy]);\r\n\r\n  const handleTouchEnd = useCallback(() => {\r\n    touchStartRef.current = null;\r\n  }, []);\r\n\r\n  return {\r\n    state,\r\n    zoomBy,\r\n    panBy,\r\n    reset,\r\n    setZoom,\r\n    zoomIn,\r\n    zoomOut,\r\n    handlers: {\r\n      onMouseDown: handleMouseDown,\r\n      onMouseMove: handleMouseMove,\r\n      onMouseUp: handleMouseUp,\r\n      onMouseLeave: handleMouseUp,\r\n      onWheel: handleWheel,\r\n      onTouchStart: handleTouchStart,\r\n      onTouchMove: handleTouchMove,\r\n      onTouchEnd: handleTouchEnd,\r\n    },\r\n  };\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 297, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/lib/matrix/scales.ts"],"sourcesContent":["/**\r\n * Scale helpers for converting between normalized coordinates (-1 to 1) and screen coordinates\r\n */\r\n\r\nexport interface Viewport {\r\n  width: number;\r\n  height: number;\r\n  translateX: number;\r\n  translateY: number;\r\n  zoom: number;\r\n}\r\n\r\n/**\r\n * Convert normalized coordinate (-1 to 1) to screen coordinate\r\n */\r\nexport function normalizedToScreen(\r\n  normalized: number,\r\n  viewport: Viewport,\r\n  axis: 'x' | 'y'\r\n): number {\r\n  const center = axis === 'x' ? viewport.width / 2 : viewport.height / 2;\r\n  const range = axis === 'x' ? viewport.width : viewport.height;\r\n  const scale = (range * viewport.zoom) / 2;\r\n  \r\n  return center + normalized * scale + (axis === 'x' ? viewport.translateX : viewport.translateY);\r\n}\r\n\r\n/**\r\n * Convert screen coordinate to normalized coordinate (-1 to 1)\r\n */\r\nexport function screenToNormalized(\r\n  screen: number,\r\n  viewport: Viewport,\r\n  axis: 'x' | 'y'\r\n): number {\r\n  const center = axis === 'x' ? viewport.width / 2 : viewport.height / 2;\r\n  const range = axis === 'x' ? viewport.width : viewport.height;\r\n  const scale = (range * viewport.zoom) / 2;\r\n  \r\n  return (screen - center - (axis === 'x' ? viewport.translateX : viewport.translateY)) / scale;\r\n}\r\n\r\n/**\r\n * Clamp a value between min and max\r\n */\r\nexport function clamp(value: number, min: number, max: number): number {\r\n  return Math.min(Math.max(value, min), max);\r\n}\r\n\r\n/**\r\n * Get the viewBox string for SVG\r\n * For our normalized coordinate system (-1 to 1), we use a dynamic viewBox\r\n * The viewBox controls what area we see - dots stay at fixed coordinates\r\n * Format: \"minX minY width height\"\r\n * \r\n * To zoom: reduce width/height (smaller viewBox = more zoom)\r\n * To pan: change minX/minY (move the viewBox window)\r\n * \r\n * Base viewBox: -2 to 2 (shows full coordinate space)\r\n * When zoom=1, translate=0: viewBox = \"-2 -2 4 4\"\r\n */\r\nexport function getViewBox(viewport: Viewport): string {\r\n  // Base viewBox is -2 to 2 (width 4, height 4)\r\n  // Zoom: viewBox size = 4 / zoom (zoom=2 means size=2, showing 2x zoom)\r\n  const viewBoxSize = 4 / viewport.zoom;\r\n  \r\n  // Pan: translate moves the viewBox window\r\n  // Base center is at (0, 0) in viewBox coordinates\r\n  // translateX/Y moves the center of what we see\r\n  const minX = -2 - viewport.translateX - (viewBoxSize - 4) / 2;\r\n  const minY = -2 - viewport.translateY - (viewBoxSize - 4) / 2;\r\n  \r\n  return `${minX} ${minY} ${viewBoxSize} ${viewBoxSize}`;\r\n}\r\n\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;AAaM,SAAS,mBACd,UAAkB,EAClB,QAAkB,EAClB,IAAe;IAEf,MAAM,SAAS,SAAS,MAAM,SAAS,KAAK,GAAG,IAAI,SAAS,MAAM,GAAG;IACrE,MAAM,QAAQ,SAAS,MAAM,SAAS,KAAK,GAAG,SAAS,MAAM;IAC7D,MAAM,QAAQ,AAAC,QAAQ,SAAS,IAAI,GAAI;IAExC,OAAO,SAAS,aAAa,QAAQ,CAAC,SAAS,MAAM,SAAS,UAAU,GAAG,SAAS,UAAU;AAChG;AAKO,SAAS,mBACd,MAAc,EACd,QAAkB,EAClB,IAAe;IAEf,MAAM,SAAS,SAAS,MAAM,SAAS,KAAK,GAAG,IAAI,SAAS,MAAM,GAAG;IACrE,MAAM,QAAQ,SAAS,MAAM,SAAS,KAAK,GAAG,SAAS,MAAM;IAC7D,MAAM,QAAQ,AAAC,QAAQ,SAAS,IAAI,GAAI;IAExC,OAAO,CAAC,SAAS,SAAS,CAAC,SAAS,MAAM,SAAS,UAAU,GAAG,SAAS,UAAU,CAAC,IAAI;AAC1F;AAKO,SAAS,MAAM,KAAa,EAAE,GAAW,EAAE,GAAW;IAC3D,OAAO,KAAK,GAAG,CAAC,KAAK,GAAG,CAAC,OAAO,MAAM;AACxC;AAcO,SAAS,WAAW,QAAkB;IAC3C,8CAA8C;IAC9C,uEAAuE;IACvE,MAAM,cAAc,IAAI,SAAS,IAAI;IAErC,0CAA0C;IAC1C,kDAAkD;IAClD,+CAA+C;IAC/C,MAAM,OAAO,CAAC,IAAI,SAAS,UAAU,GAAG,CAAC,cAAc,CAAC,IAAI;IAC5D,MAAM,OAAO,CAAC,IAAI,SAAS,UAAU,GAAG,CAAC,cAAc,CAAC,IAAI;IAE5D,OAAO,GAAG,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,YAAY,CAAC,EAAE,aAAa;AACxD"}},
    {"offset": {"line": 339, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-xl border border-border-subtle bg-bg-raised text-text-primary shadow-card\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nCard.displayName = \"Card\";\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardHeader.displayName = \"CardHeader\";\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\r\n      \"font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nCardTitle.displayName = \"CardTitle\";\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn(\"text-sm text-text-muted\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardDescription.displayName = \"CardDescription\";\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n));\r\nCardContent.displayName = \"CardContent\";\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardFooter.displayName = \"CardFooter\";\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,6CACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,2BAA2B;QACxC,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 424, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"border-transparent bg-accent-primary text-white\",\r\n        secondary: \"border-transparent bg-bg-raised text-text-primary\",\r\n        destructive: \"border-transparent bg-red-600 text-white\",\r\n        outline: \"text-text-primary border-border-subtle\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n);\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  );\r\n}\r\n\r\nexport { Badge, badgeVariants };\r\n\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,WAAW;YACX,aAAa;YACb,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,8OAAC;QAAI,WAAW,IAAA,yHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE"}},
    {"offset": {"line": 466, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/modules/concept-matrix/matrix-controls.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { ZoomIn, ZoomOut, RotateCcw, Grid3x3 } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface MatrixControlsProps {\r\n  onZoomIn: () => void;\r\n  onZoomOut: () => void;\r\n  onReset: () => void;\r\n  onQuadrant?: (quadrant: 1 | 2 | 3 | 4) => void;\r\n  className?: string;\r\n}\r\n\r\nexport function MatrixControls({\r\n  onZoomIn,\r\n  onZoomOut,\r\n  onReset,\r\n  onQuadrant,\r\n  className,\r\n}: MatrixControlsProps) {\r\n  return (\r\n    <div className={cn(\"flex flex-col gap-2\", className)}>\r\n      {/* Zoom controls */}\r\n      <div className=\"flex flex-col gap-1\">\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"icon\"\r\n          onClick={onZoomIn}\r\n          className=\"h-10 w-10\"\r\n          aria-label=\"Zoom in\"\r\n        >\r\n          <ZoomIn className=\"h-4 w-4\" />\r\n        </Button>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"icon\"\r\n          onClick={onZoomOut}\r\n          className=\"h-10 w-10\"\r\n          aria-label=\"Zoom out\"\r\n        >\r\n          <ZoomOut className=\"h-4 w-4\" />\r\n        </Button>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"icon\"\r\n          onClick={onReset}\r\n          className=\"h-10 w-10\"\r\n          aria-label=\"Reset view\"\r\n        >\r\n          <RotateCcw className=\"h-4 w-4\" />\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Quadrant navigation */}\r\n      {onQuadrant && (\r\n        <div className=\"grid grid-cols-2 gap-1 mt-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => onQuadrant(1)}\r\n            className=\"h-8 text-xs\"\r\n            aria-label=\"Quadrant 1\"\r\n          >\r\n            Q1\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => onQuadrant(2)}\r\n            className=\"h-8 text-xs\"\r\n            aria-label=\"Quadrant 2\"\r\n          >\r\n            Q2\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => onQuadrant(3)}\r\n            className=\"h-8 text-xs\"\r\n            aria-label=\"Quadrant 3\"\r\n          >\r\n            Q3\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => onQuadrant(4)}\r\n            className=\"h-8 text-xs\"\r\n            aria-label=\"Quadrant 4\"\r\n          >\r\n            Q4\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AACA;AAJA;;;;;AAcO,SAAS,eAAe,EAC7B,QAAQ,EACR,SAAS,EACT,OAAO,EACP,UAAU,EACV,SAAS,EACW;IACpB,qBACE,8OAAC;QAAI,WAAW,IAAA,yHAAE,EAAC,uBAAuB;;0BAExC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,4IAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS;wBACT,WAAU;wBACV,cAAW;kCAEX,cAAA,8OAAC,oNAAM;4BAAC,WAAU;;;;;;;;;;;kCAEpB,8OAAC,4IAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS;wBACT,WAAU;wBACV,cAAW;kCAEX,cAAA,8OAAC,uNAAO;4BAAC,WAAU;;;;;;;;;;;kCAErB,8OAAC,4IAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS;wBACT,WAAU;wBACV,cAAW;kCAEX,cAAA,8OAAC,6NAAS;4BAAC,WAAU;;;;;;;;;;;;;;;;;YAKxB,4BACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,4IAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS,IAAM,WAAW;wBAC1B,WAAU;wBACV,cAAW;kCACZ;;;;;;kCAGD,8OAAC,4IAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS,IAAM,WAAW;wBAC1B,WAAU;wBACV,cAAW;kCACZ;;;;;;kCAGD,8OAAC,4IAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS,IAAM,WAAW;wBAC1B,WAAU;wBACV,cAAW;kCACZ;;;;;;kCAGD,8OAAC,4IAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS,IAAM,WAAW;wBAC1B,WAAU;wBACV,cAAW;kCACZ;;;;;;;;;;;;;;;;;;AAOX"}},
    {"offset": {"line": 616, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/lib/data/load-concepts.ts"],"sourcesContent":["import { ConceptPoint, convertBJJConceptToConceptPoint } from \"@/data/concepts\";\r\nimport type { BJJConcept } from \"@/types/concepts\";\r\n\r\nexport interface ConceptData {\r\n  concepts: ConceptPoint[];\r\n  categories: Array<{ \r\n    name: string; \r\n    color: string;\r\n    xAxis?: { left: string; right: string };\r\n    yAxis?: { bottom: string; top: string };\r\n  }>;\r\n}\r\n\r\n/**\r\n * Load concepts from the production JSON file\r\n * This works in both client and server components\r\n */\r\nexport async function loadConcepts(): Promise<ConceptData> {\r\n  try {\r\n    // In Next.js, we can import JSON directly or fetch it\r\n    // For static export, we'll use a fetch that works at build time\r\n    const response = await fetch(\"/data/BJJMasterList.json\", {\r\n      cache: \"force-cache\", // Use cached version for static builds\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`Failed to load concepts: ${response.status}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    \r\n    if (!data.skillsMasterList || !Array.isArray(data.skillsMasterList)) {\r\n      throw new Error(\"Invalid data format\");\r\n    }\r\n\r\n    // Convert BJJConcept to ConceptPoint and handle duplicates\r\n    // Use a Set to track seen IDs and ensure uniqueness\r\n    const seenIds = new Set<string>();\r\n    const concepts: ConceptPoint[] = [];\r\n    \r\n    data.skillsMasterList.forEach((concept: BJJConcept, index: number) => {\r\n      // Create a base ID\r\n      const baseId = concept.id || `concept-${index}`;\r\n      let uniqueId = baseId;\r\n      let duplicateCount = 0;\r\n      \r\n      // If we've seen this ID before, append a counter to make it unique\r\n      while (seenIds.has(uniqueId)) {\r\n        duplicateCount++;\r\n        uniqueId = `${baseId}-dup-${duplicateCount}`;\r\n      }\r\n      \r\n      seenIds.add(uniqueId);\r\n      \r\n      concepts.push(convertBJJConceptToConceptPoint({\r\n        id: uniqueId,\r\n        concept: concept.concept,\r\n        description: concept.description || concept.short_description,\r\n        category: concept.category,\r\n        axis_self_opponent: concept.axis_self_opponent,\r\n        axis_mental_physical: concept.axis_mental_physical,\r\n        color: concept.color,\r\n      }));\r\n    });\r\n    \r\n    // Log if we found duplicates\r\n    if (concepts.length !== data.skillsMasterList.length) {\r\n      console.warn(`Found ${data.skillsMasterList.length - concepts.length} duplicate concept IDs`);\r\n    }\r\n\r\n    // Extract unique categories with colors and axis labels\r\n    const categoryMap = new Map<string, { color: string; xAxis?: { left: string; right: string }; yAxis?: { bottom: string; top: string } }>();\r\n    if (data.categories && Array.isArray(data.categories)) {\r\n      data.categories.forEach((cat: any) => {\r\n        if (cat.name && cat.color) {\r\n          categoryMap.set(cat.name, {\r\n            color: cat.color,\r\n            xAxis: cat.xAxis,\r\n            yAxis: cat.yAxis,\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    // Add category colors to concepts\r\n    concepts.forEach((concept) => {\r\n      if (!concept.color && categoryMap.has(concept.category)) {\r\n        concept.color = categoryMap.get(concept.category)!.color;\r\n      }\r\n    });\r\n\r\n    return {\r\n      concepts,\r\n      categories: Array.from(categoryMap.entries()).map(([name, data]) => ({\r\n        name,\r\n        color: data.color,\r\n        xAxis: data.xAxis,\r\n        yAxis: data.yAxis,\r\n      })),\r\n    };\r\n  } catch (error) {\r\n    console.error(\"Failed to load concepts:\", error);\r\n    // Return empty data on error\r\n    return { concepts: [], categories: [] };\r\n  }\r\n}\r\n\r\n/**\r\n * Load concepts synchronously from a static import\r\n * Use this for server components or build-time data\r\n */\r\nexport function loadConceptsSync(): ConceptData {\r\n  // For static builds, we'll need to import the JSON directly\r\n  // This is a fallback - in practice, we'll use the async version\r\n  return { concepts: [], categories: [] };\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAiBO,eAAe;IACpB,IAAI;QACF,sDAAsD;QACtD,gEAAgE;QAChE,MAAM,WAAW,MAAM,MAAM,4BAA4B;YACvD,OAAO;QACT;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM,CAAC,yBAAyB,EAAE,SAAS,MAAM,EAAE;QAC/D;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,CAAC,KAAK,gBAAgB,IAAI,CAAC,MAAM,OAAO,CAAC,KAAK,gBAAgB,GAAG;YACnE,MAAM,IAAI,MAAM;QAClB;QAEA,2DAA2D;QAC3D,oDAAoD;QACpD,MAAM,UAAU,IAAI;QACpB,MAAM,WAA2B,EAAE;QAEnC,KAAK,gBAAgB,CAAC,OAAO,CAAC,CAAC,SAAqB;YAClD,mBAAmB;YACnB,MAAM,SAAS,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,OAAO;YAC/C,IAAI,WAAW;YACf,IAAI,iBAAiB;YAErB,mEAAmE;YACnE,MAAO,QAAQ,GAAG,CAAC,UAAW;gBAC5B;gBACA,WAAW,GAAG,OAAO,KAAK,EAAE,gBAAgB;YAC9C;YAEA,QAAQ,GAAG,CAAC;YAEZ,SAAS,IAAI,CAAC,IAAA,0JAA+B,EAAC;gBAC5C,IAAI;gBACJ,SAAS,QAAQ,OAAO;gBACxB,aAAa,QAAQ,WAAW,IAAI,QAAQ,iBAAiB;gBAC7D,UAAU,QAAQ,QAAQ;gBAC1B,oBAAoB,QAAQ,kBAAkB;gBAC9C,sBAAsB,QAAQ,oBAAoB;gBAClD,OAAO,QAAQ,KAAK;YACtB;QACF;QAEA,6BAA6B;QAC7B,IAAI,SAAS,MAAM,KAAK,KAAK,gBAAgB,CAAC,MAAM,EAAE;YACpD,QAAQ,IAAI,CAAC,CAAC,MAAM,EAAE,KAAK,gBAAgB,CAAC,MAAM,GAAG,SAAS,MAAM,CAAC,sBAAsB,CAAC;QAC9F;QAEA,wDAAwD;QACxD,MAAM,cAAc,IAAI;QACxB,IAAI,KAAK,UAAU,IAAI,MAAM,OAAO,CAAC,KAAK,UAAU,GAAG;YACrD,KAAK,UAAU,CAAC,OAAO,CAAC,CAAC;gBACvB,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,EAAE;oBACzB,YAAY,GAAG,CAAC,IAAI,IAAI,EAAE;wBACxB,OAAO,IAAI,KAAK;wBAChB,OAAO,IAAI,KAAK;wBAChB,OAAO,IAAI,KAAK;oBAClB;gBACF;YACF;QACF;QAEA,kCAAkC;QAClC,SAAS,OAAO,CAAC,CAAC;YAChB,IAAI,CAAC,QAAQ,KAAK,IAAI,YAAY,GAAG,CAAC,QAAQ,QAAQ,GAAG;gBACvD,QAAQ,KAAK,GAAG,YAAY,GAAG,CAAC,QAAQ,QAAQ,EAAG,KAAK;YAC1D;QACF;QAEA,OAAO;YACL;YACA,YAAY,MAAM,IAAI,CAAC,YAAY,OAAO,IAAI,GAAG,CAAC,CAAC,CAAC,MAAM,KAAK,GAAK,CAAC;oBACnE;oBACA,OAAO,KAAK,KAAK;oBACjB,OAAO,KAAK,KAAK;oBACjB,OAAO,KAAK,KAAK;gBACnB,CAAC;QACH;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,6BAA6B;QAC7B,OAAO;YAAE,UAAU,EAAE;YAAE,YAAY,EAAE;QAAC;IACxC;AACF;AAMO,SAAS;IACd,4DAA4D;IAC5D,gEAAgE;IAChE,OAAO;QAAE,UAAU,EAAE;QAAE,YAAY,EAAE;IAAC;AACxC"}},
    {"offset": {"line": 716, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/modules/concept-matrix/concept-matrix.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useRef, useEffect, useCallback, useMemo } from \"react\";\r\nimport { ConceptPoint, CONCEPTS } from \"@/data/concepts\";\r\nimport { usePanZoom } from \"@/lib/matrix/panzoom\";\r\nimport { getViewBox } from \"@/lib/matrix/scales\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { MatrixControls } from \"./matrix-controls\";\r\nimport { loadConcepts, type ConceptData } from \"@/lib/data/load-concepts\";\r\nimport { Filter, X } from \"lucide-react\";\r\n\r\ninterface ConceptMatrixProps {\r\n  concepts?: ConceptPoint[];\r\n  width?: number;\r\n  height?: number;\r\n}\r\n\r\n// Category color mapping - will be populated from actual data\r\nconst CATEGORY_COLORS: Record<string, string> = {\r\n  \"Grappling Primitives\": \"#848a94\",\r\n  \"Tactics\": \"#8A2BE2\",\r\n  \"Strategy\": \"#FF8C00\",\r\n  \"Training\": \"#00CED1\",\r\n  \"Coaching\": \"#6b6d70\",\r\n  \"Memes\": \"#8A2BE2\",\r\n  \"21 Immutable Principles\": \"#FFD700\",\r\n  \"32 Principles\": \"#FFD700\",\r\n  \"Default\": \"#6B7280\",\r\n};\r\n\r\nfunction getCategoryColor(category: string, categoryMap?: Map<string, string>): string {\r\n  if (categoryMap && categoryMap.has(category)) {\r\n    return categoryMap.get(category)!;\r\n  }\r\n  return CATEGORY_COLORS[category] || CATEGORY_COLORS.Default;\r\n}\r\n\r\nexport function ConceptMatrix({\r\n  concepts: initialConcepts,\r\n  width: initialWidth,\r\n  height: initialHeight,\r\n}: ConceptMatrixProps) {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const [dimensions, setDimensions] = useState({ width: 800, height: 600 });\r\n  const [selectedConcept, setSelectedConcept] = useState<ConceptPoint | null>(null);\r\n  const [hoveredConcept, setHoveredConcept] = useState<ConceptPoint | null>(null);\r\n  const [tooltipPosition, setTooltipPosition] = useState({ x: 0, y: 0 });\r\n  const [concepts, setConcepts] = useState<ConceptPoint[]>(initialConcepts || CONCEPTS);\r\n  const [loading, setLoading] = useState(!initialConcepts);\r\n  const [conceptData, setConceptData] = useState<ConceptData | null>(null);\r\n  const [selectedCategories, setSelectedCategories] = useState<Set<string>>(new Set());\r\n  const [filterExpanded, setFilterExpanded] = useState(false);\r\n  const isPanning = useRef(false);\r\n  const lastPanPoint = useRef({ x: 0, y: 0 });\r\n\r\n  const panZoom = usePanZoom();\r\n  \r\n  // Build category map for colors and axis labels\r\n  const categoryMap = useMemo(() => {\r\n    const map = new Map<string, string>();\r\n    if (conceptData?.categories) {\r\n      conceptData.categories.forEach(cat => {\r\n        map.set(cat.name, cat.color);\r\n      });\r\n    }\r\n    return map;\r\n  }, [conceptData]);\r\n  \r\n  // Get axis labels from the first category (or selected categories)\r\n  // Note: X axis = mental_physical, Y axis = self_opponent (matching old D3 code)\r\n  const axisLabels = useMemo(() => {\r\n    if (!conceptData?.categories || conceptData.categories.length === 0) {\r\n      return {\r\n        xAxis: { left: \"Mental\", right: \"Physical\" },\r\n        yAxis: { bottom: \"Opponent\", top: \"Self\" },\r\n      };\r\n    }\r\n    // Use the first category's axis labels, or from selected categories\r\n    const category = selectedCategories.size > 0\r\n      ? conceptData.categories.find(cat => selectedCategories.has(cat.name))\r\n      : conceptData.categories[0];\r\n    // Swap the labels to match our axis mapping\r\n    return {\r\n      xAxis: category?.yAxis || { left: \"Mental\", right: \"Physical\" }, // mental_physical maps to X\r\n      yAxis: category?.xAxis || { bottom: \"Opponent\", top: \"Self\" }, // self_opponent maps to Y\r\n    };\r\n  }, [conceptData, selectedCategories]);\r\n  \r\n  // Filter concepts by selected categories\r\n  const filteredConcepts = useMemo(() => {\r\n    if (selectedCategories.size === 0) {\r\n      return concepts;\r\n    }\r\n    return concepts.filter(c => selectedCategories.has(c.category));\r\n  }, [concepts, selectedCategories]);\r\n  \r\n  // Get unique categories from concepts\r\n  const availableCategories = useMemo(() => {\r\n    const cats = new Set<string>();\r\n    concepts.forEach(c => cats.add(c.category));\r\n    return Array.from(cats).sort();\r\n  }, [concepts]);\r\n\r\n  // Load real data if no concepts provided\r\n  useEffect(() => {\r\n    if (!initialConcepts) {\r\n      loadConcepts()\r\n        .then((data) => {\r\n          if (data.concepts.length > 0) {\r\n            console.log(`✅ Loaded ${data.concepts.length} concepts`);\r\n            setConcepts(data.concepts);\r\n            setConceptData(data);\r\n          } else {\r\n            console.warn(\"⚠️ No concepts loaded\");\r\n          }\r\n          setLoading(false);\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Failed to load concepts:\", error);\r\n          setLoading(false);\r\n        });\r\n    } else {\r\n      console.log(`Using ${initialConcepts.length} provided concepts`);\r\n    }\r\n  }, [initialConcepts]);\r\n\r\n  // Update dimensions on mount and resize\r\n  useEffect(() => {\r\n    const updateDimensions = () => {\r\n      if (containerRef.current) {\r\n        const rect = containerRef.current.getBoundingClientRect();\r\n        setDimensions({\r\n          width: initialWidth || rect.width || 800,\r\n          height: initialHeight || Math.max(rect.height, 400) || 600,\r\n        });\r\n      }\r\n    };\r\n\r\n    updateDimensions();\r\n    window.addEventListener(\"resize\", updateDimensions);\r\n    return () => window.removeEventListener(\"resize\", updateDimensions);\r\n  }, [initialWidth, initialHeight]);\r\n\r\n  // Convert screen coordinates to viewBox coordinates (data space)\r\n  // This gives us the point in the untransformed coordinate system\r\n  const screenToDataSpace = useCallback((screenX: number, screenY: number) => {\r\n    // Convert screen pixel to viewBox coordinate (before transform)\r\n    // viewBox is -2 to 2 (width 4), so: viewBoxX = (screenX / width) * 4 - 2\r\n    const viewBoxX = (screenX / dimensions.width) * 4 - 2;\r\n    const viewBoxY = (screenY / dimensions.height) * 4 - 2;\r\n    \r\n    // The transform is: scale(z) translate(tx/z, ty/z)\r\n    // SVG applies right-to-left: translate first, then scale\r\n    // So to reverse: divide by zoom, then subtract translate\r\n    const dataX = (viewBoxX / panZoom.state.zoom) - (panZoom.state.translateX / panZoom.state.zoom);\r\n    const dataY = (viewBoxY / panZoom.state.zoom) - (panZoom.state.translateY / panZoom.state.zoom);\r\n    return { x: dataX, y: dataY };\r\n  }, [dimensions, panZoom.state]);\r\n\r\n  // Convert screen pixel delta to viewBox units for panning\r\n  const screenDeltaToViewBox = useCallback((deltaX: number, deltaY: number) => {\r\n    // Convert screen pixel delta to current viewBox units\r\n    // Current viewBox size = 4 / zoom\r\n    const currentViewBoxSize = 4 / panZoom.state.zoom;\r\n    const viewBoxDeltaX = (deltaX / dimensions.width) * currentViewBoxSize;\r\n    const viewBoxDeltaY = (deltaY / dimensions.height) * currentViewBoxSize;\r\n    return { x: viewBoxDeltaX, y: viewBoxDeltaY };\r\n  }, [dimensions, panZoom.state.zoom]);\r\n\r\n  // Handle double-click zoom\r\n  const handleDoubleClick = (e: React.MouseEvent) => {\r\n    const rect = e.currentTarget.getBoundingClientRect();\r\n    const screenX = e.clientX - rect.left;\r\n    const screenY = e.clientY - rect.top;\r\n    panZoom.zoomBy(0.5, screenX, screenY, dimensions.width, dimensions.height);\r\n  };\r\n  \r\n  // Handle wheel zoom with proper coordinate conversion\r\n  const handleWheel = useCallback((e: React.WheelEvent) => {\r\n    e.preventDefault();\r\n    const delta = e.deltaY > 0 ? -0.1 : 0.1;\r\n    const rect = e.currentTarget.getBoundingClientRect();\r\n    const screenX = e.clientX - rect.left;\r\n    const screenY = e.clientY - rect.top;\r\n    panZoom.zoomBy(delta, screenX, screenY, dimensions.width, dimensions.height);\r\n  }, [panZoom, dimensions]);\r\n\r\n  // Handle concept click/tap\r\n  const handleConceptClick = (concept: ConceptPoint, e: React.MouseEvent | React.TouchEvent) => {\r\n    e.stopPropagation();\r\n    setSelectedConcept(concept);\r\n    \r\n    if (e.type === \"touchstart\") {\r\n      const touch = (e as React.TouchEvent).touches[0];\r\n      const rect = containerRef.current?.getBoundingClientRect();\r\n      if (rect) {\r\n        setTooltipPosition({\r\n          x: touch.clientX - rect.left,\r\n          y: touch.clientY - rect.top,\r\n        });\r\n      }\r\n    } else {\r\n      const mouse = e as React.MouseEvent;\r\n      const rect = containerRef.current?.getBoundingClientRect();\r\n      if (rect) {\r\n        setTooltipPosition({\r\n          x: mouse.clientX - rect.left,\r\n          y: mouse.clientY - rect.top,\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const viewport = {\r\n    width: dimensions.width,\r\n    height: dimensions.height,\r\n    translateX: panZoom.state.translateX,\r\n    translateY: panZoom.state.translateY,\r\n    zoom: panZoom.state.zoom,\r\n  };\r\n\r\n  const viewBox = getViewBox(viewport);\r\n\r\n  // Convert normalized coordinates (-1 to 1) to SVG viewBox coordinates\r\n  // The viewBox is -2 to 2, so we map directly: -1 maps to -2, 0 to 0, 1 to 2\r\n  // These are FIXED coordinates - dots stay at these positions regardless of zoom/pan\r\n  const toSVGX = (normalized: number) => normalized * 2;\r\n  const toSVGY = (normalized: number) => normalized * 2;\r\n\r\n  // Handle quadrant navigation\r\n  const handleQuadrant = (quadrant: 1 | 2 | 3 | 4) => {\r\n    const centerX = dimensions.width / 2;\r\n    const centerY = dimensions.height / 2;\r\n    \r\n    // Quadrant centers in normalized coordinates\r\n    const quadrantCenters = {\r\n      1: { x: 0.5, y: 0.5 },   // Top-right\r\n      2: { x: -0.5, y: 0.5 },  // Top-left\r\n      3: { x: -0.5, y: -0.5 }, // Bottom-left\r\n      4: { x: 0.5, y: -0.5 },  // Bottom-right\r\n    };\r\n    \r\n    const target = quadrantCenters[quadrant];\r\n    // Convert to screen coordinates and center\r\n    const screenX = centerX + target.x * (dimensions.width / 2);\r\n    const screenY = centerY - target.y * (dimensions.height / 2);\r\n    \r\n    // Set zoom and translate to center on quadrant\r\n    panZoom.setZoom(1.5);\r\n    panZoom.panBy(\r\n      centerX - screenX,\r\n      centerY - screenY\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"relative w-full h-full min-h-[400px] bg-bg-raised rounded-lg border border-border-subtle flex items-center justify-center\">\r\n        <p className=\"text-text-muted\">Loading concepts...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      className=\"relative w-full h-full min-h-[400px] bg-bg-raised rounded-lg border border-border-subtle overflow-hidden\"\r\n      onMouseDown={(e) => {\r\n        if (e.button === 0) {\r\n          isPanning.current = true;\r\n          lastPanPoint.current = { x: e.clientX, y: e.clientY };\r\n          e.preventDefault();\r\n        }\r\n      }}\r\n      onMouseMove={(e) => {\r\n        if (isPanning.current) {\r\n          const deltaX = e.clientX - lastPanPoint.current.x;\r\n          const deltaY = e.clientY - lastPanPoint.current.y;\r\n          const viewBoxDelta = screenDeltaToViewBox(deltaX, deltaY);\r\n          panZoom.panBy(viewBoxDelta.x, viewBoxDelta.y);\r\n          lastPanPoint.current = { x: e.clientX, y: e.clientY };\r\n          e.preventDefault();\r\n        }\r\n      }}\r\n      onMouseUp={() => {\r\n        isPanning.current = false;\r\n      }}\r\n      onMouseLeave={() => {\r\n        isPanning.current = false;\r\n      }}\r\n      onTouchStart={panZoom.handlers.onTouchStart}\r\n      onTouchMove={(e) => panZoom.handlers.onTouchMove(e, screenDeltaToViewBox, dimensions.width, dimensions.height)}\r\n      onTouchEnd={panZoom.handlers.onTouchEnd}\r\n      onDoubleClick={handleDoubleClick}\r\n      onWheel={handleWheel}\r\n    >\r\n      <svg\r\n        width={dimensions.width}\r\n        height={dimensions.height}\r\n        viewBox={viewBox}\r\n        className=\"absolute inset-0\"\r\n        style={{ touchAction: \"none\" }}\r\n        preserveAspectRatio=\"xMidYMid meet\"\r\n      >\r\n        <defs>\r\n          <pattern\r\n            id=\"grid\"\r\n            width=\"0.5\"\r\n            height=\"0.5\"\r\n            patternUnits=\"userSpaceOnUse\"\r\n          >\r\n            <path\r\n              d=\"M 0.5 0 L 0 0 0 0.5\"\r\n              fill=\"none\"\r\n              stroke=\"#1C1F26\"\r\n              strokeWidth=\"0.05\"\r\n            />\r\n          </pattern>\r\n        </defs>\r\n        \r\n        {/* Static background grid */}\r\n        <rect x=\"-2\" y=\"-2\" width=\"4\" height=\"4\" fill=\"url(#grid)\" />\r\n\r\n        {/* Center lines (axes) - static */}\r\n        <line\r\n          x1=\"-2\"\r\n          y1=\"0\"\r\n          x2=\"2\"\r\n          y2=\"0\"\r\n          stroke=\"#1C1F26\"\r\n          strokeWidth=\"0.1\"\r\n        />\r\n        <line\r\n          x1=\"0\"\r\n          y1=\"-2\"\r\n          x2=\"0\"\r\n          y2=\"2\"\r\n          stroke=\"#1C1F26\"\r\n          strokeWidth=\"0.1\"\r\n        />\r\n        \r\n        {/* Axis labels */}\r\n        <text\r\n          x=\"-1.9\"\r\n          y=\"0.15\"\r\n          fill=\"#6B7280\"\r\n          fontSize=\"0.3\"\r\n          textAnchor=\"start\"\r\n          className=\"pointer-events-none\"\r\n        >\r\n          {axisLabels.xAxis.left}\r\n        </text>\r\n        <text\r\n          x=\"1.9\"\r\n          y=\"0.15\"\r\n          fill=\"#6B7280\"\r\n          fontSize=\"0.3\"\r\n          textAnchor=\"end\"\r\n          className=\"pointer-events-none\"\r\n        >\r\n          {axisLabels.xAxis.right}\r\n        </text>\r\n        <text\r\n          x=\"0.1\"\r\n          y=\"-1.9\"\r\n          fill=\"#6B7280\"\r\n          fontSize=\"0.3\"\r\n          textAnchor=\"start\"\r\n          className=\"pointer-events-none\"\r\n        >\r\n          {axisLabels.yAxis.top}\r\n        </text>\r\n        <text\r\n          x=\"0.1\"\r\n          y=\"1.9\"\r\n          fill=\"#6B7280\"\r\n          fontSize=\"0.3\"\r\n          textAnchor=\"start\"\r\n          className=\"pointer-events-none\"\r\n        >\r\n          {axisLabels.yAxis.bottom}\r\n        </text>\r\n\r\n        {/* Dots are at FIXED coordinates - NO TRANSFORM APPLIED */}\r\n        {/* Pan/zoom is controlled by the SVG viewBox attribute, not transforms */}\r\n        {/* This ensures dots NEVER move, only the viewport changes */}\r\n\r\n        {/* Concept dots - use filtered concepts */}\r\n        {filteredConcepts.map((concept, index) => {\r\n          const isSelected = selectedConcept?.id === concept.id;\r\n          const isHovered = hoveredConcept?.id === concept.id;\r\n          const color = concept.color || getCategoryColor(concept.category);\r\n          const radius = isSelected ? 0.15 : isHovered ? 0.12 : 0.1; // Scale radius for viewBox\r\n          const svgX = toSVGX(concept.x);\r\n          const svgY = toSVGY(concept.y);\r\n\r\n          return (\r\n            <g key={concept.id}>\r\n              <circle\r\n                cx={svgX}\r\n                cy={svgY}\r\n                r={radius}\r\n                fill={color}\r\n                stroke={isSelected ? \"#fff\" : isHovered ? color : \"transparent\"}\r\n                strokeWidth={isSelected ? 0.05 : 0.03}\r\n                opacity={isSelected ? 1 : isHovered ? 0.9 : 0.7}\r\n                className=\"cursor-pointer transition-all\"\r\n                onClick={(e) => handleConceptClick(concept, e)}\r\n                onMouseEnter={() => setHoveredConcept(concept)}\r\n                onMouseLeave={() => setHoveredConcept(null)}\r\n                onTouchStart={(e) => handleConceptClick(concept, e)}\r\n              />\r\n              {/* Label on hover/select - scale inversely with zoom to keep size consistent */}\r\n              {(isSelected || isHovered) && (\r\n                <text\r\n                  x={svgX}\r\n                  y={svgY - radius - 0.2}\r\n                  textAnchor=\"middle\"\r\n                  fill=\"#E5E7EB\"\r\n                  fontSize={`${0.3 / panZoom.state.zoom}`}\r\n                  fontWeight=\"500\"\r\n                  className=\"pointer-events-none\"\r\n                >\r\n                  {concept.label}\r\n                </text>\r\n              )}\r\n            </g>\r\n          );\r\n        })}\r\n      </svg>\r\n\r\n      {/* Category Filter - Horizontal at top */}\r\n      <div className=\"absolute top-0 left-0 right-0 z-20 bg-bg-raised border-b border-border-subtle\">\r\n        <div className=\"px-4 py-2 flex items-center gap-3\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Filter className=\"w-4 h-4 text-text-muted\" />\r\n            <span className=\"text-sm font-semibold\">Categories</span>\r\n          </div>\r\n          \r\n          <Button\r\n            variant={selectedCategories.size === 0 ? \"default\" : \"outline\"}\r\n            size=\"sm\"\r\n            onClick={() => setSelectedCategories(new Set())}\r\n            className=\"h-7 px-3 text-xs\"\r\n          >\r\n            All\r\n          </Button>\r\n          \r\n          {filterExpanded && (\r\n            <>\r\n              <div className=\"flex-1 flex flex-wrap gap-2 max-h-32 overflow-y-auto\">\r\n                {availableCategories.map((category) => {\r\n                  const isSelected = selectedCategories.has(category);\r\n                  const color = getCategoryColor(category, categoryMap);\r\n                  return (\r\n                    <button\r\n                      key={category}\r\n                      onClick={() => {\r\n                        const newSet = new Set(selectedCategories);\r\n                        if (isSelected) {\r\n                          newSet.delete(category);\r\n                        } else {\r\n                          newSet.add(category);\r\n                        }\r\n                        setSelectedCategories(newSet);\r\n                      }}\r\n                      className={cn(\r\n                        \"px-2 py-1 rounded text-xs font-medium transition-all\",\r\n                        isSelected\r\n                          ? \"bg-accent text-accent-foreground border border-accent\"\r\n                          : \"bg-bg border border-border-subtle text-text-secondary hover:border-border hover:bg-bg-hover\"\r\n                      )}\r\n                      style={isSelected ? { borderColor: color } : {}}\r\n                    >\r\n                      {category}\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n              {selectedCategories.size > 0 && (\r\n                <span className=\"text-xs text-text-muted whitespace-nowrap\">\r\n                  {filteredConcepts.length} of {concepts.length}\r\n                </span>\r\n              )}\r\n            </>\r\n          )}\r\n          \r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={() => setFilterExpanded(!filterExpanded)}\r\n            className=\"h-7 px-2\"\r\n          >\r\n            {filterExpanded ? <X className=\"w-4 h-4\" /> : <Filter className=\"w-4 h-4\" />}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Controls - positioned to avoid bottom-right quadrant */}\r\n      <div className=\"absolute bottom-4 left-4 z-20\">\r\n        <MatrixControls\r\n          onZoomIn={panZoom.zoomIn}\r\n          onZoomOut={panZoom.zoomOut}\r\n          onReset={panZoom.reset}\r\n          onQuadrant={handleQuadrant}\r\n        />\r\n      </div>\r\n\r\n      {/* Tooltip/Card for selected concept */}\r\n      {selectedConcept && (\r\n        <div\r\n          className=\"absolute z-10 pointer-events-none\"\r\n          style={{\r\n            left: `${tooltipPosition.x}px`,\r\n            top: `${tooltipPosition.y}px`,\r\n            transform: \"translate(-50%, -100%)\",\r\n            marginTop: \"-8px\",\r\n          }}\r\n        >\r\n          <Card className=\"bg-bg-raised border-border-subtle p-3 min-w-[200px] max-w-[300px]\">\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex items-center justify-between gap-2\">\r\n                <h4 className=\"font-semibold text-sm\">{selectedConcept.label}</h4>\r\n                <Badge variant=\"outline\" className=\"border-border-subtle text-xs\">\r\n                  {selectedConcept.category}\r\n                </Badge>\r\n              </div>\r\n              {selectedConcept.description && (\r\n                <p className=\"text-xs text-text-muted\">{selectedConcept.description}</p>\r\n              )}\r\n            </div>\r\n          </Card>\r\n        </div>\r\n      )}\r\n\r\n      {/* Click outside to deselect */}\r\n      {selectedConcept && (\r\n        <div\r\n          className=\"absolute inset-0 z-0\"\r\n          onClick={() => setSelectedConcept(null)}\r\n          onTouchStart={() => setSelectedConcept(null)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1464, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/modules/games/centroid-game.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { X, Target, Check, ArrowForward, Clock } from 'lucide-react';\r\n\r\ntype Point = { x: number; y: number };\r\n\r\nconst GRID_SIZE = 17; // cells per axis\r\nconst CELL_SIZE = 20; // px per cell → 340px board\r\nconst BOARD_PX = GRID_SIZE * CELL_SIZE; // 340\r\nconst MAX_ROUNDS = 10;\r\nconst TIMER_PENALTY_THRESHOLD = 3; // seconds\r\n\r\nfunction chebyshev(a: Point, b: Point): number {\r\n  return Math.max(Math.abs(a.x - b.x), Math.abs(a.y - b.y));\r\n}\r\n\r\nfunction nearestInt(p: Point): Point {\r\n  return { x: Math.round(p.x), y: Math.round(p.y) };\r\n}\r\n\r\nfunction centroid(dots: Point[]): Point {\r\n  if (dots.length === 0) return { x: 0, y: 0 };\r\n  const sx = dots.reduce((s, d) => s + d.x, 0);\r\n  const sy = dots.reduce((s, d) => s + d.y, 0);\r\n  return { x: sx / dots.length, y: sy / dots.length };\r\n}\r\n\r\nfunction useInterval(callback: () => void, delayMs: number | null) {\r\n  const savedRef = useRef(callback);\r\n  useEffect(() => { savedRef.current = callback; }, [callback]);\r\n  useEffect(() => {\r\n    if (delayMs == null) return;\r\n    const id = setInterval(() => savedRef.current(), delayMs);\r\n    return () => clearInterval(id);\r\n  }, [delayMs]);\r\n}\r\n\r\ninterface CentroidGameProps {\r\n  onClose?: () => void;\r\n}\r\n\r\nexport const CentroidGame: React.FC<CentroidGameProps> = ({ onClose }) => {\r\n  const [round, setRound] = useState(0); // 0..MAX_ROUNDS\r\n  const [dots, setDots] = useState<Point[]>([]);\r\n  const [actual, setActual] = useState<Point | null>(null);\r\n  const [guess, setGuess] = useState<Point | null>(null);\r\n  const [showResult, setShowResult] = useState(false);\r\n  const [totalScore, setTotalScore] = useState(0);\r\n  const [currentRoundScore, setCurrentRoundScore] = useState<number | null>(null);\r\n  const [timer, setTimer] = useState(0);\r\n  const [penalty, setPenalty] = useState(0);\r\n  const [phase, setPhase] = useState<'idle'|'count'|'go'|'playing'|'downtime'|'recap'>('idle');\r\n  const [pointsFlash, setPointsFlash] = useState<string | null>(null);\r\n  const [roundHistory, setRoundHistory] = useState<{ round: number; score: number; timer: number; perfect: boolean }[]>([]);\r\n  const [recapMessage, setRecapMessage] = useState<string | null>(null);\r\n  const validatedRef = useRef(false);\r\n  const timeoutsRef = useRef<number[]>([]);\r\n\r\n  const difficulty = useMemo(() => {\r\n    if (round <= 3) return { name: 'EASY', min: 3, max: 8 };\r\n    if (round <= 7) return { name: 'MEDIUM', min: 5, max: 10 };\r\n    return { name: 'HARD', min: 7, max: 12 };\r\n  }, [round]);\r\n\r\n  const startRound = useCallback((nextRound: number) => {\r\n    // generate dots\r\n    const n = Math.floor(Math.random() * (difficulty.max - difficulty.min + 1)) + difficulty.min;\r\n    const used = new Set<string>();\r\n    const nd: Point[] = [];\r\n    while (nd.length < n) {\r\n      const x = Math.floor(Math.random() * GRID_SIZE);\r\n      const y = Math.floor(Math.random() * GRID_SIZE);\r\n      const key = `${x},${y}`;\r\n      if (!used.has(key)) { used.add(key); nd.push({ x, y }); }\r\n    }\r\n    const c = centroid(nd);\r\n    setDots(nd);\r\n    setActual(c);\r\n    setGuess(null);\r\n    setShowResult(false);\r\n    setCurrentRoundScore(null);\r\n    setTimer(0);\r\n    setPenalty(0);\r\n    setRound(nextRound);\r\n    setPhase('playing');\r\n    validatedRef.current = false;\r\n  }, [difficulty]);\r\n\r\n  const clearAllTimeouts = () => {\r\n    timeoutsRef.current.forEach(id => clearTimeout(id));\r\n    timeoutsRef.current = [];\r\n  };\r\n\r\n  const schedule = (fn: () => void, ms: number) => {\r\n    const id = window.setTimeout(fn, ms);\r\n    timeoutsRef.current.push(id);\r\n    return id;\r\n  };\r\n\r\n  const hardReset = () => {\r\n    clearAllTimeouts();\r\n    setRound(0);\r\n    setDots([]);\r\n    setActual(null);\r\n    setGuess(null);\r\n    setShowResult(false);\r\n    setTotalScore(0);\r\n    setCurrentRoundScore(null);\r\n    setTimer(0);\r\n    setPenalty(0);\r\n    setRoundHistory([]);\r\n    setRecapMessage(null);\r\n    validatedRef.current = false;\r\n  };\r\n\r\n  const begin = () => {\r\n    hardReset();\r\n    setPhase('count');\r\n    schedule(() => setPhase('go'), 500);\r\n    schedule(() => startRound(1), 1000);\r\n  };\r\n\r\n  // timer + penalty\r\n  useInterval(() => {\r\n    if (phase === 'playing' && !showResult) {\r\n      setTimer(t => {\r\n        const nt = t + 1;\r\n        if (nt > TIMER_PENALTY_THRESHOLD) setPenalty(p => p + 1);\r\n        return nt;\r\n      });\r\n    }\r\n  }, phase === 'playing' && !showResult ? 1000 : null);\r\n\r\n  const onCellClick = (x: number, y: number) => {\r\n    if (phase !== 'playing' || showResult) return;\r\n    const ng = { x, y };\r\n    if (guess && ng.x === guess.x && ng.y === guess.y) {\r\n      validate();\r\n    } else {\r\n      setGuess(ng);\r\n    }\r\n  };\r\n\r\n  const validate = () => {\r\n    if (!guess || !actual) return;\r\n    if (validatedRef.current) return; // guard double-submit\r\n    validatedRef.current = true;\r\n    const optimal = nearestInt(actual);\r\n    const dist = chebyshev(guess, optimal);\r\n    const score = dist + penalty;\r\n    setCurrentRoundScore(score);\r\n    setTotalScore(s => s + score);\r\n    const perfect = dist === 0;\r\n    setRoundHistory(h => [...h, { round, score, timer, perfect }]);\r\n    setShowResult(true);\r\n    setPhase('downtime');\r\n    // flash points for ~1s then advance\r\n    setPointsFlash(score === 0 ? '✨0✨' : String(score));\r\n    schedule(() => {\r\n      setPointsFlash(null);\r\n      const next = round + 1;\r\n      if (next <= MAX_ROUNDS) {\r\n        schedule(() => startRound(next), 200); // tiny pause\r\n      } else {\r\n        const final = (roundHistory.reduce((s, r) => s + r.score, 0) + score);\r\n        const msg = getRecapMessage(final);\r\n        setTotalScore(final);\r\n        setRecapMessage(msg);\r\n        setPhase('recap');\r\n      }\r\n    }, 1000);\r\n  };\r\n\r\n  // rendering helpers\r\n  const renderGridCells = () => {\r\n    const cells: React.ReactElement[] = [];\r\n    for (let y = 0; y < GRID_SIZE; y++) {\r\n      for (let x = 0; x < GRID_SIZE; x++) {\r\n        const isDot = dots.some(d => d.x === x && d.y === y);\r\n        const isGuess = guess && guess.x === x && guess.y === y;\r\n        const isOptimal = showResult && actual && Math.round(actual.x) === x && Math.round(actual.y) === y;\r\n        let bg = 'transparent';\r\n        if (isGuess) bg = showResult ? 'bg-red-500' : 'bg-orange-500';\r\n        else if (isOptimal) bg = 'bg-green-500';\r\n        else if (isDot) bg = 'bg-blue-500';\r\n        cells.push(\r\n          <div\r\n            key={`${x}-${y}`}\r\n            onClick={() => onCellClick(x, y)}\r\n            className={`w-5 h-5 border border-white/10 ${bg} ${phase === 'playing' && !showResult ? 'cursor-pointer hover:opacity-80' : ''}`}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    return cells;\r\n  };\r\n\r\n  const vectorsOverlay = () => {\r\n    if (!showResult || !actual) return null;\r\n    const optimal = nearestInt(actual);\r\n    return (\r\n      <svg width={BOARD_PX} height={BOARD_PX} className=\"absolute top-0 left-0 pointer-events-none\">\r\n        {dots.map((d, i) => (\r\n          <line\r\n            key={i}\r\n            x1={d.x * CELL_SIZE + CELL_SIZE / 2}\r\n            y1={d.y * CELL_SIZE + CELL_SIZE / 2}\r\n            x2={optimal.x * CELL_SIZE + CELL_SIZE / 2}\r\n            y2={optimal.y * CELL_SIZE + CELL_SIZE / 2}\r\n            stroke=\"#66bb6a\"\r\n            strokeWidth={2}\r\n            opacity={0.6}\r\n          />\r\n        ))}\r\n      </svg>\r\n    );\r\n  };\r\n\r\n  // Messages\r\n  const messagesAbove25 = useMemo(() => [\r\n    \"Nice try, but you've got more in you! Push it!\",\r\n    \"Not bad, champ—now show us your best!\",\r\n    \"Solid effort, but you're just warming up! Go harder!\",\r\n    \"That's a start, now crank it up a notch!\",\r\n    \"Pretty good, but you're capable of greatness! Dig in!\",\r\n    \"Decent move, but you've got bigger plays to make!\",\r\n    \"Not too shabby, but let's see your A-game!\",\r\n    \"You're getting there—now unleash the beast!\",\r\n    \"Good hustle, but you're not at your peak yet!\",\r\n    \"That's the spirit, now take it to the next level!\"\r\n  ], []);\r\n  const messages10to25 = useMemo(() => [\r\n    'Amazing work! You\\'ve mastered the centroid challenge!',\r\n    'Outstanding performance! Your spatial reasoning is top-notch!',\r\n    'Brilliant! You\\'ve conquered the centroid matrix!',\r\n    'Fantastic! You\\'ve aced the centroid game!',\r\n    'Spectacular! Your geometric intuition is incredible!'\r\n  ], []);\r\n  const messages8to9 = useMemo(() => [\r\n    'Single digit! Impressive!',\r\n    'So close to perfection—keep pushing!',\r\n    'Excellent intuition.'\r\n  ], []);\r\n  const messages7andBelow = useMemo(() => [\r\n    'Unreal! You beat the creator!','Legendary performance!','Phenomenal accuracy!'\r\n  ], []);\r\n\r\n  const getRecapMessage = (finalScore: number) => {\r\n    if (finalScore > 25) return messagesAbove25[Math.floor(Math.random() * messagesAbove25.length)];\r\n    if (finalScore >= 10) return messages10to25[Math.floor(Math.random() * messages10to25.length)];\r\n    if (finalScore >= 8) return messages8to9[Math.floor(Math.random() * messages8to9.length)];\r\n    return messages7andBelow[Math.floor(Math.random() * messages7andBelow.length)];\r\n  };\r\n\r\n  const averageScore = useMemo(() => (\r\n    roundHistory.length ? (roundHistory.reduce((s, r) => s + r.score, 0) / roundHistory.length).toFixed(1) : '0.0'\r\n  ), [roundHistory]);\r\n  const averageTime = useMemo(() => (\r\n    roundHistory.length ? (roundHistory.reduce((s, r) => s + r.timer, 0) / roundHistory.length).toFixed(1) : '0.0'\r\n  ), [roundHistory]);\r\n  const perfectCount = useMemo(() => roundHistory.filter(r => r.perfect).length, [roundHistory]);\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      clearAllTimeouts();\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"w-full flex flex-col items-center justify-center text-white py-4 px-4 font-mono\">\r\n      <div className=\"relative w-full max-w-[380px]\">\r\n        {/* Close button */}\r\n        {onClose && (\r\n          <button\r\n            onClick={onClose}\r\n            className=\"absolute top-0 left-0 z-50 p-2 bg-black/35 hover:bg-black/50 rounded text-white\"\r\n            aria-label=\"close\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        )}\r\n\r\n        {/* Header */}\r\n        <div className=\"text-center mt-4 mb-2\">\r\n          <h2 className=\"text-xl font-bold tracking-wider\">Centroid (x̄, ȳ) – GRID FAST</h2>\r\n          <p className=\"text-sm opacity-70 tracking-wider\">10 rounds – Lowest score wins</p>\r\n        </div>\r\n\r\n        {/* Status row */}\r\n        {phase !== 'idle' && phase !== 'recap' && (\r\n          <div className=\"flex justify-between items-center px-1 mb-2 text-sm tracking-wider\">\r\n            <span>R{Math.min(round, MAX_ROUNDS)}/{MAX_ROUNDS}</span>\r\n            <div className=\"flex items-center gap-1\">\r\n              <Clock className=\"w-4 h-4\" />\r\n              <span className={timer <= TIMER_PENALTY_THRESHOLD ? 'text-green-500' : 'text-red-500'}>\r\n                {`0:${String(timer).padStart(2, '0')}`}\r\n              </span>\r\n              {penalty > 0 && <span className=\"text-red-500\">+{penalty}</span>}\r\n            </div>\r\n            <span>{difficulty.name}</span>\r\n          </div>\r\n        )}\r\n\r\n        {/* Board or Landing */}\r\n        {phase === 'idle' ? (\r\n          <div className=\"mx-auto p-4 rounded-lg bg-black/35 border border-white/10\">\r\n            <h3 className=\"text-lg mb-2\">How it works</h3>\r\n            <p className=\"text-sm mb-2 opacity-85\">\r\n              Estimate the centroid (center of mass) of the blue squares. Click a cell to place your guess, then press VALIDATE (or double-click). Lower total is better. Perfect Guess = 0\r\n            </p>\r\n            {/* Sample solved puzzle */}\r\n            {(() => {\r\n              const SAMPLE_GRID = 11; const SAMPLE_CELL = 14; const SAMPLE_PX = SAMPLE_GRID * SAMPLE_CELL;\r\n              const sampleDots: Point[] = [\r\n                { x: 2, y: 2 }, { x: 3, y: 7 }, { x: 5, y: 4 }, { x: 7, y: 2 }, { x: 8, y: 8 }, { x: 2, y: 9 }\r\n              ];\r\n              const sActual = centroid(sampleDots);\r\n              const sOptimal = nearestInt(sActual);\r\n              const sGuess = { x: Math.min(SAMPLE_GRID - 1, sOptimal.x + 1), y: sOptimal.y };\r\n              const renderSampleCells = () => {\r\n                const cells: React.ReactElement[] = [];\r\n                for (let y = 0; y < SAMPLE_GRID; y++) {\r\n                  for (let x = 0; x < SAMPLE_GRID; x++) {\r\n                    const isDot = sampleDots.some(d => d.x === x && d.y === y);\r\n                    const isGuess = sGuess && sGuess.x === x && sGuess.y === y;\r\n                    const isOptimal = Math.round(sActual.x) === x && Math.round(sActual.y) === y;\r\n                    let bg = 'transparent';\r\n                    if (isGuess) bg = 'bg-red-500';\r\n                    else if (isOptimal) bg = 'bg-green-500';\r\n                    else if (isDot) bg = 'bg-blue-500';\r\n                    cells.push(\r\n                      <div key={`${x}-${y}`} className={`w-3.5 h-3.5 border border-white/10 ${bg}`} />\r\n                    );\r\n                  }\r\n                }\r\n                return cells;\r\n              };\r\n              return (\r\n                <div className=\"flex gap-4 items-center\">\r\n                  <div className=\"relative w-[154px] h-[154px] grid grid-cols-11 grid-rows-11 bg-bg rounded overflow-hidden\">\r\n                    {renderSampleCells()}\r\n                    <svg width={SAMPLE_PX} height={SAMPLE_PX} className=\"absolute inset-0 pointer-events-none\">\r\n                      {sampleDots.map((d, i) => (\r\n                        <line\r\n                          key={i}\r\n                          x1={d.x * SAMPLE_CELL + SAMPLE_CELL / 2}\r\n                          y1={d.y * SAMPLE_CELL + SAMPLE_CELL / 2}\r\n                          x2={sOptimal.x * SAMPLE_CELL + SAMPLE_CELL / 2}\r\n                          y2={sOptimal.y * SAMPLE_CELL + SAMPLE_CELL / 2}\r\n                          stroke=\"#66bb6a\"\r\n                          strokeWidth={2}\r\n                          opacity={0.6}\r\n                        />\r\n                      ))}\r\n                    </svg>\r\n                  </div>\r\n                  <div className=\"text-xs\">\r\n                    <div>Blue = dots</div>\r\n                    <div className=\"text-green-400\">Green = true centroid</div>\r\n                    <div className=\"text-red-400\">Red = your guess</div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })()}\r\n          </div>\r\n        ) : (\r\n          <div className=\"w-[340px] h-[340px] mx-auto relative rounded-lg overflow-hidden border border-white/10\">\r\n            {/* countdown overlays */}\r\n            {phase === 'count' && (\r\n              <div className=\"absolute inset-0 bg-black/50 flex items-center justify-center z-10\">\r\n                <h3 className=\"text-3xl\">Round 1</h3>\r\n              </div>\r\n            )}\r\n            {phase === 'go' && (\r\n              <div className=\"absolute inset-0 bg-black/50 flex items-center justify-center z-10\">\r\n                <h3 className=\"text-3xl\">GO!</h3>\r\n              </div>\r\n            )}\r\n\r\n            {/* grid */}\r\n            <div className=\"absolute inset-0 bg-bg\" style={{ display: 'grid', gridTemplateColumns: `repeat(${GRID_SIZE}, ${CELL_SIZE}px)`, gridTemplateRows: `repeat(${GRID_SIZE}, ${CELL_SIZE}px)` }}>\r\n              {renderGridCells()}\r\n            </div>\r\n            {vectorsOverlay()}\r\n            {phase === 'downtime' && <div className=\"absolute inset-0 bg-black/40\" />}\r\n            {pointsFlash && (\r\n              <div className=\"absolute top-2 left-1/2 -translate-x-1/2 z-20\">\r\n                <div className=\"text-3xl text-red-500 drop-shadow-lg\">{pointsFlash}</div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Primary action */}\r\n        <div className=\"mt-2\">\r\n          <Button\r\n            className=\"w-full\"\r\n            size=\"lg\"\r\n            variant={phase === 'idle' ? 'default' : guess && !showResult ? 'default' : 'outline'}\r\n            disabled={phase !== 'idle' && (phase !== 'playing' || showResult || !guess)}\r\n            onClick={() => {\r\n              if (phase === 'idle') begin();\r\n              else if (phase === 'playing' && guess && !showResult) validate();\r\n            }}\r\n          >\r\n            <div className=\"flex items-center gap-2\">\r\n              {phase === 'idle' ? <Target className=\"w-5 h-5\" /> : guess && !showResult ? <Check className=\"w-5 h-5\" /> : <Target className=\"w-5 h-5\" />}\r\n              <div className=\"text-left\">\r\n                <div className=\"tracking-wider\">\r\n                  {phase === 'idle' ? 'START Game' : phase === 'playing' && guess && !showResult ? 'VALIDATE' : 'PLACE'}\r\n                </div>\r\n                <div className=\"text-xs opacity-80 leading-none tracking-wider\">\r\n                  x̄ = (1/n) Σ xᵢ &nbsp;&nbsp; ȳ = (1/n) Σ yᵢ\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Recap */}\r\n        {phase === 'recap' && (\r\n          <div className=\"fixed inset-0 z-50\">\r\n            <div className=\"absolute inset-0 bg-black/55\" />\r\n            <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[min(92vw,420px)] max-h-[80vh] overflow-y-auto text-center bg-bg text-text-primary p-4 rounded-lg shadow-xl font-mono tracking-wider\">\r\n              <div className=\"flex gap-2 mb-2 justify-center\">\r\n                <Button variant=\"default\" onClick={() => { hardReset(); setPhase('idle'); }}>Play Again</Button>\r\n                <Button variant=\"outline\" onClick={() => { setPhase('idle'); onClose?.(); }}>Close</Button>\r\n              </div>\r\n              <p className=\"text-sm mb-2\">{recapMessage}</p>\r\n              <h3 className=\"text-lg mb-2\">Final Score: {totalScore} points</h3>\r\n              <div className=\"text-left mx-auto max-w-[360px] text-xs py-1\">\r\n                {roundHistory.map((r, idx) => (\r\n                  <div key={`${r.round}-${idx}`} className=\"flex justify-between py-1\">\r\n                    <span>Round {r.round}:</span>\r\n                    <span>{r.score} pts {r.perfect ? '✨' : ''}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              <div className=\"flex justify-between mt-2 text-xs text-text-muted\">\r\n                <span>Perfect rounds: <strong>{perfectCount}</strong></span>\r\n                <span>Average score: <strong>{averageScore}</strong></span>\r\n              </div>\r\n              <div className=\"mt-2 text-xs text-text-muted\">Avg time per round: <strong>{averageTime}s</strong></div>\r\n              {/* Histogram 0..9+ */}\r\n              <div className=\"mt-2 h-24 flex items-end gap-1 mx-auto max-w-[360px]\">\r\n                {Array.from({ length: 10 }, (_, i) => {\r\n                  const count = roundHistory.filter(r => (i < 9 ? r.score === i : r.score >= 9)).length;\r\n                  return (\r\n                    <div key={i} className=\"flex-1 flex flex-col-reverse items-center gap-1\">\r\n                      <div className=\"w-2 bg-accent rounded-sm\" style={{ height: count * 10 }} />\r\n                      <span className=\"text-xs mt-1\">{i === 9 ? '9+' : i}</span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2423, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/hooks/useFullscreen.ts"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react';\r\n\r\nexport function useFullscreen(targetRef?: React.RefObject<HTMLElement | null>) {\r\n  const [isFullscreen, setIsFullscreen] = useState<boolean>(false);\r\n\r\n  useEffect(() => {\r\n    const onChange = () => {\r\n      setIsFullscreen(Boolean(document.fullscreenElement));\r\n    };\r\n    document.addEventListener('fullscreenchange', onChange);\r\n    return () => document.removeEventListener('fullscreenchange', onChange);\r\n  }, []);\r\n\r\n  const enter = useCallback(async () => {\r\n    try {\r\n      const el = targetRef?.current ?? document.documentElement;\r\n      if (!document.fullscreenElement && el?.requestFullscreen) {\r\n        await el.requestFullscreen();\r\n      }\r\n    } catch {/* ignore */}\r\n  }, [targetRef]);\r\n\r\n  const exit = useCallback(async () => {\r\n    try {\r\n      if (document.fullscreenElement) {\r\n        await document.exitFullscreen();\r\n      }\r\n    } catch {/* ignore */}\r\n  }, []);\r\n\r\n  const toggle = useCallback(async () => {\r\n    if (document.fullscreenElement) return exit();\r\n    return enter();\r\n  }, [enter, exit]);\r\n\r\n  return { isFullscreen, enterFullscreen: enter, exitFullscreen: exit, toggleFullscreen: toggle };\r\n}\r\n\r\n\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,SAAS,cAAc,SAA+C;IAC3E,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAU;IAE1D,IAAA,kNAAS,EAAC;QACR,MAAM,WAAW;YACf,gBAAgB,QAAQ,SAAS,iBAAiB;QACpD;QACA,SAAS,gBAAgB,CAAC,oBAAoB;QAC9C,OAAO,IAAM,SAAS,mBAAmB,CAAC,oBAAoB;IAChE,GAAG,EAAE;IAEL,MAAM,QAAQ,IAAA,oNAAW,EAAC;QACxB,IAAI;YACF,MAAM,KAAK,WAAW,WAAW,SAAS,eAAe;YACzD,IAAI,CAAC,SAAS,iBAAiB,IAAI,IAAI,mBAAmB;gBACxD,MAAM,GAAG,iBAAiB;YAC5B;QACF,EAAE,OAAM,CAAa;IACvB,GAAG;QAAC;KAAU;IAEd,MAAM,OAAO,IAAA,oNAAW,EAAC;QACvB,IAAI;YACF,IAAI,SAAS,iBAAiB,EAAE;gBAC9B,MAAM,SAAS,cAAc;YAC/B;QACF,EAAE,OAAM,CAAa;IACvB,GAAG,EAAE;IAEL,MAAM,SAAS,IAAA,oNAAW,EAAC;QACzB,IAAI,SAAS,iBAAiB,EAAE,OAAO;QACvC,OAAO;IACT,GAAG;QAAC;QAAO;KAAK;IAEhB,OAAO;QAAE;QAAc,iBAAiB;QAAO,gBAAgB;QAAM,kBAAkB;IAAO;AAChG"}},
    {"offset": {"line": 2473, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/modules/games/memory-game.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { X, Maximize2, Minimize2, RotateCcw } from 'lucide-react';\r\nimport { useFullscreen } from '@/hooks/useFullscreen';\r\n\r\n// Constants\r\nconst TOTAL_IMAGES = 160;\r\nconst PAIRS = 8; // fixed – 16 cards, 4x4 grid\r\nconst CARD_RATIO = 597 / 440; // height / width\r\n\r\n// Helpers\r\nfunction padId(n: number): string { return n.toString().padStart(3, '0'); }\r\nfunction imageUrl(id: string, ext: 'avif' | 'webp') { return `/images/memory/${ext}/${id}.${ext}`; }\r\nconst BACK_URL = '/images/memory/Memory_JJJ_Back_440x.webp';\r\n\r\nfunction shuffle<T>(arr: T[]): T[] {\r\n  const a = [...arr];\r\n  for (let i = a.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1));\r\n    [a[i], a[j]] = [a[j], a[i]];\r\n  }\r\n  return a;\r\n}\r\n\r\n// Types\r\ntype Card = { imageId: string; pairId: number; uid: string };\r\n\r\ninterface MemoryGameProps {\r\n  onClose?: () => void;\r\n}\r\n\r\nexport const MemoryGame: React.FC<MemoryGameProps> = ({ onClose }) => {\r\n  // Layout sizing\r\n  const [cardWidth, setCardWidth] = useState<number>(100);\r\n\r\n  // Game state\r\n  const [deck, setDeck] = useState<Card[]>([]);\r\n  const [flippedUids, setFlippedUids] = useState<string[]>([]);\r\n  const [matchedPairs, setMatchedPairs] = useState<Set<number>>(new Set());\r\n  const [moves, setMoves] = useState<number>(0);\r\n  const busyRef = useRef(false);\r\n  // Timer state (seconds only)\r\n  const [elapsedSec, setElapsedSec] = useState<number>(0);\r\n  const [timerRunning, setTimerRunning] = useState<boolean>(false);\r\n  const timerRef = useRef<number | null>(null);\r\n  // Reveal/shuffle phase\r\n  const [phase, setPhase] = useState<'play'|'reveal'|'hold'|'shuffle'>('play');\r\n  const [revealFront, setRevealFront] = useState<Set<string>>(new Set());\r\n  const [showShuffle, setShowShuffle] = useState<boolean>(false);\r\n  const timeoutsRef = useRef<number[]>([]);\r\n  const [showIntro, setShowIntro] = useState<boolean>(true);\r\n  // Fly overlay for shuffle animation\r\n  const cardRefs = useRef<Record<string, HTMLDivElement | null>>({});\r\n  const [flyVisible, setFlyVisible] = useState<boolean>(false);\r\n  const [flyCards, setFlyCards] = useState<Array<{ uid: string; left: number; top: number }>>([]);\r\n\r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n  const { isFullscreen, toggleFullscreen } = useFullscreen(containerRef);\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (timerRef.current) {\r\n        clearInterval(timerRef.current);\r\n      }\r\n      timeoutsRef.current.forEach(id => clearTimeout(id));\r\n    };\r\n  }, []);\r\n\r\n  // Compute 4x4 cell size to avoid scrollbars\r\n  const computeSize = () => {\r\n    const vw = window.innerWidth;\r\n    const vh = window.innerHeight;\r\n    const cols = 4; const rows = 4; const gap = 10; const sidePad = 16; const topReserve = 72; // header row\r\n    let w = Math.floor((vw - sidePad*2 - gap*(cols-1)) / cols);\r\n    let h = Math.floor(w * CARD_RATIO);\r\n    while (rows * h + gap * (rows - 1) > (vh - topReserve) && w > 60) {\r\n      w -= 1; h = Math.floor(w * CARD_RATIO);\r\n    }\r\n    setCardWidth(w);\r\n  };\r\n\r\n  useEffect(() => {\r\n    computeSize();\r\n    window.addEventListener('resize', computeSize);\r\n    return () => window.removeEventListener('resize', computeSize);\r\n  }, []);\r\n\r\n  // Build a new deck of 8 random pairs\r\n  const clearAllTimeouts = () => {\r\n    timeoutsRef.current.forEach(id => window.clearTimeout(id));\r\n    timeoutsRef.current = [];\r\n  };\r\n\r\n  const newGame = () => {\r\n    clearAllTimeouts();\r\n    const pairs = shuffle(Array.from({ length: TOTAL_IMAGES / 2 }, (_, i) => i + 1)).slice(0, PAIRS);\r\n    const cards: Card[] = [];\r\n    for (const p of pairs) {\r\n      const a = padId(2 * p - 1), b = padId(2 * p);\r\n      cards.push({ imageId: a, pairId: p, uid: `${a}-A` });\r\n      cards.push({ imageId: b, pairId: p, uid: `${b}-B` });\r\n    }\r\n    // For reveal: two-by-two side-by-side order\r\n    const revealDeck: Card[] = [];\r\n    for (let i = 0; i < cards.length; i += 2) { revealDeck.push(cards[i], cards[i+1]); }\r\n    const finalDeck = shuffle(revealDeck);\r\n    setDeck(revealDeck);\r\n    setFlippedUids([]);\r\n    setMatchedPairs(new Set());\r\n    setMoves(0);\r\n    busyRef.current = false;\r\n    // Reset timer\r\n    setElapsedSec(0);\r\n    setTimerRunning(false);\r\n    if (timerRef.current) { window.clearInterval(timerRef.current); timerRef.current = null; }\r\n\r\n    // Run reveal animation (0.75s per pair)\r\n    busyRef.current = true;\r\n    setPhase('reveal');\r\n    setRevealFront(new Set());\r\n    const PER_PAIR_MS = 750;\r\n    for (let k = 0; k < PAIRS; k++) {\r\n      const id = window.setTimeout(() => {\r\n        setRevealFront(prev => {\r\n          const next = new Set(prev);\r\n          const c1 = revealDeck[k*2];\r\n          const c2 = revealDeck[k*2+1];\r\n          if (c1) next.add(c1.uid); if (c2) next.add(c2.uid);\r\n          return next;\r\n        });\r\n      }, PER_PAIR_MS * k);\r\n      timeoutsRef.current.push(id);\r\n    }\r\n    const holdId = window.setTimeout(() => setPhase('hold'), PER_PAIR_MS * PAIRS);\r\n    timeoutsRef.current.push(holdId);\r\n    const shuffleStartId = window.setTimeout(() => {\r\n      setRevealFront(new Set());\r\n      setPhase('shuffle');\r\n      // Step A: measure current positions\r\n      const initialPositions = revealDeck.map(c => {\r\n        const el = cardRefs.current[c.uid];\r\n        const r = el ? el.getBoundingClientRect() : { left: window.innerWidth/2, top: window.innerHeight/2 } as any;\r\n        return { uid: c.uid, left: r.left, top: r.top };\r\n      });\r\n      setFlyCards(initialPositions);\r\n      setFlyVisible(true);\r\n      // Step B: move all to center\r\n      const centerLeft = Math.round(window.innerWidth / 2 - cardWidth / 2);\r\n      const centerTop = Math.round(window.innerHeight * 0.35 - Math.floor(cardWidth*CARD_RATIO) / 2);\r\n      const toCenterId = window.setTimeout(() => {\r\n        setFlyCards(prev => prev.map(fc => ({ ...fc, left: centerLeft, top: centerTop })));\r\n      }, 20);\r\n      timeoutsRef.current.push(toCenterId);\r\n      // Step C: apply shuffled deck and measure target positions\r\n      const applyShuffleId = window.setTimeout(() => {\r\n        setDeck(finalDeck);\r\n        // wait next frame for DOM\r\n        const measureTargetsId = window.setTimeout(() => {\r\n          const targets = finalDeck.map(c => {\r\n            const el = cardRefs.current[c.uid];\r\n            const r = el ? el.getBoundingClientRect() : { left: centerLeft, top: centerTop } as any;\r\n            return { uid: c.uid, left: r.left, top: r.top };\r\n          });\r\n          // Step D: fly from center to targets\r\n          setFlyCards(prev => prev.map((fc, i) => ({ ...fc, left: targets[i].left, top: targets[i].top })));\r\n          // Step E: end overlay\r\n          const endId = window.setTimeout(() => {\r\n            setFlyVisible(false);\r\n            setPhase('play');\r\n            busyRef.current = false;\r\n          }, 650);\r\n          timeoutsRef.current.push(endId);\r\n        }, 40);\r\n        timeoutsRef.current.push(measureTargetsId);\r\n      }, 600);\r\n      timeoutsRef.current.push(applyShuffleId);\r\n    }, PER_PAIR_MS * PAIRS + 750);\r\n    timeoutsRef.current.push(shuffleStartId);\r\n  };\r\n\r\n  useEffect(() => { newGame(); }, []);\r\n\r\n  const onCardClick = (c: Card) => {\r\n    if (busyRef.current) return;\r\n    if (matchedPairs.has(c.pairId)) return;\r\n    if (flippedUids.includes(c.uid)) return;\r\n\r\n    // Start timer on first interaction\r\n    if (!timerRunning) {\r\n      setTimerRunning(true);\r\n      if (!timerRef.current) {\r\n        timerRef.current = window.setInterval(() => setElapsedSec(s => s + 1), 1000);\r\n      }\r\n    }\r\n\r\n    const next = [...flippedUids, c.uid];\r\n    setFlippedUids(next);\r\n\r\n    if (next.length === 2) {\r\n      busyRef.current = true;\r\n      setMoves(m => m + 1);\r\n      const [u1, u2] = next;\r\n      const c1 = deck.find(d => d.uid === u1)!;\r\n      const c2 = deck.find(d => d.uid === u2)!;\r\n      const isMatch = c1.pairId === c2.pairId;\r\n      setTimeout(() => {\r\n        if (isMatch) { const s = new Set(matchedPairs); s.add(c1.pairId); setMatchedPairs(s); }\r\n        setFlippedUids([]);\r\n        busyRef.current = false;\r\n        // Stop timer when all pairs matched\r\n        setTimeout(() => {\r\n          if (matchedPairs.size + (isMatch ? 1 : 0) === PAIRS) {\r\n            setTimerRunning(false);\r\n            if (timerRef.current) { window.clearInterval(timerRef.current); timerRef.current = null; }\r\n          }\r\n        }, 0);\r\n      }, isMatch ? 350 : 650);\r\n    }\r\n  };\r\n\r\n  const cardHeight = Math.floor(cardWidth * CARD_RATIO);\r\n\r\n  return (\r\n    <div ref={containerRef} className=\"w-full min-h-[600px] p-1 flex flex-col bg-bg text-white rounded-lg\">\r\n      <div className=\"flex items-center justify-between mb-1 min-h-[40px]\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            onClick={toggleFullscreen}\r\n            className=\"p-2 bg-black/35 hover:bg-black/50 rounded text-white\"\r\n            aria-label={isFullscreen ? 'Exit Fullscreen' : 'Go Fullscreen'}\r\n          >\r\n            {isFullscreen ? <Minimize2 className=\"w-4 h-4\" /> : <Maximize2 className=\"w-4 h-4\" />}\r\n          </button>\r\n          {onClose && (\r\n            <button\r\n              onClick={onClose}\r\n              className=\"p-2 bg-black/35 hover:bg-black/50 rounded text-white\"\r\n              aria-label=\"close\"\r\n            >\r\n              <X className=\"w-4 h-4\" />\r\n            </button>\r\n          )}\r\n          <span className=\"text-xs text-text-muted font-mono tracking-wider\">Jiu-Jitsu Jungle Memory Game</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-4\">\r\n          <span className=\"text-xs font-mono tracking-wider\">\r\n            Time: {String(Math.floor(elapsedSec/60)).padStart(2,'0')}:{String(elapsedSec%60).padStart(2,'0')}\r\n          </span>\r\n          <span className=\"text-xs font-mono tracking-wider\">Moves: {moves}</span>\r\n          <Button size=\"sm\" variant=\"outline\" onClick={newGame} className=\"font-mono tracking-wider\">\r\n            <RotateCcw className=\"w-4 h-4 mr-1\" />\r\n            New Game\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex-1 grid grid-cols-4 gap-2.5 justify-items-center content-start relative\">\r\n        {deck.map(card => {\r\n          let isFlipped = flippedUids.includes(card.uid) || matchedPairs.has(card.pairId);\r\n          if (phase !== 'play') isFlipped = revealFront.has(card.uid);\r\n          return (\r\n            <div\r\n              key={card.uid}\r\n              ref={(el: HTMLDivElement | null) => { cardRefs.current[card.uid] = el; }}\r\n              data-uid={card.uid}\r\n              onClick={() => onCardClick(card)}\r\n              className=\"rounded-xl overflow-hidden shadow-lg relative cursor-pointer bg-bg\"\r\n              style={{ width: cardWidth, height: cardHeight }}\r\n            >\r\n              <div\r\n                className=\"absolute inset-0 transition-transform duration-280 ease-in-out\"\r\n                style={{ transform: isFlipped ? 'rotateY(0deg)' : 'rotateY(180deg)', backfaceVisibility: 'hidden' }}\r\n              >\r\n                <picture>\r\n                  <source srcSet={imageUrl(card.imageId, 'avif')} type=\"image/avif\" />\r\n                  <source srcSet={imageUrl(card.imageId, 'webp')} type=\"image/webp\" />\r\n                  <img\r\n                    src={imageUrl(card.imageId, 'webp')}\r\n                    alt={card.imageId}\r\n                    width={440}\r\n                    height={597}\r\n                    loading=\"lazy\"\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                </picture>\r\n              </div>\r\n              <div\r\n                className=\"absolute inset-0 transition-transform duration-280 ease-in-out\"\r\n                style={{ transform: isFlipped ? 'rotateY(180deg)' : 'rotateY(0deg)', backfaceVisibility: 'hidden' }}\r\n              >\r\n                <img\r\n                  src={BACK_URL}\r\n                  alt=\"back\"\r\n                  width={440}\r\n                  height={597}\r\n                  loading=\"lazy\"\r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n        {(phase === 'shuffle' && flyVisible) && (\r\n          <div className=\"fixed inset-0 bg-black/85 z-30 pointer-events-none\" />\r\n        )}\r\n        {flyVisible && (\r\n          <div className=\"fixed inset-0 z-40 pointer-events-none\">\r\n            {flyCards.map(fc => (\r\n              <div\r\n                key={`fly-${fc.uid}`}\r\n                className=\"absolute rounded-xl overflow-hidden shadow-lg transition-all duration-600 ease-in-out\"\r\n                style={{ left: fc.left, top: fc.top, width: cardWidth, height: cardHeight }}\r\n              >\r\n                <img\r\n                  src={BACK_URL}\r\n                  alt=\"back\"\r\n                  width={440}\r\n                  height={597}\r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {showIntro && (\r\n        <div\r\n          onClick={() => setShowIntro(false)}\r\n          className=\"fixed inset-0 z-50 bg-black/65 flex items-center justify-center\"\r\n        >\r\n          <div className=\"w-[70vw] sm:w-[360px] max-w-[420px] aspect-[440/597] rounded-xl overflow-hidden shadow-2xl\">\r\n            <img\r\n              src={BACK_URL}\r\n              alt=\"back\"\r\n              width={440}\r\n              height={597}\r\n              className=\"w-full h-full object-cover\"\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3045, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/modules/games/games-hub.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { CentroidGame } from './centroid-game';\r\nimport { MemoryGame } from './memory-game';\r\nimport { ArrowLeft } from 'lucide-react';\r\n\r\ninterface GamesHubProps {\r\n  onExit?: () => void;\r\n  initial?: 'none' | 'centroid' | 'memory';\r\n}\r\n\r\nexport const GamesHub: React.FC<GamesHubProps> = ({ onExit, initial = 'none' }) => {\r\n  const [selected, setSelected] = useState<'none'|'centroid'|'memory'>(initial);\r\n\r\n  React.useEffect(() => {\r\n    setSelected(initial);\r\n  }, [initial]);\r\n\r\n  if (selected === 'centroid') {\r\n    return (\r\n      <div className=\"w-full\">\r\n        <CentroidGame onClose={() => setSelected('none')} />\r\n      </div>\r\n    );\r\n  }\r\n  if (selected === 'memory') {\r\n    return (\r\n      <div className=\"w-full\">\r\n        <MemoryGame onClose={() => setSelected('none')} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const renderCentroidPreview = () => {\r\n    const GRID = 11;\r\n    const sampleDots = [\r\n      { x: 2, y: 2 }, { x: 3, y: 7 }, { x: 5, y: 4 }, { x: 7, y: 2 }, { x: 8, y: 8 }, { x: 2, y: 9 }\r\n    ];\r\n    const centroid = (pts: Array<{x:number;y:number}>) => {\r\n      const sx = pts.reduce((s,p)=>s+p.x,0);\r\n      const sy = pts.reduce((s,p)=>s+p.y,0);\r\n      return { x: sx/pts.length, y: sy/pts.length };\r\n    };\r\n    const nearest = (p:{x:number;y:number}) => ({ x: Math.round(p.x), y: Math.round(p.y) });\r\n    const actual = centroid(sampleDots);\r\n    const optimal = nearest(actual);\r\n    const guess = { x: Math.min(GRID-1, optimal.x+1), y: optimal.y };\r\n    const cells: React.ReactElement[] = [];\r\n    for (let y=0;y<GRID;y++) {\r\n      for (let x=0;x<GRID;x++) {\r\n        const isDot = sampleDots.some(d=>d.x===x && d.y===y);\r\n        const isGuess = guess.x===x && guess.y===y;\r\n        const isOptimal = Math.round(actual.x)===x && Math.round(actual.y)===y;\r\n        let bg = 'transparent';\r\n        if (isGuess) bg = 'bg-red-500';\r\n        else if (isOptimal) bg = 'bg-green-500';\r\n        else if (isDot) bg = 'bg-blue-500';\r\n        cells.push(\r\n          <div key={`${x}-${y}`} className={`border border-white/10 ${bg}`} />\r\n        );\r\n      }\r\n    }\r\n    return (\r\n      <div className=\"w-full\">\r\n        <div\r\n          className=\"relative w-full aspect-square grid bg-bg rounded overflow-hidden\"\r\n          style={{ gridTemplateColumns: `repeat(${GRID}, 1fr)`, gridTemplateRows: `repeat(${GRID}, 1fr)` }}\r\n        >\r\n          {cells}\r\n          <svg\r\n            viewBox={`0 0 ${GRID} ${GRID}`}\r\n            preserveAspectRatio=\"none\"\r\n            className=\"absolute inset-0 pointer-events-none w-full h-full\"\r\n          >\r\n            {sampleDots.map((d,i)=> (\r\n              <line\r\n                key={i}\r\n                x1={d.x+0.5}\r\n                y1={d.y+0.5}\r\n                x2={optimal.x+0.5}\r\n                y2={optimal.y+0.5}\r\n                stroke=\"#66bb6a\"\r\n                strokeWidth={0.15}\r\n                opacity={0.6}\r\n              />\r\n            ))}\r\n          </svg>\r\n        </div>\r\n        <div className=\"mt-2 text-xs\">\r\n          <div>Blue = dots</div>\r\n          <div className=\"text-green-400\">Green = true centroid</div>\r\n          <div className=\"text-red-400\">Red = your guess</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderMemoryPreview = () => {\r\n    const COLS = 4, ROWS = 4, GAP = 6;\r\n    const BACK_URL = '/images/memory/Memory_JJJ_Back_440x.webp';\r\n    const frontSrc = (id: string, ext: 'avif'|'webp') => `/images/memory/${ext}/${id}.${ext}`;\r\n    const faceMap: Record<number, string> = { 5: '001', 6: '002' };\r\n    const grid: React.ReactElement[] = [];\r\n    for (let i=0;i<COLS*ROWS;i++) {\r\n      const faceId = faceMap[i];\r\n      grid.push(\r\n        <div key={i} className=\"rounded-lg overflow-hidden shadow-md bg-bg aspect-[440/597]\">\r\n          {faceId ? (\r\n            <picture>\r\n              <source srcSet={frontSrc(faceId, 'avif')} type=\"image/avif\" />\r\n              <source srcSet={frontSrc(faceId, 'webp')} type=\"image/webp\" />\r\n              <img\r\n                src={frontSrc(faceId, 'webp')}\r\n                alt={`front-${faceId}`}\r\n                width={440}\r\n                height={597}\r\n                className=\"w-full h-full object-cover\"\r\n              />\r\n            </picture>\r\n          ) : (\r\n            <img\r\n              src={BACK_URL}\r\n              alt=\"back\"\r\n              width={440}\r\n              height={597}\r\n              className=\"w-full h-full object-cover\"\r\n            />\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"w-full\">\r\n        <div\r\n          className=\"grid gap-1.5 w-full\"\r\n          style={{ gridTemplateColumns: `repeat(${COLS}, 1fr)` }}\r\n        >\r\n          {grid}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full font-mono tracking-wider\">\r\n      <div className=\"flex justify-between items-center mb-4\">\r\n        <h2 className=\"text-xl font-semibold\">Games</h2>\r\n        {onExit && (\r\n          <Button variant=\"outline\" size=\"sm\" onClick={onExit} className=\"font-mono tracking-wider\">\r\n            <ArrowLeft className=\"w-4 h-4 mr-1\" />\r\n            Back to Modules\r\n          </Button>\r\n        )}\r\n      </div>\r\n      <div className=\"grid gap-2 md:gap-4 grid-cols-1 md:grid-cols-2\">\r\n        <Card className=\"aspect-[1/1.2] md:aspect-[2/3] max-h-[380px] md:max-h-[520px] rounded-xl overflow-hidden flex\">\r\n          <button\r\n            onClick={() => setSelected('centroid')}\r\n            className=\"flex flex-col gap-1 md:gap-2 flex-1 p-2 md:p-4 text-left w-full\"\r\n          >\r\n            <CardHeader className=\"p-0\">\r\n              <CardTitle className=\"text-lg font-mono\">Centroid</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"flex-1 flex items-stretch justify-center w-full p-0\">\r\n              {renderCentroidPreview()}\r\n            </CardContent>\r\n          </button>\r\n        </Card>\r\n        <Card className=\"aspect-[1/1.2] md:aspect-[2/3] max-h-[380px] md:max-h-[520px] rounded-xl overflow-hidden flex\">\r\n          <button\r\n            onClick={() => setSelected('memory')}\r\n            className=\"flex flex-col gap-1 md:gap-2 flex-1 p-2 md:p-4 text-left w-full\"\r\n          >\r\n            <CardHeader className=\"p-0\">\r\n              <CardTitle className=\"text-lg font-mono\">JJJ Memory</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"flex-1 flex items-stretch justify-center w-full p-0\">\r\n              {renderMemoryPreview()}\r\n            </CardContent>\r\n          </button>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3469, "column": 0}, "map": {"version":3,"sources":["file:///C:/01_Projects/01a_Coding/02_CodingProjects/bjj-skill-matrix/src/components/modules/timer/timer-tool.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Minus, Plus, RotateCcw, Play, Pause } from \"lucide-react\";\r\n\r\ntype HMS = { m: number; s: number };\r\n\r\nfunction clamp(v: number, min: number, max: number) {\r\n  return Math.max(min, Math.min(max, v));\r\n}\r\n\r\nfunction toSeconds(t: HMS) {\r\n  return t.m * 60 + t.s;\r\n}\r\n\r\nfunction fmt(seconds: number) {\r\n  const m = Math.floor(seconds / 60)\r\n    .toString()\r\n    .padStart(2, \"0\");\r\n  const s = Math.floor(seconds % 60)\r\n    .toString()\r\n    .padStart(2, \"0\");\r\n  return `${m}:${s}`;\r\n}\r\n\r\nfunction beep(freq = 880, dur = 120) {\r\n  try {\r\n    const Ctx =\r\n      (window as any).AudioContext || (window as any).webkitAudioContext;\r\n    const ctx = new Ctx();\r\n    const o = ctx.createOscillator();\r\n    const g = ctx.createGain();\r\n    o.frequency.value = freq;\r\n    o.type = \"square\";\r\n    o.connect(g);\r\n    g.connect(ctx.destination);\r\n    o.start();\r\n    setTimeout(() => {\r\n      o.stop();\r\n      ctx.close();\r\n    }, dur);\r\n  } catch {\r\n    // ignore audio errors (e.g. unsupported environment)\r\n  }\r\n}\r\n\r\nexport const TimerTool: React.FC = () => {\r\n  const [roundLen, setRoundLen] = useState<HMS>({ m: 5, s: 0 });\r\n  const [restLen, setRestLen] = useState<HMS>({ m: 0, s: 20 });\r\n  const [totalRounds, setTotalRounds] = useState<number>(5);\r\n  const [phase, setPhase] = useState<\r\n    \"countdown\" | \"round\" | \"rest\" | \"paused\" | \"finished\"\r\n  >(\"paused\");\r\n  const [currentRound, setCurrentRound] = useState(1);\r\n  const [remaining, setRemaining] = useState(0);\r\n  const intervalRef = useRef<number | null>(null);\r\n\r\n  // Load persisted settings on mount\r\n  useEffect(() => {\r\n    try {\r\n      const roundRaw = window.localStorage.getItem(\"coach_timer_round\");\r\n      const restRaw = window.localStorage.getItem(\"coach_timer_rest\");\r\n      const roundsRaw = window.localStorage.getItem(\"coach_timer_rounds\");\r\n      if (roundRaw) setRoundLen(JSON.parse(roundRaw));\r\n      if (restRaw) setRestLen(JSON.parse(restRaw));\r\n      if (roundsRaw) setTotalRounds(Number(roundsRaw) || 5);\r\n    } catch {\r\n      // ignore\r\n    }\r\n  }, []);\r\n\r\n  // Persist settings\r\n  useEffect(() => {\r\n    try {\r\n      window.localStorage.setItem(\"coach_timer_round\", JSON.stringify(roundLen));\r\n    } catch {\r\n      //\r\n    }\r\n  }, [roundLen]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      window.localStorage.setItem(\"coach_timer_rest\", JSON.stringify(restLen));\r\n    } catch {\r\n      //\r\n    }\r\n  }, [restLen]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      window.localStorage.setItem(\"coach_timer_rounds\", String(totalRounds));\r\n    } catch {\r\n      //\r\n    }\r\n  }, [totalRounds]);\r\n\r\n  const roundSeconds = useMemo(() => toSeconds(roundLen), [roundLen]);\r\n  const restSeconds = useMemo(() => toSeconds(restLen), [restLen]);\r\n\r\n  const clearTick = () => {\r\n    if (intervalRef.current) {\r\n      window.clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => clearTick();\r\n  }, []);\r\n\r\n  const runRound = () => {\r\n    clearTick();\r\n    setPhase(\"round\");\r\n    setRemaining(roundSeconds);\r\n    beep(1200, 400); // start beep\r\n    intervalRef.current = window.setInterval(() => {\r\n      setRemaining((prev) => {\r\n        const next = prev - 1;\r\n        if (next <= 0) {\r\n          clearTick();\r\n          beep(500, 800); // end of round\r\n          if (currentRound >= totalRounds) {\r\n            setPhase(\"finished\");\r\n            return 0;\r\n          }\r\n          runRest();\r\n          return 0;\r\n        }\r\n        return next;\r\n      });\r\n    }, 1000);\r\n  };\r\n\r\n  const startCountdown = (onDone: () => void) => {\r\n    clearTick();\r\n    setPhase(\"countdown\");\r\n    let count = 3;\r\n    setRemaining(count);\r\n    beep(900, 120); // \"3\"\r\n    intervalRef.current = window.setInterval(() => {\r\n      count -= 1;\r\n      setRemaining(count);\r\n      if (count > 0) {\r\n        const dur = count === 2 ? 240 : 360;\r\n        beep(900, dur);\r\n      } else {\r\n        beep(1200, 500);\r\n        clearTick();\r\n        onDone();\r\n      }\r\n    }, 1000);\r\n  };\r\n\r\n  const runRest = () => {\r\n    clearTick();\r\n    setPhase(\"rest\");\r\n    setRemaining(restSeconds);\r\n    intervalRef.current = window.setInterval(() => {\r\n      setRemaining((prev) => {\r\n        const next = prev - 1;\r\n        if (next <= 0) {\r\n          clearTick();\r\n          setCurrentRound((r) => r + 1);\r\n          startCountdown(runRound);\r\n          return 0;\r\n        }\r\n        return next;\r\n      });\r\n    }, 1000);\r\n  };\r\n\r\n  const start = () => {\r\n    setCurrentRound(1);\r\n    startCountdown(runRound);\r\n  };\r\n\r\n  const pause = () => {\r\n    setPhase(\"paused\");\r\n    clearTick();\r\n  };\r\n\r\n  const reset = () => {\r\n    clearTick();\r\n    setPhase(\"paused\");\r\n    setCurrentRound(1);\r\n    setRemaining(0);\r\n  };\r\n\r\n  const bigText = useMemo(() => fmt(Math.max(remaining, 0)), [remaining]);\r\n\r\n  const title =\r\n    phase === \"round\"\r\n      ? `Round ${currentRound}/${totalRounds}`\r\n      : phase === \"rest\"\r\n      ? \"Rest\"\r\n      : phase === \"countdown\"\r\n      ? \"Get Ready\"\r\n      : phase === \"finished\"\r\n      ? \"Finished\"\r\n      : \"Paused\";\r\n\r\n  const color =\r\n    phase === \"round\"\r\n      ? \"text-green-400\"\r\n      : phase === \"rest\" || phase === \"countdown\"\r\n      ? \"text-amber-400\"\r\n      : \"text-white\";\r\n\r\n  const adjust = (\r\n    setter: React.Dispatch<React.SetStateAction<HMS>>,\r\n    key: \"m\" | \"s\",\r\n    delta: number\r\n  ) =>\r\n    setter((v) => ({\r\n      ...v,\r\n      [key]: clamp(v[key] + delta, 0, key === \"m\" ? 99 : 59),\r\n    }));\r\n\r\n  return (\r\n    <div className=\"w-full space-y-4 font-mono tracking-wider\">\r\n      <div className=\"text-center text-text-muted text-sm\">{title}</div>\r\n\r\n      <div className=\"flex justify-center my-2\">\r\n        <div\r\n          className={`font-mono tabular-nums tracking-[0.25em] text-[18vw] sm:text-[12vw] leading-none font-bold ${color}`}\r\n        >\r\n          {bigText}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex flex-wrap justify-center gap-2 mb-2 text-xs sm:text-sm\">\r\n        <div className=\"flex items-center gap-1 rounded-md bg-bg-raised px-2 py-1 text-text-muted\">\r\n          <span>Duration</span>\r\n          <button\r\n            type=\"button\"\r\n            className=\"p-1 rounded hover:bg-white/10\"\r\n            onClick={() => adjust(setRoundLen, \"m\", -1)}\r\n          >\r\n            <Minus className=\"w-3 h-3\" />\r\n          </button>\r\n          <span className=\"font-semibold\">\r\n            {roundLen.m.toString().padStart(2, \"0\")}:\r\n            {roundLen.s.toString().padStart(2, \"0\")}\r\n          </span>\r\n          <button\r\n            type=\"button\"\r\n            className=\"p-1 rounded hover:bg-white/10\"\r\n            onClick={() => adjust(setRoundLen, \"m\", +1)}\r\n          >\r\n            <Plus className=\"w-3 h-3\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-1 rounded-md bg-bg-raised px-2 py-1 text-text-muted\">\r\n          <span>Rest</span>\r\n          <button\r\n            type=\"button\"\r\n            className=\"p-1 rounded hover:bg-white/10\"\r\n            onClick={() => adjust(setRestLen, \"s\", -5)}\r\n          >\r\n            <Minus className=\"w-3 h-3\" />\r\n          </button>\r\n          <span className=\"font-semibold\">\r\n            {restLen.m.toString().padStart(2, \"0\")}:\r\n            {restLen.s.toString().padStart(2, \"0\")}\r\n          </span>\r\n          <button\r\n            type=\"button\"\r\n            className=\"p-1 rounded hover:bg-white/10\"\r\n            onClick={() => adjust(setRestLen, \"s\", +5)}\r\n          >\r\n            <Plus className=\"w-3 h-3\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-1 rounded-md bg-bg-raised px-2 py-1 text-text-muted\">\r\n          <span>Rounds</span>\r\n          <button\r\n            type=\"button\"\r\n            className=\"p-1 rounded hover:bg-white/10\"\r\n            onClick={() =>\r\n              setTotalRounds((r) => Math.max(1, Math.min(99, r - 1)))\r\n            }\r\n          >\r\n            <Minus className=\"w-3 h-3\" />\r\n          </button>\r\n          <span className=\"font-semibold\">{totalRounds}</span>\r\n          <button\r\n            type=\"button\"\r\n            className=\"p-1 rounded hover:bg-white/10\"\r\n            onClick={() =>\r\n              setTotalRounds((r) => Math.max(1, Math.min(99, r + 1)))\r\n            }\r\n          >\r\n            <Plus className=\"w-3 h-3\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex justify-center gap-3\">\r\n        {phase === \"paused\" || phase === \"countdown\" || phase === \"finished\" ? (\r\n          <Button\r\n            size=\"lg\"\r\n            onClick={start}\r\n            className=\"font-mono tracking-wider min-w-[120px]\"\r\n          >\r\n            <Play className=\"w-4 h-4 mr-1\" />\r\n            Start\r\n          </Button>\r\n        ) : (\r\n          <Button\r\n            size=\"lg\"\r\n            variant=\"outline\"\r\n            onClick={pause}\r\n            className=\"font-mono tracking-wider min-w-[120px]\"\r\n          >\r\n            <Pause className=\"w-4 h-4 mr-1\" />\r\n            Pause\r\n          </Button>\r\n        )}\r\n        <Button\r\n          size=\"lg\"\r\n          variant=\"ghost\"\r\n          onClick={reset}\r\n          className=\"font-mono tracking-wider\"\r\n        >\r\n          <RotateCcw className=\"w-4 h-4 mr-1\" />\r\n          Reset\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TimerTool;\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAJA;;;;;AAQA,SAAS,MAAM,CAAS,EAAE,GAAW,EAAE,GAAW;IAChD,OAAO,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK;AACrC;AAEA,SAAS,UAAU,CAAM;IACvB,OAAO,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC;AACvB;AAEA,SAAS,IAAI,OAAe;IAC1B,MAAM,IAAI,KAAK,KAAK,CAAC,UAAU,IAC5B,QAAQ,GACR,QAAQ,CAAC,GAAG;IACf,MAAM,IAAI,KAAK,KAAK,CAAC,UAAU,IAC5B,QAAQ,GACR,QAAQ,CAAC,GAAG;IACf,OAAO,GAAG,EAAE,CAAC,EAAE,GAAG;AACpB;AAEA,SAAS,KAAK,OAAO,GAAG,EAAE,MAAM,GAAG;IACjC,IAAI;QACF,MAAM,MACJ,AAAC,OAAe,YAAY,IAAI,AAAC,OAAe,kBAAkB;QACpE,MAAM,MAAM,IAAI;QAChB,MAAM,IAAI,IAAI,gBAAgB;QAC9B,MAAM,IAAI,IAAI,UAAU;QACxB,EAAE,SAAS,CAAC,KAAK,GAAG;QACpB,EAAE,IAAI,GAAG;QACT,EAAE,OAAO,CAAC;QACV,EAAE,OAAO,CAAC,IAAI,WAAW;QACzB,EAAE,KAAK;QACP,WAAW;YACT,EAAE,IAAI;YACN,IAAI,KAAK;QACX,GAAG;IACL,EAAE,OAAM;IACN,qDAAqD;IACvD;AACF;AAEO,MAAM,YAAsB;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAM;QAAE,GAAG;QAAG,GAAG;IAAE;IAC3D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAM;QAAE,GAAG;QAAG,GAAG;IAAG;IAC1D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAS;IACvD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAEhC;IACF,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,cAAc,IAAA,+MAAM,EAAgB;IAE1C,mCAAmC;IACnC,IAAA,kNAAS,EAAC;QACR,IAAI;YACF,MAAM,WAAW,OAAO,YAAY,CAAC,OAAO,CAAC;YAC7C,MAAM,UAAU,OAAO,YAAY,CAAC,OAAO,CAAC;YAC5C,MAAM,YAAY,OAAO,YAAY,CAAC,OAAO,CAAC;YAC9C,IAAI,UAAU,YAAY,KAAK,KAAK,CAAC;YACrC,IAAI,SAAS,WAAW,KAAK,KAAK,CAAC;YACnC,IAAI,WAAW,eAAe,OAAO,cAAc;QACrD,EAAE,OAAM;QACN,SAAS;QACX;IACF,GAAG,EAAE;IAEL,mBAAmB;IACnB,IAAA,kNAAS,EAAC;QACR,IAAI;YACF,OAAO,YAAY,CAAC,OAAO,CAAC,qBAAqB,KAAK,SAAS,CAAC;QAClE,EAAE,OAAM;QACN,EAAE;QACJ;IACF,GAAG;QAAC;KAAS;IAEb,IAAA,kNAAS,EAAC;QACR,IAAI;YACF,OAAO,YAAY,CAAC,OAAO,CAAC,oBAAoB,KAAK,SAAS,CAAC;QACjE,EAAE,OAAM;QACN,EAAE;QACJ;IACF,GAAG;QAAC;KAAQ;IAEZ,IAAA,kNAAS,EAAC;QACR,IAAI;YACF,OAAO,YAAY,CAAC,OAAO,CAAC,sBAAsB,OAAO;QAC3D,EAAE,OAAM;QACN,EAAE;QACJ;IACF,GAAG;QAAC;KAAY;IAEhB,MAAM,eAAe,IAAA,gNAAO,EAAC,IAAM,UAAU,WAAW;QAAC;KAAS;IAClE,MAAM,cAAc,IAAA,gNAAO,EAAC,IAAM,UAAU,UAAU;QAAC;KAAQ;IAE/D,MAAM,YAAY;QAChB,IAAI,YAAY,OAAO,EAAE;YACvB,OAAO,aAAa,CAAC,YAAY,OAAO;YACxC,YAAY,OAAO,GAAG;QACxB;IACF;IAEA,IAAA,kNAAS,EAAC;QACR,OAAO,IAAM;IACf,GAAG,EAAE;IAEL,MAAM,WAAW;QACf;QACA,SAAS;QACT,aAAa;QACb,KAAK,MAAM,MAAM,aAAa;QAC9B,YAAY,OAAO,GAAG,OAAO,WAAW,CAAC;YACvC,aAAa,CAAC;gBACZ,MAAM,OAAO,OAAO;gBACpB,IAAI,QAAQ,GAAG;oBACb;oBACA,KAAK,KAAK,MAAM,eAAe;oBAC/B,IAAI,gBAAgB,aAAa;wBAC/B,SAAS;wBACT,OAAO;oBACT;oBACA;oBACA,OAAO;gBACT;gBACA,OAAO;YACT;QACF,GAAG;IACL;IAEA,MAAM,iBAAiB,CAAC;QACtB;QACA,SAAS;QACT,IAAI,QAAQ;QACZ,aAAa;QACb,KAAK,KAAK,MAAM,MAAM;QACtB,YAAY,OAAO,GAAG,OAAO,WAAW,CAAC;YACvC,SAAS;YACT,aAAa;YACb,IAAI,QAAQ,GAAG;gBACb,MAAM,MAAM,UAAU,IAAI,MAAM;gBAChC,KAAK,KAAK;YACZ,OAAO;gBACL,KAAK,MAAM;gBACX;gBACA;YACF;QACF,GAAG;IACL;IAEA,MAAM,UAAU;QACd;QACA,SAAS;QACT,aAAa;QACb,YAAY,OAAO,GAAG,OAAO,WAAW,CAAC;YACvC,aAAa,CAAC;gBACZ,MAAM,OAAO,OAAO;gBACpB,IAAI,QAAQ,GAAG;oBACb;oBACA,gBAAgB,CAAC,IAAM,IAAI;oBAC3B,eAAe;oBACf,OAAO;gBACT;gBACA,OAAO;YACT;QACF,GAAG;IACL;IAEA,MAAM,QAAQ;QACZ,gBAAgB;QAChB,eAAe;IACjB;IAEA,MAAM,QAAQ;QACZ,SAAS;QACT;IACF;IAEA,MAAM,QAAQ;QACZ;QACA,SAAS;QACT,gBAAgB;QAChB,aAAa;IACf;IAEA,MAAM,UAAU,IAAA,gNAAO,EAAC,IAAM,IAAI,KAAK,GAAG,CAAC,WAAW,KAAK;QAAC;KAAU;IAEtE,MAAM,QACJ,UAAU,UACN,CAAC,MAAM,EAAE,aAAa,CAAC,EAAE,aAAa,GACtC,UAAU,SACV,SACA,UAAU,cACV,cACA,UAAU,aACV,aACA;IAEN,MAAM,QACJ,UAAU,UACN,mBACA,UAAU,UAAU,UAAU,cAC9B,mBACA;IAEN,MAAM,SAAS,CACb,QACA,KACA,QAEA,OAAO,CAAC,IAAM,CAAC;gBACb,GAAG,CAAC;gBACJ,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,IAAI,GAAG,OAAO,GAAG,QAAQ,MAAM,KAAK;YACrD,CAAC;IAEH,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BAAuC;;;;;;0BAEtD,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,WAAW,CAAC,2FAA2F,EAAE,OAAO;8BAE/G;;;;;;;;;;;0BAIL,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;0CAAK;;;;;;0CACN,8OAAC;gCACC,MAAK;gCACL,WAAU;gCACV,SAAS,IAAM,OAAO,aAAa,KAAK,CAAC;0CAEzC,cAAA,8OAAC,6MAAK;oCAAC,WAAU;;;;;;;;;;;0CAEnB,8OAAC;gCAAK,WAAU;;oCACb,SAAS,CAAC,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG;oCAAK;oCACvC,SAAS,CAAC,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG;;;;;;;0CAErC,8OAAC;gCACC,MAAK;gCACL,WAAU;gCACV,SAAS,IAAM,OAAO,aAAa,KAAK,CAAC;0CAEzC,cAAA,8OAAC,0MAAI;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAIpB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;0CAAK;;;;;;0CACN,8OAAC;gCACC,MAAK;gCACL,WAAU;gCACV,SAAS,IAAM,OAAO,YAAY,KAAK,CAAC;0CAExC,cAAA,8OAAC,6MAAK;oCAAC,WAAU;;;;;;;;;;;0CAEnB,8OAAC;gCAAK,WAAU;;oCACb,QAAQ,CAAC,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG;oCAAK;oCACtC,QAAQ,CAAC,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG;;;;;;;0CAEpC,8OAAC;gCACC,MAAK;gCACL,WAAU;gCACV,SAAS,IAAM,OAAO,YAAY,KAAK,CAAC;0CAExC,cAAA,8OAAC,0MAAI;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAIpB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;0CAAK;;;;;;0CACN,8OAAC;gCACC,MAAK;gCACL,WAAU;gCACV,SAAS,IACP,eAAe,CAAC,IAAM,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,IAAI,IAAI;0CAGrD,cAAA,8OAAC,6MAAK;oCAAC,WAAU;;;;;;;;;;;0CAEnB,8OAAC;gCAAK,WAAU;0CAAiB;;;;;;0CACjC,8OAAC;gCACC,MAAK;gCACL,WAAU;gCACV,SAAS,IACP,eAAe,CAAC,IAAM,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,IAAI,IAAI;0CAGrD,cAAA,8OAAC,0MAAI;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;0BAKtB,8OAAC;gBAAI,WAAU;;oBACZ,UAAU,YAAY,UAAU,eAAe,UAAU,2BACxD,8OAAC,4IAAM;wBACL,MAAK;wBACL,SAAS;wBACT,WAAU;;0CAEV,8OAAC,0MAAI;gCAAC,WAAU;;;;;;4BAAiB;;;;;;iFAInC,8OAAC,4IAAM;wBACL,MAAK;wBACL,SAAQ;wBACR,SAAS;wBACT,WAAU;;0CAEV,8OAAC,6MAAK;gCAAC,WAAU;;;;;;4BAAiB;;;;;;;kCAItC,8OAAC,4IAAM;wBACL,MAAK;wBACL,SAAQ;wBACR,SAAS;wBACT,WAAU;;0CAEV,8OAAC,6NAAS;gCAAC,WAAU;;;;;;4BAAiB;;;;;;;;;;;;;;;;;;;AAMhD;uCAEe"}}]
}